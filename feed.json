{
    "version": "https://jsonfeed.org/version/1",
    "title": "🐟",
    "subtitle": "",
    "icon": "http://tagbug.github.io/images/favicon.ico",
    "description": "所念皆星河",
    "home_page_url": "http://tagbug.github.io",
    "items": [
        {
            "id": "http://tagbug.github.io/2022/03/25/MySQL%E5%9F%BA%E7%A1%80/",
            "url": "http://tagbug.github.io/2022/03/25/MySQL%E5%9F%BA%E7%A1%80/",
            "title": "MySQL基础",
            "date_published": "2022-03-25T13:27:08.000Z",
            "content_html": "<blockquote>\n<p>SQL 语法（DDL/DML/DQL/DCL）、函数、约束、多表查询、事务</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"mysql基础\"><a class=\"anchor\" href=\"#mysql基础\">#</a> MySQL 基础</h1>\n<h2 id=\"sql语法\"><a class=\"anchor\" href=\"#sql语法\">#</a> SQL 语法</h2>\n<h3 id=\"数据定义ddl\"><a class=\"anchor\" href=\"#数据定义ddl\">#</a> 数据定义（DDL）</h3>\n<ol>\n<li>\n<p>数据库操作</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">DATABASES</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span><span class=\"token punctuation\">]</span> 数据库名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">USE</span> 数据库名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DATABASE</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">DATABASE</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">IF</span> <span class=\"token keyword\">EXISTS</span><span class=\"token punctuation\">]</span> 数据库名<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>表操作</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">TABLES</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> 表名<span class=\"token punctuation\">(</span>字段 字段类型<span class=\"token punctuation\">,</span>字段 字段类型<span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">DESC</span> 表名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> 表名<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token punctuation\">[</span><span class=\"token keyword\">ADD</span><span class=\"token operator\">/</span><span class=\"token keyword\">MODIFY</span><span class=\"token operator\">/</span>CHANGE<span class=\"token operator\">/</span><span class=\"token keyword\">DROP</span><span class=\"token operator\">/</span><span class=\"token keyword\">RENAME</span> <span class=\"token keyword\">TO</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">TABLE</span> 表名<span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"增删改dml\"><a class=\"anchor\" href=\"#增删改dml\">#</a> 增删改（DML）</h3>\n<ol>\n<li>\n<p>增加数据</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> 表名<span class=\"token punctuation\">(</span>字段<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>字段<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span>值<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>值<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>值<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>值<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>修改数据</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">UPDATE</span> 表名 <span class=\"token keyword\">SET</span> 字段<span class=\"token number\">1</span><span class=\"token operator\">=</span>值<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> 字段<span class=\"token number\">2</span><span class=\"token operator\">=</span>值<span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> 条件<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>删除数据</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> 表名 <span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> 条件<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"数据查询dql\"><a class=\"anchor\" href=\"#数据查询dql\">#</a> 数据查询（DQL）</h3>\n<ol>\n<li>\n<p>DQL 语句</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span> 字段列表 <span class=\"token operator\">-</span><span class=\"token operator\">></span> 字段名<span class=\"token punctuation\">[</span><span class=\"token keyword\">AS</span><span class=\"token punctuation\">]</span>别名</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">FROM</span> 表名</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">WHERE</span> 条件列表 <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">></span> <span class=\"token operator\">>=</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">&lt;=</span> <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;></span> <span class=\"token operator\">like</span> <span class=\"token operator\">between</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">and</span> <span class=\"token operator\">in</span> <span class=\"token operator\">and</span> <span class=\"token operator\">or</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> 分组字段列表</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">HAVING</span> 分组后条件列表 <span class=\"token operator\">-</span><span class=\"token operator\">></span> 分组后过滤</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> 排序字段列表 <span class=\"token operator\">-</span><span class=\"token operator\">></span> 升序<span class=\"token keyword\">ASC</span>，降序<span class=\"token keyword\">DESC</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">LIMIT</span> 分页参数 <span class=\"token operator\">-</span><span class=\"token operator\">></span> 起始索引（从<span class=\"token number\">0</span>开始），每页展示记录数</pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"用户管理dcl\"><a class=\"anchor\" href=\"#用户管理dcl\">#</a> 用户管理（DCL）</h3>\n<ol>\n<li>\n<p>用户管路</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'密码'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span> IDENTIFIED <span class=\"token keyword\">WITH</span> mysql_native_password <span class=\"token keyword\">BY</span> <span class=\"token string\">'密码'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>权限控制</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">GRANT</span> 权限列表 <span class=\"token keyword\">ON</span> 数据库名<span class=\"token punctuation\">.</span>表名 <span class=\"token keyword\">TO</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">REVOKE</span> 权限列表 <span class=\"token keyword\">ON</span> 数据库名<span class=\"token punctuation\">.</span>表名 <span class=\"token keyword\">FROM</span> <span class=\"token string\">'用户名'</span><span class=\"token variable\">@'主机名'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"函数\"><a class=\"anchor\" href=\"#函数\">#</a> 函数</h2>\n<ol>\n<li>\n<p>字符串函数</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>CONCAT<span class=\"token punctuation\">,</span> LOWER<span class=\"token punctuation\">,</span> UPPER<span class=\"token punctuation\">,</span> LPAD<span class=\"token punctuation\">,</span> RPAD<span class=\"token punctuation\">,</span> TRIM<span class=\"token punctuation\">,</span> SUBSTRING</pre></td></tr></table></figure></li>\n<li>\n<p>数值函数</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>CEIL<span class=\"token punctuation\">,</span> FLOOR<span class=\"token punctuation\">,</span> MOD<span class=\"token punctuation\">,</span> RAND<span class=\"token punctuation\">,</span> ROUND</pre></td></tr></table></figure></li>\n<li>\n<p>日期函数</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>CURDATE<span class=\"token punctuation\">,</span> CURTIME<span class=\"token punctuation\">,</span> NOW<span class=\"token punctuation\">,</span> <span class=\"token keyword\">YEAR</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">MONTH</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">DAY</span><span class=\"token punctuation\">,</span> DATE_ADD<span class=\"token punctuation\">,</span> DATEDIFF</pre></td></tr></table></figure></li>\n<li>\n<p>流程函数</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">IF</span><span class=\"token punctuation\">,</span> IFNULL<span class=\"token punctuation\">,</span> <span class=\"token keyword\">CASE</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">WHEN</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">THEN</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">ELSE</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">END</span></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"约束\"><a class=\"anchor\" href=\"#约束\">#</a> 约束</h2>\n<ol>\n<li>非空约束： <code>NOT NULL</code></li>\n<li>唯一约束： <code>UNIQUE</code></li>\n<li>主键约束： <code>PRIMARY KEY</code> （自增：AUTO_INCREMENT）</li>\n<li>默认约束： <code>DEFAULT</code></li>\n<li>检查约束： <code>CHECK</code></li>\n<li>外键约束： <code>FOREIGN KEY</code></li>\n</ol>\n<h3 id=\"外键约束语法\"><a class=\"anchor\" href=\"#外键约束语法\">#</a> 外键约束语法</h3>\n<p>添加外键</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> 表名<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    字段名 数据类型<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">[</span><span class=\"token keyword\">CONSTRAINT</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>外键名称<span class=\"token punctuation\">]</span> <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>外键字段<span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> 主表<span class=\"token punctuation\">(</span>主表列名<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token keyword\">ADD</span> <span class=\"token keyword\">CONSTRAINT</span> 外键名称 <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>外键字段名<span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> 主表<span class=\"token punctuation\">(</span>主表列名<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>删除外键</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> 表名 <span class=\"token keyword\">DROP</span> <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> 外键名称<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>删除 / 更新行为</p>\n<table>\n<thead>\n<tr>\n<th>行为</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NO ACTION</td>\n<td>当在父表中删除／更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除／更新。（与 RESTRICT 一致）</td>\n</tr>\n<tr>\n<td>RESTRICT</td>\n<td>当在父表中删除／更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除／更新。（与 NO ACTION 一致）</td>\n</tr>\n<tr>\n<td>CASCADE</td>\n<td>当在父表中删除／更新对应记录时，首先检查该记录是否有对应外键，如果有，则也删除／更新外键在子表中的记录。</td>\n</tr>\n<tr>\n<td>SET NULL</td>\n<td>当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为 null（这就要求该外键允许取 null）。</td>\n</tr>\n<tr>\n<td>SET DEFAULT</td>\n<td>父表有变更时，子表将外键列设置成一个默认的值（Innodb 不支持）</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"多表查询\"><a class=\"anchor\" href=\"#多表查询\">#</a> 多表查询</h2>\n<ol>\n<li>\n<p>多表关系</p>\n<ul>\n<li>一对多：在多的一方设置外键，关联一的一方的主键</li>\n<li>多对多：建立中间表，中间表包含两个外键，关联两张表的主键</li>\n<li>一对一：用于表结构拆分，在其中任何一方设置外键（UNIQUE），关联另一方的主键</li>\n</ul>\n</li>\n<li>\n<p>多表查询</p>\n<ul>\n<li>\n<p>内连接</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>隐式：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">FROM</span> 表A<span class=\"token punctuation\">,</span>表B <span class=\"token keyword\">WHERE</span> 条件<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>显式：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">FROM</span> 表A <span class=\"token keyword\">INNER</span> <span class=\"token keyword\">JOIN</span> 表B <span class=\"token keyword\">ON</span> 条件<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr></table></figure></li>\n<li>\n<p>外连接</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>左外：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">FROM</span> 表A <span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> 表B <span class=\"token keyword\">ON</span> 条件<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>右外：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">FROM</span> 表A <span class=\"token keyword\">RIGHT</span> <span class=\"token keyword\">JOIN</span> 表B <span class=\"token keyword\">ON</span> 条件<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr></table></figure></li>\n<li>\n<p>自连接：</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">FROM</span> 表A 别名<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>表A 别名<span class=\"token number\">2</span> <span class=\"token keyword\">WHERE</span> 条件<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr></table></figure></li>\n<li>\n<p>子查询：标量子查询、列子查询、行子查询、表子查询</p>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"事务\"><a class=\"anchor\" href=\"#事务\">#</a> 事务</h2>\n<ol>\n<li>\n<p>事务简介：事务是一组操作的集合，这组操作，要么全部执行成功，要么全部执行失败。</p>\n</li>\n<li>\n<p>事务操作</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">START</span> <span class=\"token keyword\">TRANSACTION</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">-- 开启事务</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">COMMIT</span><span class=\"token operator\">/</span><span class=\"token keyword\">ROLLBACK</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">-- 提交／回滚事务</span></pre></td></tr></table></figure></li>\n<li>\n<p>事务四大特性<br>\n原子性（<strong>A</strong>tomicity）、一致性（<strong>C</strong>onsistency）、隔离性（<strong>I</strong>solation）、持久性（<strong>D</strong>urability）</p>\n</li>\n<li>\n<p>并发事务问题<br>\n赃读、不可重复读、幻读</p>\n</li>\n<li>\n<p>事务隔离级别<br>\n READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ、SERIALIZABLE</p>\n</li>\n</ol>\n",
            "tags": [
                "数据库",
                "MySQL",
                "MySQL",
                "数据库"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/21/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/21/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80-%E7%AC%94%E8%AE%B0/",
            "title": "Web安全基础 - 笔记",
            "date_published": "2022-01-21T15:40:47.000Z",
            "content_html": "<blockquote>\n<p>从攻击角度和防御角度看 Web 安全：XSS、CSRF、Injection、Dos、DDos、中间人攻击</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"web开发安全-笔记\"><a class=\"anchor\" href=\"#web开发安全-笔记\">#</a> Web 开发安全 - 笔记</h1>\n<h2 id=\"攻击篇\"><a class=\"anchor\" href=\"#攻击篇\">#</a> 攻击篇</h2>\n<h3 id=\"xss\"><a class=\"anchor\" href=\"#xss\">#</a> XSS</h3>\n<ul>\n<li>XSS（<em> <code>Cross-Site Scripting</code> </em>）</li>\n<li>在安全内容中插入用户自己的恶意代码</li>\n<li>利用了网站开发者<strong>盲目信任用户的提交内容</strong> + HTML 文档特性（string -&gt; DOM）</li>\n</ul>\n<h4 id=\"特点\"><a class=\"anchor\" href=\"#特点\">#</a> 特点</h4>\n<ul>\n<li>通常难以从 UI 上感知（暗地里执行脚本）</li>\n<li>窃取用户信息（cookie/token）</li>\n<li>绘制 UI（例如弹窗），诱骗用户点击 / 填写表单</li>\n</ul>\n<h4 id=\"分类\"><a class=\"anchor\" href=\"#分类\">#</a> 分类</h4>\n<ul>\n<li>\n<p>Stored XSS</p>\n<ul>\n<li>恶意脚本被存在数据库中</li>\n<li>访问页面 -&gt; 读数据 -&gt; 被攻击</li>\n<li>危害<strong>最大</strong>，对全部用户可见</li>\n</ul>\n</li>\n<li>\n<p>Reflected XSS</p>\n<ul>\n<li>不涉及数据库</li>\n<li>从 URL 上攻击</li>\n<li>例如： <code>host/path/?param=&lt;script&gt;alert('123')&lt;/script&gt;</code></li>\n</ul>\n</li>\n<li>\n<p>DOM-based XSS</p>\n<ul>\n<li>不需要服务器的参与</li>\n<li>恶意攻击的发起 + 执行，全在浏览器完成</li>\n</ul>\n</li>\n<li>\n<p>Mutation-based XSS</p>\n<ul>\n<li>\n<p>利用了浏览器渲染 DOM 的特性（独特优化）</p>\n</li>\n<li>\n<p>不同浏览器，会有区别（按浏览器进行攻击）</p>\n</li>\n<li>\n<p>例如：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;/noscript>&lt;img src=x onerror=alert(1)><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"csrf\"><a class=\"anchor\" href=\"#csrf\">#</a> CSRF</h3>\n<ul>\n<li>\n<p>CSRF（<em> <code>Cross-site request forgery</code> </em>）</p>\n</li>\n<li>\n<p>在用户不知情的前提下</p>\n</li>\n<li>\n<p>利用用户权限（cookie）</p>\n</li>\n<li>\n<p>构造指定 HTTP 请求，窃取或修改用户敏感信息</p>\n</li>\n<li>\n<p>例如：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://bank.com/transfer?to=hacker&amp;amount=100<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"injection\"><a class=\"anchor\" href=\"#injection\">#</a> Injection</h3>\n<h4 id=\"sql-injection\"><a class=\"anchor\" href=\"#sql-injection\">#</a> SQL Injection</h4>\n<p>攻击流程：</p>\n<ol>\n<li>请求\n<ul>\n<li>SQL 参数（恶意注入）</li>\n</ul>\n</li>\n<li>Server\n<ul>\n<li>拼接参数 -&gt; 运行 SQL code</li>\n</ul>\n</li>\n<li>数据库\n<ul>\n<li>获取其他数据</li>\n<li>修改数据</li>\n<li>删除数据等</li>\n</ul>\n</li>\n</ol>\n<p>例如： <code>SELECT XXX FROM $&#123;'any; DROP TABLE table;'&#125;</code></p>\n<h4 id=\"其他-injection\"><a class=\"anchor\" href=\"#其他-injection\">#</a> 其他 Injection</h4>\n<ul>\n<li>CLI</li>\n<li>OS command</li>\n<li>SSRF（Server-Side Request Forgery），服务端伪造请求\n<ul>\n<li>严格而言，SSRF 不是 injection，但是原理类似</li>\n</ul>\n</li>\n</ul>\n<p>例如：</p>\n<ol>\n<li><code>const command =  <code>covert-cli video -o '$&#123;&quot;' &amp;&amp; rm -rf /&quot;&#125;'</code> </code></li>\n<li>请求<strong>用户自定义</strong>的 callback URL + web server 通常有内网访问权限</li>\n</ol>\n<h3 id=\"dos\"><a class=\"anchor\" href=\"#dos\">#</a> DoS</h3>\n<ul>\n<li>DoS（<em> <code>Denial of Service</code> </em>）</li>\n<li>通过某种方式（构造特定请求），导致服务器资源被显著消耗，来不及相应更多请求，导致请求挤压，进而雪崩</li>\n</ul>\n<p>例如：</p>\n<ul>\n<li>基于正则表达式的 DoS（利用正则表达式贪婪模式）\n<ul>\n<li><code>/^((ab)*)+$/</code></li>\n<li>构造 <code>&quot;abababababababa&quot;</code></li>\n<li>造成算法多次回溯，导致响应时间📈，接口吞吐量📉</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ddos\"><a class=\"anchor\" href=\"#ddos\">#</a> DDoS</h3>\n<ul>\n<li>DDoS（<em> <code>Distributed DoS</code> </em>）</li>\n<li>短时间内，来自大量僵尸设备的请求流量，服务器不能及时完成全部请求，导致请求堆积，进而雪崩效应，无法响应新请求</li>\n<li>攻击特点\n<ul>\n<li>直接访问 IP</li>\n<li>任意 API</li>\n<li>消耗大量带宽（耗尽）</li>\n</ul>\n</li>\n</ul>\n<p>例如： <code>SYN Flood</code></p>\n<h3 id=\"中间人攻击\"><a class=\"anchor\" href=\"#中间人攻击\">#</a> 中间人攻击</h3>\n<p>前提：</p>\n<ul>\n<li>HTTP 明文传输</li>\n<li>信息篡改不可知</li>\n<li>对方身份未验证</li>\n</ul>\n<p>危害：</p>\n<ul>\n<li>窃取信息</li>\n<li>修改请求、响应</li>\n</ul>\n<p>攻击方：</p>\n<ul>\n<li>恶意 WebView</li>\n<li>路由器</li>\n<li>ISP 等</li>\n</ul>\n<h2 id=\"防御篇\"><a class=\"anchor\" href=\"#防御篇\">#</a> 防御篇</h2>\n<h3 id=\"xss-2\"><a class=\"anchor\" href=\"#xss-2\">#</a> XSS</h3>\n<ul>\n<li>永远不信任用户的提交内容</li>\n<li>永远不要将用户提交内容直接转换成 DOM</li>\n</ul>\n<p>可用工具：</p>\n<ul>\n<li>前端\n<ul>\n<li>主流框架（React、Vue 等）默认防御 XSS</li>\n<li><code>google-closure-library</code></li>\n</ul>\n</li>\n<li>服务端（Node）\n<ul>\n<li>npm 包： <code>DOMPurify</code></li>\n</ul>\n</li>\n</ul>\n<p>注意点：</p>\n<ul>\n<li>⚠string -&gt; DOM：对 string 进行转义</li>\n<li>⚠上传 svg（svg 可以内嵌 script 标签）：对 svg 标签进行扫描</li>\n<li>⚠自定义跳转链接：最好不要允许，要做好过滤</li>\n<li>⚠自定义样式（问卷场景下利用 css 的 <code>background: url(&quot;https://example.com/?income=gt10k&quot;)</code>  窃取用户隐私）</li>\n</ul>\n<p>安全设置：</p>\n<ul>\n<li>Same-origin Policy：同源策略</li>\n<li>CSP（<em> <code>Content Security Policy</code> </em>）：确认安全来源的脚本、拒绝 <code>eval</code>  等</li>\n</ul>\n<h3 id=\"csrf-2\"><a class=\"anchor\" href=\"#csrf-2\">#</a> CSRF</h3>\n<ul>\n<li>Origin 头 + Referer 头</li>\n<li>token + token 过期时间：token 必须和注册用户绑定</li>\n<li>针对 iframe 攻击 -&gt;  <code>X-Frame-Options: DENY/SAMEORIGIN</code></li>\n<li>anti-pattern：<strong>不要</strong>将数据更新 &amp; 获取逻辑放在同一个接口中</li>\n<li>避免用户信息被携带：SameSite Cookie 设置（从根源上解决 CSRF）</li>\n<li>采用专门的中间件防御 CSRF</li>\n</ul>\n<h3 id=\"injection-2\"><a class=\"anchor\" href=\"#injection-2\">#</a> Injection</h3>\n<ul>\n<li>找到项目中使用 SQL 的地方，使用 <code>prepared statement</code></li>\n<li>最小权限原则\n<ul>\n<li>不要随便用 <code>sudo</code>  或者 <code>root</code>  执行命令</li>\n</ul>\n</li>\n<li>建立允许名单 + 过滤\n<ul>\n<li>不允许执行 <code>rm</code>  命令</li>\n</ul>\n</li>\n<li>对 URL 类型参数进行协议 / 域名 /ip 等限制\n<ul>\n<li>不允许访问内网</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"dos-2\"><a class=\"anchor\" href=\"#dos-2\">#</a> DoS</h3>\n<ul>\n<li>做好 Code Review：避免出现 <code>/(ab*)+/</code>  这样的代码</li>\n<li>代码扫描工具 + 正则性能测试</li>\n<li><strong>不允许</strong>使用用户提供的正则</li>\n</ul>\n<h3 id=\"ddos-2\"><a class=\"anchor\" href=\"#ddos-2\">#</a> DDoS</h3>\n<ul>\n<li>流量治理\n<ul>\n<li>负载均衡</li>\n<li>API 网关</li>\n<li>CDN</li>\n</ul>\n</li>\n<li>快速自动扩容</li>\n<li>非核心服务降级</li>\n</ul>\n<h3 id=\"防御中间人\"><a class=\"anchor\" href=\"#防御中间人\">#</a> 防御中间人</h3>\n<ul>\n<li>\n<p>使用 HTTPS：可靠性、完整性、不可抵赖性</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121145153571.png\" alt=\"image-20220121145153571\"></p>\n</li>\n<li>\n<p>HSTS（<em> <code>HTTP Strict-Transport-Security</code> </em>）：将 HTTP 主动升级到 HTTPS</p>\n</li>\n<li>\n<p>SRI（<em> <code>SubResource Integrity</code> </em>）：对比从 CDN 中拿到的文件 hash 值，例如： <code>&lt;script src=&quot;/example/app.js&quot; integrity=&quot;sha384-&#123;some-hash-value&#125;&quot; crossorigin= &quot;anonymous&quot;&gt;&lt;/script&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "Web安全",
                "笔记补完计划"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/21/WebGL%E5%9F%BA%E7%A1%80-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/21/WebGL%E5%9F%BA%E7%A1%80-%E7%AC%94%E8%AE%B0/",
            "title": "WebGL基础 - 笔记",
            "date_published": "2022-01-21T14:40:47.000Z",
            "content_html": "<blockquote>\n<p>为什么要使用 WebGL/GPU</p>\n<p>怎样使用 WebGL（WebGL 入门第一步）</p>\n<p>更多读物</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"webgl基础-笔记\"><a class=\"anchor\" href=\"#webgl基础-笔记\">#</a> WebGL 基础 - 笔记</h1>\n<h2 id=\"why-webglwhy-gpu\"><a class=\"anchor\" href=\"#why-webglwhy-gpu\">#</a> Why WebGL/Why GPU？</h2>\n<h3 id=\"webgl是什么\"><a class=\"anchor\" href=\"#webgl是什么\">#</a> WebGL 是什么？</h3>\n<ul>\n<li>\n<p>GPU ≠ WebGL ≠ 2D</p>\n</li>\n<li>\n<p>WebGL 是浏览器上的 OpenGL</p>\n</li>\n<li>\n<p>需要一定计算机图形学基础和线性代数基础</p>\n</li>\n</ul>\n<h3 id=\"modern-graphics-system\"><a class=\"anchor\" href=\"#modern-graphics-system\">#</a> Modern Graphics System</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121101001922.png\" alt=\"image-20220121101001922\"></p>\n<p>光栅（Raster）：几乎所有的现代图形系统都是基于光栅来绘制图形的，光栅就是指构成图像的像素阵列。</p>\n<p>像素（Pixel）：一个像素对应图像上的一个点，它通常保存图像上的某个具体位置的颜色等信息。</p>\n<p>帧缓存（Frame Buffer）：在绘图过程中，像素信息被存放于帧缓存中，帧缓存是一块内存地址。</p>\n<p>CPU（Central Processing Unit）：中央处理单元，负责逻辑计算。</p>\n<p>GPU（Graphics Processing Unit）：图形处理单元，负责图形计算。</p>\n<p>一般来说，在图形绘制时，有以下步骤：</p>\n<ol>\n<li>\n<p>轮廓提取 /meshing</p>\n</li>\n<li>\n<p>光栅化</p>\n</li>\n<li>\n<p>帧缓存</p>\n</li>\n<li>\n<p>渲染</p>\n</li>\n</ol>\n<h3 id=\"cpu-vs-gpu\"><a class=\"anchor\" href=\"#cpu-vs-gpu\">#</a> CPU vs GPU</h3>\n<p>CPU 的优势在于：CPU 能够处理大计算量的任务，但是 CPU 的并行处理有上限</p>\n<p>GPU 的优势在于：GPU 的计算量处理能力不大，但是 GPU 中的所有计算都可以并行处理</p>\n<p>因为图形渲染的像素处理数量一般都是非常大的，但是每个像素的计算量却不大，所以 GPU 处理图形渲染就非常有优势</p>\n<h2 id=\"webgl-startup\"><a class=\"anchor\" href=\"#webgl-startup\">#</a> WebGL Startup</h2>\n<ol>\n<li>\n<p>创建 WebGL 上下文</p>\n</li>\n<li>\n<p>创建 WebGL Program</p>\n</li>\n<li>\n<p>将数据存入缓冲区</p>\n</li>\n<li>\n<p>将缓冲区数据读取到 GPU</p>\n</li>\n<li>\n<p>GPU 执行 WebGL 程序，输出结果</p>\n</li>\n</ol>\n<h3 id=\"shaders着色器\"><a class=\"anchor\" href=\"#shaders着色器\">#</a> Shaders（着色器）</h3>\n<p>Vertex Shader</p>\n<figure class=\"highlight glsl\"><figcaption data-lang=\"GLSL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">attribute</span> <span class=\"token keyword\">vec2</span> position<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    gl_Pointsize <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 设置像素点大小为 1.0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    gl_Position <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>position，<span class=\"token number\">1.0</span>，<span class=\"token number\">1.0</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Fragment Shader</p>\n<figure class=\"highlight glsl\"><figcaption data-lang=\"GLSL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">precision</span> <span class=\"token keyword\">mediump</span> <span class=\"token keyword\">float</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 每个像素都被并行执行这段代码，设置了像素的颜色</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    gl_Fragcolor <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span>，<span class=\"token number\">0.0</span>，<span class=\"token number\">0.0</span>，<span class=\"token number\">1.0</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>着色器内可以执行向量运算，并且定义的变量可以共享：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121104127381.png\" alt=\"image-20220121104127381\"></p>\n<h3 id=\"create-program\"><a class=\"anchor\" href=\"#create-program\">#</a> Create Program</h3>\n<p>webgl 是一个很底层的 API，所以创建 webgl 程序也是个比较复杂的过程，类似编译器的工作需要自己写</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> gl <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webgl'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> vertexShader <span class=\"token operator\">=</span> gl<span class=\"token punctuation\">.</span><span class=\"token function\">createShader</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">VERTEX_SHADER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">shaderSource</span><span class=\"token punctuation\">(</span>vertexShader<span class=\"token punctuation\">,</span> vertex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">compileShader</span><span class=\"token punctuation\">(</span>vertexShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> fragmentShader <span class=\"token operator\">=</span> gl<span class=\"token punctuation\">.</span><span class=\"token function\">createShader</span><span class=\"token punctuation\">(</span> gl<span class=\"token punctuation\">.</span><span class=\"token constant\">FRAGMENT_SHADER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">shaderSource</span><span class=\"token punctuation\">(</span>fragmentShader<span class=\"token punctuation\">,</span> fragment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">compileShader</span><span class=\"token punctuation\">(</span>fragmentShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">const</span> program <span class=\"token operator\">=</span> gl<span class=\"token punctuation\">.</span><span class=\"token function\">createProgram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">attachShader</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">,</span> vertexShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">attachShader</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">,</span> fragmentShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">linkProgram</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">useProgram</span><span class=\"token punctuation\">(</span>program<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"data-to-frame-buffer\"><a class=\"anchor\" href=\"#data-to-frame-buffer\">#</a> Data to Frame Buffer</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121103211058.png\" alt=\"image-20220121103211058\"></p>\n<p>如何创建一个三角形？</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> points <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Float32Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 坐标 (-1, -1)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// 坐标 (0, 1)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 坐标 (1, -1)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"frame-buffer-to-gpu\"><a class=\"anchor\" href=\"#frame-buffer-to-gpu\">#</a> Frame Buffer to GPU</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121103453798.png\" alt=\"image-20220121103453798\"></p>\n<h3 id=\"output\"><a class=\"anchor\" href=\"#output\">#</a> Output</h3>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">COLOR_BUFFER_BIT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>gl<span class=\"token punctuation\">.</span><span class=\"token function\">drawArrays</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">.</span><span class=\"token constant\">TRIANGLES</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"webgl的封装库meshjs\"><a class=\"anchor\" href=\"#webgl的封装库meshjs\">#</a> WebGL 的封装库 —Mesh.js</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121104552327.png\" alt=\"image-20220121104552327\"></p>\n<h3 id=\"polygons\"><a class=\"anchor\" href=\"#polygons\">#</a> Polygons</h3>\n<p>如何绘制一个多边形？</p>\n<ul>\n<li>三角剖分</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121104708110.png\" alt=\"image-20220121104708110\"></p>\n<p>可以使用<strong> Earcut</strong> 库进行三角剖分</p>\n<h3 id=\"3d-meshing\"><a class=\"anchor\" href=\"#3d-meshing\">#</a> 3D Meshing</h3>\n<p>一般来说，3D 的模型是在设计软件里先设计好再导出，而不是像 2D 一样实时计算</p>\n<h3 id=\"transform\"><a class=\"anchor\" href=\"#transform\">#</a> Transform</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121105114995.png\" alt=\"image-20220121105114995\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220121105325055.png\" alt=\"image-20220121105325055\"></p>\n<h3 id=\"3d-matrix\"><a class=\"anchor\" href=\"#3d-matrix\">#</a> 3D Matrix</h3>\n<p>3D 标准模型的四个齐次矩阵（mat4）</p>\n<ol>\n<li>\n<p>投影矩阵 Projection Matrix</p>\n</li>\n<li>\n<p>模型矩阵 Model Matrix</p>\n</li>\n<li>\n<p>视图矩阵 View Matrix</p>\n</li>\n<li>\n<p>法向量矩阵 Normal Matrix</p>\n</li>\n</ol>\n<h2 id=\"read-more\"><a class=\"anchor\" href=\"#read-more\">#</a> Read More</h2>\n<ol>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly90aGVib29rb2ZzaGFkZXJzLmNvbS8=\">The book of shaders</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NyY24vbWVzaC5qcw==\">Mesh.js</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb29kbGUud2ViZ2wuZ3JvdXAv\">glsl-doodle</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3Nwcml0ZWpzLmNvbS8=\">SpriteJS</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly90aHJlZWpzLm9yZy8=\">ThreeJS</span></p>\n</li>\n<li>\n<p><a href=\"shadertoy.com\">shadertoy.com</a></p>\n</li>\n</ol>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "WebGL"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/20/Node-js-%E4%B8%8E%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/20/Node-js-%E4%B8%8E%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98-%E7%AC%94%E8%AE%B0/",
            "title": "Node.js 与开发实战 - 笔记",
            "date_published": "2022-01-20T10:59:40.000Z",
            "content_html": "<blockquote>\n<p>Why：为什么要学 Node.js - Node.js 的应用场景</p>\n<p>What：Node.js 是什么 - Node.js 运行时结构</p>\n<p>How：怎样编写 Node.js 代码 - Http Server</p>\n<p>延伸话题：贡献 Node.js 代码、编译 Node.js、诊断 / 追踪、WASM，NAPI</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"nodejs-与开发开发实战-笔记\"><a class=\"anchor\" href=\"#nodejs-与开发开发实战-笔记\">#</a> Node.js 与开发开发实战 - 笔记</h1>\n<h2 id=\"nodejs-的应用场景-why\"><a class=\"anchor\" href=\"#nodejs-的应用场景-why\">#</a> Node.js 的应用场景 - Why</h2>\n<ol>\n<li>\n<p><strong>前端工程化</strong>：</p>\n<ul>\n<li>Bundle：webpack, vite, esbuild, parcel</li>\n<li>Uglify：uglifyjs</li>\n<li>Transpile：bablejs, typescript</li>\n<li>其他语言加入竞争：esbuild（go）, parcel（rust）, prisma</li>\n<li>现状：难以替代</li>\n</ul>\n</li>\n<li>\n<p>Web<strong> 服务端应用</strong>：</p>\n<ul>\n<li>学习曲线平缓，开发效率较高</li>\n<li>运行效率接近常见的编译语言</li>\n<li>社区生态丰富及工具链成熟 (npm, V8 inspector)</li>\n<li>与前端结合的场景会有优势 (SSR 服务端渲染)</li>\n<li>现状：竞争激烈，Node.js 有自己独特的优势</li>\n</ul>\n</li>\n<li>\n<p>Electron<strong> 跨端桌面应用</strong>：</p>\n<ul>\n<li>商业应用：vscode, slack, discord, zoom</li>\n<li>大型公司内的效率工具</li>\n<li>现状：大部分场景在选型时，都值得考虑</li>\n</ul>\n</li>\n<li>\n<p><strong>字节跳动内部应用</strong>：</p>\n<ul>\n<li>BFF 应用、SSR 应用，举例：Modern.js</li>\n<li>服务端应用，例如：头条搜索，西瓜视频，懂车帝</li>\n<li>Electron 应用：飞连，飞书</li>\n<li>每年新增 1000+ Node.js 应用</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"nodejs-运行时结构-what\"><a class=\"anchor\" href=\"#nodejs-运行时结构-what\">#</a> Node.js 运行时结构 - What</h2>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120142324582.png\" alt=\"image-20220120142324582\"></p>\n<p>结构：</p>\n<ul>\n<li>\n<p>V8：JavaScript Runtime，诊断调试工具 (inspector)</p>\n</li>\n<li>\n<p>libuv：eventloop (事件循环)， syscall (系统调用)</p>\n</li>\n<li>\n<p>举例：用 node-fetch 发起请求时…</p>\n</li>\n</ul>\n<p>特点：</p>\n<ul>\n<li>\n<p>异步 I/O：</p>\n<p>当 Node.js 执行 I/O 操作时，会在响应返回后恢复操作，而不是阻塞线程并占用额外内存等待</p>\n</li>\n<li>\n<p>单线程：</p>\n<ul>\n<li>\n<p>JS 单线程</p>\n<p>实际：JS 线程 + uv 线程池 + V8 任务线程池 + V8 Inspector 线程</p>\n</li>\n<li>\n<p><strong>优点</strong>：不用考虑多线程状态同步问题，也就不需要锁；同时还能比较高效地利用系统资源</p>\n</li>\n<li>\n<p><strong>缺点</strong>：阻塞会产生更多负面影响</p>\n<p>解决办法：多进程或多线程</p>\n</li>\n</ul>\n</li>\n<li>\n<p>跨平台：</p>\n<ul>\n<li>\n<p>跨平台 (大部分功能、api)</p>\n</li>\n<li>\n<p>Node.js 跨平台 + JS 无需编译环境 (+ Web 跨平台 + 诊断工具跨平台)</p>\n<p>= 开发成本低 (大部分场景无需担心跨平台问题)，整体学习成本低</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"编写-http-server-how\"><a class=\"anchor\" href=\"#编写-http-server-how\">#</a> 编写 Http Server - How</h2>\n<h3 id=\"安装nodejs\"><a class=\"anchor\" href=\"#安装nodejs\">#</a> 安装 Node.js</h3>\n<ul>\n<li>\n<p>Mac,Linux 推荐使用 <code>nvm</code> 。多版本管理。</p>\n</li>\n<li>\n<p>Windows 推荐  <code>nvm4w</code>  或是官方安装包。</p>\n</li>\n<li>\n<p>安装慢，安装失败的情况，设置安装源</p>\n<p><code>NVM_NODEJS_ORG_MRROR=https://npmmirror.com/mirrors/node nvm install 16</code></p>\n</li>\n</ul>\n<h3 id=\"基础http-server\"><a class=\"anchor\" href=\"#基础http-server\">#</a> 基础 Http Server</h3>\n<p>返回 JSON 的 Server 示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">const</span> bufs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> bufs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// bufs</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>bufs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">let</span> ret<span class=\"token punctuation\">,</span> msg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            ret <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            msg <span class=\"token operator\">=</span> ret<span class=\"token punctuation\">.</span>msg <span class=\"token operator\">||</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            msg <span class=\"token operator\">=</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">const</span> responseJson <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            msg<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">receive: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>msg<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>responseJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'listening on port: '</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"静态文件服务\"><a class=\"anchor\" href=\"#静态文件服务\">#</a> 静态文件服务</h3>\n<p>简单的静态文件服务：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'url'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> folderPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./static'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">const</span> info <span class=\"token operator\">=</span> url<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">const</span> filepath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">,</span> <span class=\"token string\">'./'</span><span class=\"token operator\">+</span> info<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">const</span> filestream <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span>filepath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    filestream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'listening on port: '</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>与高性能、可靠的服务相比，还差什么？</p>\n<ol>\n<li>CDN：缓存＋加速</li>\n<li>分布式储存，容灾</li>\n</ol>\n<h3 id=\"react-ssr\"><a class=\"anchor\" href=\"#react-ssr\">#</a> React SSR</h3>\n<p>SSR (server side rendering) 有什么特点？</p>\n<ul>\n<li>相比传统 HTML 模版引擎：避免重复编写代码</li>\n<li>相比 SPA (single page application)：首屏渲染更快，SEO 友好</li>\n<li>缺点：通常 qps 较低，前端代码编写时需要考虑服务端渲染情况</li>\n</ul>\n<p>SSR 难点：</p>\n<ol>\n<li>\n<p>需要处理打包代码</p>\n</li>\n<li>\n<p>需要思考前端代码在服务端运行时的逻辑</p>\n</li>\n<li>\n<p>移除对服务端无意义的副作用，或重置环境</p>\n</li>\n</ol>\n<h3 id=\"debug\"><a class=\"anchor\" href=\"#debug\">#</a> Debug</h3>\n<p>V8 Inspector：开箱即用、特性丰富强大、与前端开发一致、跨平台</p>\n<ul>\n<li>node --inspect</li>\n<li>open <span class=\"exturl\" data-url=\"aHR0cDovL2xvY2FsaG9zdDo5MjI5L2pzb24=\">http://localhost:9229/json</span></li>\n</ul>\n<p>场景：</p>\n<ul>\n<li>查看 console.log 内容.</li>\n<li>breakpoint</li>\n<li>高 CPU、死循环：cpuprofile</li>\n<li>高内存占用：heapsnapshot</li>\n<li>性能分析</li>\n</ul>\n<h3 id=\"部署\"><a class=\"anchor\" href=\"#部署\">#</a> 部署</h3>\n<p>部署要解决的问题：</p>\n<ul>\n<li>守护进程：当进程退出时，重新拉起</li>\n<li>多进程：cluster 便捷地利用多进程</li>\n<li>记录进程状态，用于诊断</li>\n</ul>\n<p>容器环境：</p>\n<ul>\n<li>通常有健康检查的手段，只需考虑多核 cpu 利用率即可</li>\n</ul>\n<h2 id=\"延伸话题\"><a class=\"anchor\" href=\"#延伸话题\">#</a> 延伸话题</h2>\n<h3 id=\"贡献-nodejs-代码\"><a class=\"anchor\" href=\"#贡献-nodejs-代码\">#</a> 贡献 Node.js 代码</h3>\n<p>快速了解 Node.js 代码：</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2pveWVlY2hldW5nL3RhbGtzL2Jsb2IvbWFzdGVyL2NvZGVfYW5kX2xlYXJuXzIwMTlfYmVpamluZy9jb250cmlidXRpbmctdG8tbm9kZS1jb3JlLnBkZg==\">Node.js Core 贡献入门</span></li>\n</ul>\n<p>好处：</p>\n<ul>\n<li>从使用者的角色逐步理解底层细节，可以解决更复杂的问题；</li>\n<li>自我证明，有助于职业发展；</li>\n<li>解决社区问题，促进社区发展；</li>\n</ul>\n<p>难点：</p>\n<ul>\n<li>花时间</li>\n</ul>\n<h3 id=\"编译nodejs\"><a class=\"anchor\" href=\"#编译nodejs\">#</a> 编译 Node.js</h3>\n<p>为什么要学习编译 Node.js：</p>\n<ul>\n<li>认知：黑盒到白盒，发生问题时能有迹可循</li>\n</ul>\n<p>贡献代码的第一步：</p>\n<ul>\n<li>\n<p>如何编译</p>\n</li>\n<li>\n<p>参考：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvbWFzdGVyL2RvYy9jb250cmlidXRpbmcvbWFpbnRhaW5pbmctdGhlLWJ1aWxkLWZpbGVzLm1k\">Maintaining the build files</span></p>\n</li>\n<li>\n<p>./configure &amp;&amp; make install</p>\n</li>\n<li>\n<p>演示：给 net 模块添加自定义属性</p>\n</li>\n</ul>\n<h3 id=\"诊断追踪\"><a class=\"anchor\" href=\"#诊断追踪\">#</a> 诊断 / 追踪</h3>\n<ul>\n<li>\n<p>诊断是一个低频、重要同时也相当有挑战的方向。是企业衡量自己能否依赖一门语言的重要参考。</p>\n</li>\n<li>\n<p>技术咨询行业中的热门角色。</p>\n</li>\n<li>\n<p>难点：</p>\n<ul>\n<li>\n<p>需要了解 Node.js 底层，需要了解操作系统以及各种工具</p>\n</li>\n<li>\n<p>需要经验</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"wasmnapi\"><a class=\"anchor\" href=\"#wasmnapi\">#</a> WASM，NAPI</h3>\n<p>Node.js （因为 V8）是执行 WASM 代码的天然容器，和浏览器 WASM 是同一运行时，同时 Node.js 支持 WASI。</p>\n<p>NAPI 执行 C 接口的代码 (C/C++/Rust…)，同时能保留原生代码的性能。</p>\n<p>不同编程语言间通信的一种方案。</p>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2pveWVlY2hldW5nL3RhbGtzL2Jsb2IvbWFzdGVyL2NvZGVfYW5kX2xlYXJuXzIwMTlfYmVpamluZy9jb250cmlidXRpbmctdG8tbm9kZS1jb3JlLnBkZg==\">Node.js Core 贡献入门</span></li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "Node.js"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/20/HTTP%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/20/HTTP%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97-%E7%AC%94%E8%AE%B0/",
            "title": "HTTP实用指南 - 笔记",
            "date_published": "2022-01-20T10:51:19.000Z",
            "content_html": "<blockquote>\n<p>初识 HTTP：网络通讯模型、HTTP 模型</p>\n<p>协议分析：发展历史、HTTP/1.1 报文分析</p>\n<p>场景分析：静态资源、登录、视频播放、文件上传、跨域</p>\n<p>应用：XHR、Fetch、Node 标准库、Axios、体验优化</p>\n<p>其他协议扩展：WebSocket、QUIC</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"http实用指南-笔记\"><a class=\"anchor\" href=\"#http实用指南-笔记\">#</a> HTTP 实用指南 - 笔记</h1>\n<h2 id=\"初识http\"><a class=\"anchor\" href=\"#初识http\">#</a> 初识 HTTP</h2>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120100347063.png\" alt=\"image-20220120100347063\"></p>\n<h3 id=\"网络通信模型\"><a class=\"anchor\" href=\"#网络通信模型\">#</a> 网络通信模型</h3>\n<p>网络通信模型如下图所示，HTTP 协议位于模型<strong>顶层</strong></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B.png\" alt=\"网络通信模型示例\" title=\"网络通信模型示例\"></p>\n<h3 id=\"http模型\"><a class=\"anchor\" href=\"#http模型\">#</a> HTTP 模型</h3>\n<p>HTTP(<em> <code>Hyper Text Transfer Protocol</code> </em>) 模型如下图所示，是一个应用层（见上图）的协议，基于 TCP 协议，它有如下特点：</p>\n<ul>\n<li>支持多种文件格式的传输</li>\n<li>请求 ↔ 响应 （一个请求对应一个响应）</li>\n<li>简单可扩展（除了 HTTP 标准定义的 HTTP 头外，可由客户端和服务器自行协定新的 HTTP 头）</li>\n<li>无状态</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/HTTP%E6%A8%A1%E5%9E%8B.png\" alt=\"HTTP模型示例\" title=\"HTTP模型示例\"></p>\n<h2 id=\"协议分析\"><a class=\"anchor\" href=\"#协议分析\">#</a> 协议分析</h2>\n<h3 id=\"http协议发展历史\"><a class=\"anchor\" href=\"#http协议发展历史\">#</a> HTTP 协议发展历史</h3>\n<table>\n<thead>\n<tr>\n<th>协议版本</th>\n<th>简介</th>\n<th>内容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>HTTP/0.9</strong></td>\n<td>单行协议</td>\n<td>请求只有 GET，响应只有 HTML 文档</td>\n</tr>\n<tr>\n<td><strong>HTTP/1.0</strong></td>\n<td>构建可扩展性</td>\n<td>增加了 Header，有了状态码，开始支持多种文档类型</td>\n</tr>\n<tr>\n<td><strong>HTTP/1.1</strong></td>\n<td>标准化协议</td>\n<td>链接复用，缓存，内容协商</td>\n</tr>\n<tr>\n<td><strong>HTTP/2</strong></td>\n<td>更优异的表现</td>\n<td>二进制协议，压缩 Header，服务器推送</td>\n</tr>\n<tr>\n<td><strong>HTTP/3</strong></td>\n<td>草案</td>\n<td>未来的协议</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"报文分析http11\"><a class=\"anchor\" href=\"#报文分析http11\">#</a> 报文分析（HTTP/1.1）</h3>\n<ul>\n<li>请求报文：\n<ol>\n<li>起始行（格式：请求方法 请求资源路径 HTTP 版本）</li>\n<li>请求头</li>\n<li>空行</li>\n<li>请求正文</li>\n</ol>\n</li>\n<li>响应报文：\n<ol>\n<li>起始行（格式：HTTP 版本 状态码 状态信息）</li>\n<li>响应头</li>\n<li>空行</li>\n<li>响应正文</li>\n</ol>\n</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/HTTP%E8%AF%B7%E6%B1%82&amp;%E5%93%8D%E5%BA%94.png\" alt=\"HTTP请求&amp;响应示例\" title=\"HTTP请求&amp;响应示例\"></p>\n<h4 id=\"http-method\"><a class=\"anchor\" href=\"#http-method\">#</a> HTTP Method</h4>\n<ul>\n<li><code>GET</code>  - 请求一个指定资源的表示形式，使用 GET 的请求应该<strong>只</strong>被用于获取数据</li>\n<li><code>POST</code>  - 用于将实体提交到指定的资源，通常导致在服务器上的状态变化或副作用</li>\n<li><code>PUT</code>  - 用请求有效载荷替换目标资源的所有当前表示</li>\n<li><code>DELETE</code>  - 删除指定的资源</li>\n<li><code>HEAD</code>  - 请求一个<strong>与 GET 请求的响应相同</strong>的响应，但没有响应体</li>\n<li><code>CONNECT</code>  - 建立一个到<strong>由目标资源标识</strong>的服务器的隧道</li>\n<li><code>OPTIONS</code>  - 用于描述目标资源的通信选项</li>\n<li><code>TRACE</code>  - 沿着到目标资源的路径执行一个消息环回测试</li>\n<li><code>PATCH</code>  - 用于对资源的<strong>部分修改</strong></li>\n</ul>\n<p>方法分类：</p>\n<ul>\n<li>安全的：（不会修改服务器数据）\n<ul>\n<li>GET HEAD OPTIONS</li>\n</ul>\n</li>\n<li>幂等的：（同样的请求多次执行<strong>效果相同</strong>）\n<ul>\n<li>GET HEAD OPTIONS PUT DELETE</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"状态码\"><a class=\"anchor\" href=\"#状态码\">#</a> 状态码</h4>\n<p>大类划分：</p>\n<ul>\n<li><code>1xx</code>  - 指示信息，表示信息已接受，继续处理</li>\n<li><code>2xx</code>  - 成功，表示请求已被成功接收 / 理解 / 接受</li>\n<li><code>3xx</code>  - 重定向，要完成请求必须进行更进一步的操作</li>\n<li><code>4xx</code>  - 客户端错误，请求有语法错误或请求无法实现</li>\n<li><code>5xx</code>  - 服务器端错误，服务器未能实现合法的请求</li>\n</ul>\n<p>常见状态码：</p>\n<ul>\n<li><code>200</code>  OK - 客户端请求成功</li>\n<li><code>301</code>  - 资源（网页等）被永久转移到其他 URL</li>\n<li><code>302</code>  - 临时跳转</li>\n<li><code>401</code>  Unauthorized - 请求未经授权</li>\n<li><code>404</code>  Not Found - 请求资源不存在，可能是输入了错误的 URL</li>\n<li><code>500</code>  - 服务器内部发生了不可预期的错误</li>\n<li><code>504</code>  Gateway Timeout - 网关或者代理的服务器无法在规定的时间内获得想要的响应</li>\n</ul>\n<h4 id=\"restful-api\"><a class=\"anchor\" href=\"#restful-api\">#</a> RESTful API</h4>\n<p>一种 API 设计风格；REST (<em> <code>Representation State Transfer</code> </em>) 有以下特点：</p>\n<ul>\n<li>每一个 URI 代表一种资源</li>\n<li>客户端和服务器之间，传递这种资源的某种表现层</li>\n<li>客户端通过 HTTP Method，对服务器资源进行操作，实现 “表现层状态转化”</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/RESTful%20API%E7%A4%BA%E4%BE%8B.png\" alt=\"例子\" title=\"例子\"></p>\n<h4 id=\"常用请求头\"><a class=\"anchor\" href=\"#常用请求头\">#</a> 常用请求头</h4>\n<ul>\n<li>Accept\n<ul>\n<li>接收类型，表示浏览器<strong>支持的 MIME 类型</strong> （对标服务端返回的 Content-Type）</li>\n</ul>\n</li>\n<li>Content-Type\n<ul>\n<li>客户端发送出去实体内容的类型</li>\n</ul>\n</li>\n<li>Cache-Control\n<ul>\n<li>指定请求和响应遵循的缓存机制，如 no-cache</li>\n</ul>\n</li>\n<li>If-Modified-Since\n<ul>\n<li>对应服务端的 Last-Modified，用来匹配看文件是否变动，<strong>只能精确到 1s 之内</strong></li>\n</ul>\n</li>\n<li>Expires\n<ul>\n<li>缓存控制，在这个时间内不会请求，直接使用缓存，服务端时间</li>\n</ul>\n</li>\n<li>Max-age\n<ul>\n<li>代表资源在本地缓存多少秒，有效时间内不会请求，而是使用缓存</li>\n</ul>\n</li>\n<li>If-None-Match\n<ul>\n<li>对应服务端的 ETag，用来匹配文件内容是否改变（非常精确）</li>\n</ul>\n</li>\n<li>Cookie\n<ul>\n<li>有 cookie 并且<strong>同域</strong>访问时会自动带上</li>\n</ul>\n</li>\n<li>Referer\n<ul>\n<li>该页面的来源 URL（适用于所有类型的请求，会精确到详细页面地址，CSRF 拦截常用到这个字段）</li>\n</ul>\n</li>\n<li>Origin\n<ul>\n<li>最初的请求是从哪里发起的（只会精确到端口）,Origin 比 Referer 更尊重隐私</li>\n</ul>\n</li>\n<li>User-Agent\n<ul>\n<li>用户客户端（<strong>浏览器标识</strong>）的一些必要信息，如 UA 头部等</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"常用响应头\"><a class=\"anchor\" href=\"#常用响应头\">#</a> 常用响应头</h4>\n<ul>\n<li>Content-Type\n<ul>\n<li>服务端返回的实体内容的类型</li>\n</ul>\n</li>\n<li>Cache-Control\n<ul>\n<li>指定请求和响应遵循的缓存机制，如 no-cache</li>\n</ul>\n</li>\n<li>Last-Modified\n<ul>\n<li>请求资源的最后修改时间</li>\n</ul>\n</li>\n<li>Expires\n<ul>\n<li>应该在什么时候认为文档已经过期，从而不再缓存它</li>\n</ul>\n</li>\n<li>Max-age\n<ul>\n<li>客户端的本地资源应该缓存多少秒，开启了 Cache-Control 后有效</li>\n</ul>\n</li>\n<li>ETag\n<ul>\n<li>资源的特定版本的标识符，ETags 类似于指纹</li>\n</ul>\n</li>\n<li>Set-Cookie\n<ul>\n<li>设置和页面关联的 cookie，服务器通过这个头部把 cookie 传给客户端</li>\n</ul>\n</li>\n<li>Server\n<ul>\n<li>服务器的一些相关信息</li>\n</ul>\n</li>\n<li>Access-Control-Allow-Origin\n<ul>\n<li>服务器端允许的请求 Origin 头部（譬如为 *）</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"缓存控制\"><a class=\"anchor\" href=\"#缓存控制\">#</a> 缓存控制</h4>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%B1%BB%E5%9E%8B.png\" alt=\"浏览器缓存类型示例\" title=\"浏览器缓存类型示例\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E6%8E%A7%E5%88%B6.png\" alt=\"浏览器缓存控制示例\" title=\"浏览器缓存控制示例\"></p>\n<h4 id=\"cookie\"><a class=\"anchor\" href=\"#cookie\">#</a> Cookie</h4>\n<p>Cookie 是呈键值对出现的，具体键值信息如下：</p>\n<ul>\n<li>Name=value\n<ul>\n<li>各种 cookie 的名称和值</li>\n</ul>\n</li>\n<li>Expires=Date\n<ul>\n<li>Cookie 的有效期，缺省时 Cookie 仅在浏览器关闭之前有效。</li>\n</ul>\n</li>\n<li>Path=Path\n<ul>\n<li>限制指定 Cookie 的发送范围的文件目录，默认为当前</li>\n</ul>\n</li>\n<li>Domain=domain\n<ul>\n<li>限制 cookie 生效的域名，默认为创建 cookie 的服务域名</li>\n</ul>\n</li>\n<li>secure\n<ul>\n<li>仅在 HTTPS 安全连接时，才可以发送 Cookie</li>\n</ul>\n</li>\n<li>HttpOnly\n<ul>\n<li>JavaScript 脚本无法获得 Cookie</li>\n</ul>\n</li>\n<li>SameSite=[None|Strict|Lax]\n<ul>\n<li>None 同站、跨站请求都可发送</li>\n<li>Strict 仅在同站发送</li>\n<li>允许与顶级导航一起发送，并将与第三方网站发起的 GET 请求一起发</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"http2\"><a class=\"anchor\" href=\"#http2\">#</a> HTTP/2</h3>\n<p><strong>更快</strong>、<strong>更稳定</strong>、<strong>更简单</strong></p>\n<ul>\n<li>帧（frame）：HTTP/2 通信的最小单位，每个帧都包含帧头，至少也会标识出当前帧所属的数据流</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120103657456.png\" alt=\"image-20220120103657456\"></p>\n<ul>\n<li>\n<p>消息：与逻辑请求或响应消息对应的完整的一系列帧</p>\n</li>\n<li>\n<p>数据流：已建立的连接内的双向字节流，可以承载―条或多条消息</p>\n</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120103838622.png\" alt=\"image-20220120103838622\"></p>\n<ul>\n<li>\n<p>HTTP/2 连接都是永久的，而且仅需要每个来源一个连接</p>\n</li>\n<li>\n<p>流控制：阻止发送方向接收方发送大量数据的机制</p>\n</li>\n<li>\n<p>服务器推送</p>\n</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120104057173.png\" alt=\"image-20220120104057173\"></p>\n<h3 id=\"https\"><a class=\"anchor\" href=\"#https\">#</a> HTTPS</h3>\n<p>HTTPS 建立在 HTTP 之上，在 HTTP 与 TCP/IP 中间插了一层 SSL/TLS（加密层），其特点如下：</p>\n<ul>\n<li>经过 SSL/TLS 加密</li>\n<li>对称加密与非对称加密结合\n<ul>\n<li>随机 key 使用非对称加密传输</li>\n<li>报文内容使用对称加密传输（随机 key）</li>\n</ul>\n</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/HTTPS%E6%B5%81%E7%A8%8B.png\" alt=\"HTTPS流程示例\" title=\"HTTPS流程示例\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120104610923.png\" alt=\"image-20220120104610923\"></p>\n<h2 id=\"场景分析\"><a class=\"anchor\" href=\"#场景分析\">#</a> 场景分析</h2>\n<h3 id=\"静态资源\"><a class=\"anchor\" href=\"#静态资源\">#</a> 静态资源</h3>\n<p>静态资源解决方案：<br>\n缓存 + CDN (<em> <code>Content Delivery Network</code> </em>) + 文件名 hash</p>\n<p>通过用户就近性和服务器负载的判断，CDN 确保内容以一种极为高效的方式为用户的请求提供服务</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/CDN%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86.png\" alt=\"CDN简单原理示例\" title=\"CDN简单原理示例\"></p>\n<h3 id=\"登录\"><a class=\"anchor\" href=\"#登录\">#</a> 登录</h3>\n<p>网站记住登录态主要靠两种方式来鉴权：</p>\n<ol>\n<li>Session + Cookie</li>\n<li>JWT(<em> <code>JSON web token</code> </em>)</li>\n</ol>\n<div style=\"display: flex\">\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/Session+cookie%E6%B5%81%E7%A8%8B.png\" alt=\"Session+cookie流程示例\" title=\"Session+cookie流程示例\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/JWT%E6%B5%81%E7%A8%8B.png\" alt=\"JWT流程示例\" title=\"JWT流程示例\"></p>\n</div>\n<ol start=\"3\">\n<li>SSO（Single Sign On）：单点登录</li>\n</ol>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220120112838615.png\" alt=\"image-20220120112838615\"></p>\n<h3 id=\"视频播放\"><a class=\"anchor\" href=\"#视频播放\">#</a> 视频播放</h3>\n<p>视频播放的 Response 状态码一般为 <code>206 Partial Content</code> ，意为返回部分资源，资源的长度由 Range 和 Content-range 字段决定，类型由 Content-type 决定</p>\n<p>视频直播协议有：</p>\n<table>\n<thead>\n<tr>\n<th>协议</th>\n<th>描述</th>\n<th>优点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HLS</td>\n<td><i> <code>HTTP Live Streaming</code> </i>，Apple 公司<br>基于 HTTP 协议<br>把一段视频流，分成一个个小的基于 HTTP 的文件来下载</td>\n<td>跨平台</td>\n</tr>\n<tr>\n<td>RTMP</td>\n<td><i> <code>Real Time Messaging Protocol</code> </i>，Adobe 公司<br>基于 TCP</td>\n<td>时延低</td>\n</tr>\n<tr>\n<td>HTTP-FLV</td>\n<td>基于 HTTP<br>http+flv，将音视频数据封装成 FLV 格式，然后通过 HTTP 协议传输给客户端</td>\n<td>时延低</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"文件上传\"><a class=\"anchor\" href=\"#文件上传\">#</a> 文件上传</h3>\n<p>小文件直传，大文件分片上传，在服务器整合</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B.png\" alt=\"文件上传流程\" title=\"文件上传流程\"></p>\n<h3 id=\"跨域解决方案\"><a class=\"anchor\" href=\"#跨域解决方案\">#</a> 跨域解决方案</h3>\n<ul>\n<li>\n<p>CORS</p>\n<ul>\n<li>Access-Control-Allow-Origin</li>\n<li>Access-Control-Expose-Headers</li>\n<li>Access-Control-Max-Age</li>\n<li>Access-Control-Allow-Credentials</li>\n<li>Access-Control-Allow-Methods</li>\n<li>Access-Control-Allow-Headers</li>\n<li>Access-Control-Request-Method</li>\n<li>Access-Control-Request-Headers</li>\n<li>Origin</li>\n</ul>\n</li>\n<li>\n<p>代理服务器</p>\n<ul>\n<li>同源策略是浏览器的安全策略，不是 HTTP 的</li>\n</ul>\n</li>\n<li>\n<p>Iframe</p>\n<ul>\n<li>不方便，现在几乎没有人用</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"应用\"><a class=\"anchor\" href=\"#应用\">#</a> 应用</h2>\n<h3 id=\"ajaxxhr\"><a class=\"anchor\" href=\"#ajaxxhr\">#</a> AJAX：XHR</h3>\n<ul>\n<li>XMLHttpRequest</li>\n<li>readyState</li>\n<li>容易造成回调地狱</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>readyState</th>\n<th>状态名</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>UNSENT</td>\n<td>代理被创建，但尚未调用 open () 方法。</td>\n</tr>\n<tr>\n<td>1</td>\n<td>OPENED</td>\n<td>open () 方法已经被调用。</td>\n</tr>\n<tr>\n<td>2</td>\n<td>HEADERS_ RECEIVED</td>\n<td>send () 方法已经被调用，并且头部和状态已经可获得。</td>\n</tr>\n<tr>\n<td>3</td>\n<td>LOADING</td>\n<td>下载中；responseText 属性已经包含部分数据。</td>\n</tr>\n<tr>\n<td>4</td>\n<td>DONE</td>\n<td>下载操作已完成。</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>XHR示例 >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">//open 后面有三个参数：</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 规定请求的类型、URL 以及是否异步处理请求。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">//method：请求的类型；GET 或 POST</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">//url：文件在服务器上的位置</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">//async：true（异步）或 false（同步） 默认为 true</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/getUser?id=xxx'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// 发送请求到后端（服务器）</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// 当请求被发送到服务器时，我们需要执行一些基于响应的任务。</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 每当 readyState 改变时，就会触发 onreadystatechange 事件。</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">//readyState 属性存有 XMLHttpRequest 的状态信息。</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">// 在 xhr 的准备状态发生改变的时候，调用该方法</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\">//post 请求方式，接口后面不能追加参数</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/login'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token comment\">// 如果使用 post 请求方式， 而且是以 key=value 这种形式提交的</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\">// 那么需要设置请求头的类型</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'username=admin&amp;password=123456'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"ajaxfetch\"><a class=\"anchor\" href=\"#ajaxfetch\">#</a> AJAX：Fetch</h3>\n<ul>\n<li>XMLHttpRequest 的升级版</li>\n<li>使用 Promise</li>\n<li>模块化设计，Response/Request/Header 对象</li>\n<li>通过数据流处理对象，支持分块读取</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>Fetch示例 >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">postData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\">// 默认的配置选项用 * 标出</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    body<span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 必须与 'Content-Type' 头匹配</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    cache<span class=\"token operator\">:</span> <span class=\"token string\">'no-cache'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// *default, no-cache, reload, force-cache, only-if-cached</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    credentials<span class=\"token operator\">:</span> <span class=\"token string\">'same-origin'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// include, same-origin, *omit</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token string\">'user-agent'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Mozilla/4.0 MDN Example'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token string\">'content-type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// *GET, POST, PUT, DELETE, etc.</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    mode<span class=\"token operator\">:</span> <span class=\"token string\">'cors'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// no-cors, cors, *same-origin</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    redirect<span class=\"token operator\">:</span> <span class=\"token string\">'follow'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// manual, *follow, error</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    referrer<span class=\"token operator\">:</span> <span class=\"token string\">'no-referrer'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// *client, no-referrer</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//.json () 方法将响应转换为 JSON</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">postData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://example.com/answer'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>answer<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//data 为 `response.json ()` 返回的 JSON</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"node标准库httphttps\"><a class=\"anchor\" href=\"#node标准库httphttps\">#</a> Node：标准库 HTTP/HTTPS</h3>\n<ul>\n<li>默认模块，无需安装其他依赖</li>\n<li>功能有限 / 不是十分友好</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>HTTP/HTTPS模块示例1 >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>https<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://test.com?api_key=DEMO_KEY'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resp</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// A chunk of data has been received.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    resp<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        data <span class=\"token operator\">+=</span> chunk<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// The whole response has been received. Print out the result.</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    resp<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>explanation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error: \"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight ts\"><figcaption data-lang=\"TypeScript\"><span>HTTP/HTTPS模块示例2 >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> http <span class=\"token keyword\">from</span> <span class=\"token string\">'http'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> https <span class=\"token keyword\">from</span> <span class=\"token string\">'https'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token constant\">URL</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'url'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * 判断 url 是否支持范围请求</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * @param url </pre></td></tr><tr><td data-num=\"8\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">isSupportedRange</span><span class=\"token punctuation\">(</span>url<span class=\"token operator\">:</span> <span class=\"token constant\">URL</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">boolean</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> url <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> url <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">URL</span></span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">const</span> options<span class=\"token operator\">:</span> http<span class=\"token punctuation\">.</span>RequestOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            method<span class=\"token operator\">:</span> <span class=\"token string\">'HEAD'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token string\">'Range'</span><span class=\"token operator\">:</span> <span class=\"token string\">'bytes=0-'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">let</span> req<span class=\"token operator\">:</span> http<span class=\"token punctuation\">.</span>ClientRequest<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 根据 URL 协议，判断使用 http 还是 https 模块发送请求</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">function</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>response<span class=\"token operator\">:</span> http<span class=\"token punctuation\">.</span>IncomingMessage<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token comment\">// console.log(response.statusCode);</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token comment\">// console.log(response.headers);</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\">// 假如在响应中存在 Accept-Ranges 首部（并且它的值不为 “none”），那么表示该服务器支持范围请求。</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">===</span> <span class=\"token number\">206</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">\"accept-ranges\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">\"accept-ranges\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">.</span>protocol<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">case</span> <span class=\"token string\">'http:'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                req <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token keyword\">case</span> <span class=\"token string\">'https:'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">void</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        req<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">:</span> Error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 请求失败</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        req<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// refresh request stream</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"axios\"><a class=\"anchor\" href=\"#axios\">#</a> Axios</h3>\n<ul>\n<li>支持浏览器 / Nodejs 环境</li>\n<li>丰富的拦截器</li>\n</ul>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>Axios示例 >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 全局配置</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>axios<span class=\"token punctuation\">.</span>defaults<span class=\"token punctuation\">.</span>baseURL <span class=\"token operator\">=</span> <span class=\"token string\">\"https://api.example.com\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 添加请求拦截器</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>axios<span class=\"token punctuation\">.</span>interceptors<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 在发送请求之前做些什么</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> config<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 对请求错误做些什么</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 发送请求</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">axios</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    method<span class=\"token operator\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    url<span class=\"token operator\">:</span> <span class=\"token string\">'http://test.com'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    responseType<span class=\"token operator\">:</span> <span class=\"token string\">'stream'</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ada_lovelace.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"用户体验优化\"><a class=\"anchor\" href=\"#用户体验优化\">#</a> 用户体验优化</h3>\n<h4 id=\"网络优化\"><a class=\"anchor\" href=\"#网络优化\">#</a> 网络优化</h4>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96.png\" alt=\"网络优化\" title=\"网络优化\"></p>\n<h4 id=\"稳定性\"><a class=\"anchor\" href=\"#稳定性\">#</a> 稳定性</h4>\n<ul>\n<li>重试是保证稳定的有效手段、但要防止加剧恶劣情况</li>\n<li>缓存合理使用，作为最后一道防线</li>\n</ul>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BC%98%E5%8C%96.png\" alt=\"稳定性优化\" title=\"稳定性优化\"></p>\n<h2 id=\"其他协议\"><a class=\"anchor\" href=\"#其他协议\">#</a> 其他协议</h2>\n<h3 id=\"websocket\"><a class=\"anchor\" href=\"#websocket\">#</a> WebSocket</h3>\n<ul>\n<li>浏览器与服务器进行双全工通讯</li>\n<li>适用于实时性要求高的场景，比如聊天室</li>\n<li>URL 使用 ws:// 或 wss:// 等开头</li>\n</ul>\n<h3 id=\"quic\"><a class=\"anchor\" href=\"#quic\">#</a> QUIC</h3>\n<ul>\n<li>QUIC(<em> <code>Quick UDP Internet Connection</code> </em>) - HTTP3 的草案之一</li>\n<li>0-RTT 建联</li>\n<li>类似 TCP 的可靠传输</li>\n<li>类似 TLS 的加密传输，支持完美前向安全</li>\n<li>用户空间的拥塞控制，最新的 BBR 算法</li>\n<li>支持 HTTP2 的基于流的多路复用，但没有 TCP 的 HOL 问题</li>\n<li>前向纠错 FEC</li>\n<li>类似 MPTCP 的 Connection migration</li>\n</ul>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n<li>HTTP 权威指南</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "HTTP协议",
                "笔记补完计划"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/20/%E5%89%8D%E7%AB%AF%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/20/%E5%89%8D%E7%AB%AF%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0-%E7%AC%94%E8%AE%B0/",
            "title": "前端动画实现 - 笔记",
            "date_published": "2022-01-20T10:49:22.000Z",
            "content_html": "<blockquote>\n<p>动画的基本原理：什么是动画、动画的历史、计算机动画原理</p>\n<p>前端动画的分类：CSS 动画、SVG 动画、JS 动画、如何选择</p>\n<p>前端动画如何实现（主要是 JS）：JS 动画的函数封装、简单动画、复杂动画</p>\n<p>相关实践：动画资源、工作实践、动画的优化</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"前端动画实现-笔记\"><a class=\"anchor\" href=\"#前端动画实现-笔记\">#</a> 前端动画实现 - 笔记</h1>\n<h2 id=\"动画的基本原理\"><a class=\"anchor\" href=\"#动画的基本原理\">#</a> 动画的基本原理</h2>\n<h3 id=\"什么是动画\"><a class=\"anchor\" href=\"#什么是动画\">#</a> 什么是动画</h3>\n<blockquote>\n<p>动画是通过快速连续排列彼此差异极小的连续图像来制造运动错觉和变化错觉的过程。</p>\n</blockquote>\n<ul>\n<li><strong>快速</strong>、<strong>连续排列</strong>、<strong>彼此差异极小</strong>、<strong>制造错觉</strong></li>\n</ul>\n<h3 id=\"动画的历史\"><a class=\"anchor\" href=\"#动画的历史\">#</a> 动画的历史</h3>\n<p>如今前端动画技术已经普及</p>\n<ol>\n<li>\n<p>常见的前端动画技术<br>\n Sprite 动画、CSS 动画、JS 动画、SVG 动画和 WebGL 动画</p>\n</li>\n<li>\n<p>按应用分类<br>\n UI 动画、基于 Web 的游戏动画和动画数据可视化</p>\n</li>\n</ol>\n<p>最早的技术是 GIF，然后是 Flash，如今是 HTML/CSS/JS</p>\n<h3 id=\"计算机动画原理\"><a class=\"anchor\" href=\"#计算机动画原理\">#</a> 计算机动画原理</h3>\n<p>计算机图形学:</p>\n<p>计算机视觉的基础，涵盖点、线、面、体、场的数学构造方法。</p>\n<ol>\n<li>几何和图形数据的输入、存储和压缩。</li>\n<li>描述纹理、曲线、光影等算法。</li>\n<li>物体图形的数据输出 (图形接口、动画技术)，硬件和图形的交互技术。</li>\n<li>图形开发软件的相关技术标准。</li>\n</ol>\n<p>计算机动画:</p>\n<p>计算机图形学的分支，主要包含 2D、3D 动画。</p>\n<p>无论动画多么简单，始终需要定义两个基本状态，即<strong>开始状态和结束状态</strong>。没有它们，我们将无法定义插值状态，从而填补了两者之间的空白。</p>\n<p>帧：连续变换的多张画面，其中的每一幅画面都是一帧。</p>\n<p>帧率：用于度量一定时间段内的帧数，通常的测量单位是 FPS (frame per second) 。</p>\n<p>帧率与人眼：一般每秒<strong> 10-12 帧</strong>人会认为画面是连贯的，这个现象称为视觉暂留。对于一些电脑动画和游戏来说<strong>低于 30FPS 会感受到明显卡顿</strong>，目前主流的屏幕、显卡输出为 60FPS，效果会明显更流畅。</p>\n<p>空白的补全方式有以下两种</p>\n<p>补间动画:<br>\n 传统动画，主画师绘制关键帧，交给清稿部门，清稿部门的补间动画师补充关键帧进行交付。(类比到这里，补间动画师由浏览器来担任，如 <code>keyframe</code> ， <code>transition</code> )</p>\n<p>逐帧动画 (Frame By Frame) :<br>\n 从词语来说意味着全片每一帧逐帧都是纯手绘。(如 CSS 的 <code>steps</code>  实现精灵动画)</p>\n<h2 id=\"前端动画分类\"><a class=\"anchor\" href=\"#前端动画分类\">#</a> 前端动画分类</h2>\n<h3 id=\"css动画\"><a class=\"anchor\" href=\"#css动画\">#</a> CSS 动画</h3>\n<p>CSS <a href=\"\">animation</a> 是常见的 CSS 动画实现方式：</p>\n<p>CSS  <code>animation</code>  属性是 <code>animation-name</code> ， <code>animation-</code> <br>\n <code>duration</code> ， <code>animation-timing-function</code> ， <code>animation-delay</code> ， <code>animation-iteration-count</code> ， <code>animation-direction</code> ， <code>animation-fill-mode</code>  和 <code>animation-play-state</code>  属性的一个简写属性形式。</p>\n<p>CSS 补间动画使用 <code>Transition API</code>  和 <code>Keyframe</code>  实现</p>\n<p>CSS 逐帧动画使用 <code>Animation API</code>  中的 <code>steps</code>  实现</p>\n<p><strong>优点</strong>：简单、高效声明式的不依赖于主线程，采用硬件加速 (GPU) 简单的控制 keyframe animation 播放和暂停。</p>\n<p><strong>缺点</strong>：不能动态修改或定义动画内容不同的动画无法实现同步多个动画彼此无法堆叠。</p>\n<p><strong>适用场景</strong>：简单的 h5 活动 / 宣传页。</p>\n<p><strong>推荐库</strong>：animation.css、shake.css 等。</p>\n<h3 id=\"svg动画\"><a class=\"anchor\" href=\"#svg动画\">#</a> SVG 动画</h3>\n<p>svg 是基于 XML 的矢量图形描述语言，它可以与 CSS 和 S 较好的配合，实现 svg 动画通常有三种方式：SMIL、JS、CSS</p>\n<p>我们经常使用 animation, transform, transition 来实现 svg 动画，它比 JS 更加简单方便。</p>\n<p><strong>优点</strong>：通过矢量元素实现动画，不同的屏幕下均可获得较好的清晰度。可以实现一些特殊的效果，如：描字，形变，墨水扩散等。</p>\n<p><strong>缺点</strong>：使用方式较为复杂，过多使用可能会带来性能问题。</p>\n<h4 id=\"smil\"><a class=\"anchor\" href=\"#smil\">#</a> SMIL</h4>\n<p>SMIL： Synchronized Multimedia Integration Language (同步多媒体集成语言)</p>\n<p>可以使用 svg 标签进行动画的描述，但是兼容性不是很理想</p>\n<h4 id=\"js-css\"><a class=\"anchor\" href=\"#js-css\">#</a> JS、CSS</h4>\n<p>使用 JS 来操作 SVG 动画自不必多说，目前也有很多现成的类库。例如老牌的 Snap.svg 以及 anime.js ，都能让我们快速制作 SVG 动画。当然，除了这些类库，HTML 本身也有原生的 Web Animation 实现。使用 Web Animation 也能让我们方便快捷地制作动画。</p>\n<p>文字形变（基于 CSS 中的 filter 属性）：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlcGVuLmlvL2ppYW5neGlhbmcvcGVuL01XbWRqZVk=\">https://codepen.io/jiangxiang/pen/MWmdjeY</span></p>\n<p>Path 实现写字动画：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlcGVuLmlvL2ppYW5neGlhbmcvcGVuL3JObWdqcVg=\">https://codepen.io/jiangxiang/pen/rNmgjqX</span></p>\n<h4 id=\"js笔画的原理\"><a class=\"anchor\" href=\"#js笔画的原理\">#</a> JS 笔画的原理</h4>\n<p>stroke-dashoffset、stroke-dasharray 配合使用实现笔画效果。</p>\n<p>属性 stroke-dasharray 可控制用来描边的点划线的图案范式。</p>\n<p>它是一个数列，数与数之间用逗号或者空白隔开，指定短划线和缺口的长度。如果提供了奇数个值，则这个值的数列重复一次，从而变成偶数个值。因此，5,3,2 等同于 5,3,2,5,3,2。</p>\n<p>stroke-dashoffset 属性指定了 dash 模式到路径开始的距离。</p>\n<p>参考：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlcGVuLmlvL2ppYW5neGlhbmcvcGVuL0xZenZ2eGQ=\">https://codepen.io/jiangxiang/pen/LYzvvxd</span></p>\n<p>path 路径–d 属性 (路径描述)  <code>&lt;path d=&quot;....&quot; /&gt;</code></p>\n<p>* 大写字母跟随的是绝对坐标 x,y，小写为相对坐标 dx,dy</p>\n<ul>\n<li>\n<p>M/m 绘制起始点。</p>\n</li>\n<li>\n<p>L/I 绘制一条线段。</p>\n</li>\n<li>\n<p>C/c 为绘制贝塞尔曲线。</p>\n</li>\n<li>\n<p>Z/z 将当前点与起始点用直线连接。</p>\n</li>\n</ul>\n<p>计算 path 的长度： <code>path.getTotalLength();</code></p>\n<p>计算 path 上某个点的坐标： <code>path.getPointAtLength(lengthNumber);</code></p>\n<p>例子:<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlcGVuLmlvL2ppYW5neGlhbmcvcGVuL2VZV2FneHE=\">https://codepen.io/jiangxiang/pen/eYWagxq</span></p>\n<h3 id=\"js动画\"><a class=\"anchor\" href=\"#js动画\">#</a> JS 动画</h3>\n<p>JS 可以实现复杂的动画，也可以操作 canvas 动画 API 上进行绘制。</p>\n<h3 id=\"如何做选择\"><a class=\"anchor\" href=\"#如何做选择\">#</a> 如何做选择</h3>\n<p>CSS 优点:</p>\n<ul>\n<li>\n<p>浏览器会对 CSS3 动画做一些优化，使得 CSS3 动画性能上稍有优势（新建一个图层来跑动画）。</p>\n</li>\n<li>\n<p>CSS3 动画的代码相对简单。</p>\n</li>\n</ul>\n<p>CSS 缺点:</p>\n<ul>\n<li>动画控制上不够灵活。</li>\n<li>兼容性不佳。</li>\n<li>部分动画无法实现（视差效果、滚动动画）。</li>\n</ul>\n<p>JS 优点:</p>\n<ul>\n<li>\n<p>使用灵活，同样在定义一个动画的 keyframe 序列时，可以根据不同的条件调节若干参数（JS 动画函数）改变动画方式。（CSS 会有非常多的代码冗余）</p>\n</li>\n<li>\n<p>对比与 CSS 的 keyframe 粒度更粗，css 本身的时间函数是有限的，这块 JS 都可做弥补。</p>\n</li>\n<li>\n<p>CSS 很难做到两个以上的状态转化（要么使用关键帧，要么需要多个动画延时触发，再想到要对动画循环播放或暂停倒序等，复杂度极高）。</p>\n</li>\n</ul>\n<p>JS 缺点:</p>\n<ul>\n<li>使用到 JS 运行时，调优方面不如 CSS 简单，CSS 调优方式固定。</li>\n<li>对于性能和兼容性较差的浏览器，CSS 可以做到优雅降级，而 JS 需要额外代码兼容。</li>\n</ul>\n<p>结论：</p>\n<ul>\n<li>当 UI 元素采用较小的独立状态时，使用 CSS。</li>\n<li>在需要对动画进行大量控制时，使用 JavaScript。</li>\n<li>在特定的场景下可以使用 SVG，可以使用 CSS 或 JS 去操作 SVG 变化。</li>\n</ul>\n<h2 id=\"前端动画实现\"><a class=\"anchor\" href=\"#前端动画实现\">#</a> 前端动画实现</h2>\n<h3 id=\"js动画函数封装\"><a class=\"anchor\" href=\"#js动画函数封装\">#</a> JS 动画函数封装</h3>\n<p>先来一个基础的 <code>animate</code>  函数：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * 入参说明：</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * draw 动画绘制函数（例如：() => &#123; ctx.draw ()... &#125;）</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * easing 缓动函数（数学）（例如：(x) => y）</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * duration 动画持续时间（例如：2000）</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * @returns 一个可以表示动画是否完成的 Promise 对象，同时，由于动画可以是连续的，所以 Promise.then 就能让动画按顺序被调用</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">animate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">&#123;</span>easing<span class=\"token punctuation\">,</span> draw<span class=\"token punctuation\">,</span> duration<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// 动画开始的时间戳</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// Q：为什么使用 performance.now () 而非 Date.now ()？</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// A：因为 performance.now () 会以恒定速度自增，精确到微秒级别，不易被篡改。</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">let</span> start <span class=\"token operator\">=</span> performance<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// (time - start) 算出距离动画开始，时间已经过去了多少，然后根据过去了多少时间 ÷ 规定的动画持续时间，算出目前动画进度（百分比）</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\">// 注意：这是不算上缓动函数修正的百分比（原始百分比）</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token comment\">// 例如：动画开始时间为 start = 1666，现在的时间为 time = 2666，想让动画持续的时间为 duration = 2000，那么 timeFraction 就是 0.5，即 50%</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token keyword\">let</span> timeFraction <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>time <span class=\"token operator\">-</span> start<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> duration<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token comment\">// 如果 timeFraction > 1，即原始百分比已经大于 100%，即动画照理来说应该是已经结束了的，那么就将原始百分比设为 100%，即 timeFraction = 1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeFraction <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> timeFraction <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token comment\">//progress 是动画的实际进程（通过缓动函数计算后的真实百分比），这个值应该也是要小于 100% 的，你可以把 easing 函数理解为一个纯数学函数，接受 [0, 1]-> 输出 [0, 1]，建立真实时间到动画百分比的映射关系</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token keyword\">let</span> progress <span class=\"token operator\">=</span> <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span>timeFraction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">// 给 draw 函数传入 progress（动画目前应该到达的进度），那么 draw 函数就可以根据这个进度指示，来绘制相应的图像（可以类比 CSS animation 中的 keyframe 百分比）</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>progress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token comment\">// 如上所述，当 timeFrction（原始百分比）&lt; 1 时，说明动画还为完成，则继续调用 rAF，否则说明动画已结束，将此 Promise 解决 (resolve) 掉</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeFraction <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>注意： <code>easing</code>  函数也<strong>不一定只能</strong>返回 [0, 1] 的数值，根据实际使用情况可以与 <code>draw</code>  函数协调</p>\n<h4 id=\"js执行动画的核心思想\"><a class=\"anchor\" href=\"#js执行动画的核心思想\">#</a> JS 执行动画的核心思想</h4>\n<p>基本公式：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"normal\">△</mi><mi>r</mi><mo>=</mo><mi mathvariant=\"normal\">△</mi><mi>v</mi><mi mathvariant=\"normal\">△</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\triangle r = \\triangle v \\triangle t\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">△</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">△</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord\">△</span><span class=\"mord mathnormal\">t</span></span></span></span></span></p>\n<p>简单理解：r 是距离，v 是速度，t 是时间</p>\n<p>比例尺 / 距离系数：通过比例尺将实际的大小、长度等比例缩放 / 增加到屏幕上显示的大小、长度</p>\n<h3 id=\"简单动画\"><a class=\"anchor\" href=\"#简单动画\">#</a> 简单动画</h3>\n<h4 id=\"匀速运动\"><a class=\"anchor\" href=\"#匀速运动\">#</a> 匀速运动</h4>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> ball <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'.ball'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>progress <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px, 0)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 这里的 * 100 实际上就是一个比例尺，将 [0, 1] 映射到 [0, 100] px</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 沿着 x 轴匀速运动</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">timeFraction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 这就是一个匀速运动函数，相当于 (x) => x</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">return</span> timeFraction<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"重力效果\"><a class=\"anchor\" href=\"#重力效果\">#</a> 重力效果</h4>\n<p>从这个动画开始，就需要考虑数学公式了，即：怎么把 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>=</mo><mi>g</mi><mo separator=\"true\">⋅</mo><mi>t</mi><mtext>，即</mtext><mi>x</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>g</mi><msup><mi>t</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">v = g·t，即x = \\frac{1}{2} gt^{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">即</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> 套用到 <code>animate</code>  这个模板里面</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(0, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token punctuation\">(</span>progress <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">500</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// 这里的 500 就是比例尺</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 沿着 x 轴匀速运动</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">timeFraction</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 这个函数通过 t^2，模拟了重力的最显著特点</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> timeFraction <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 也可以模拟的真实一点：0.5 * 9.8 * (timeFraction ** 2)，当然，这样的话 draw 函数内部就也要做相应的调整了</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"摩擦力匀速减速运动\"><a class=\"anchor\" href=\"#摩擦力匀速减速运动\">#</a> 摩擦力（匀速减速运动）</h4>\n<p>同样的，根据摩擦力数学公式写出缓动函数：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>v</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>−</mo><mi>a</mi><mo separator=\"true\">⋅</mo><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">v = v_{0} - a·t\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>x</mi><mo>=</mo><mo>∫</mo><mi>v</mi><mo separator=\"true\">⋅</mo><mi>d</mi><mi>t</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mi>t</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>a</mi><msup><mi>t</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">x = \\int v·dt = v_{0}t - \\frac{1}{2}at^{2}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.22225em;vertical-align:-0.86225em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76508em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 初始高度 500px</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px),</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>progress<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 匀减速运动</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// v0 = 2，a = 2</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"平抛运动x轴匀速y轴加速\"><a class=\"anchor\" href=\"#平抛运动x轴匀速y轴加速\">#</a> 平抛运动（x 轴匀速，y 轴加速）</h4>\n<p>平抛运动实际上就是<a href=\"#%E5%8C%80%E9%80%9F%E8%BF%90%E5%8A%A8\">匀速运动</a>与<a href=\"#%E9%87%8D%E5%8A%9B%E6%95%88%E6%9E%9C\">重力效果</a>的结合</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px), </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>progress <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 有两个方向，沿着 x 轴匀速运动，沿着 y 轴加速运动</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            x<span class=\"token operator\">:</span> t<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            y<span class=\"token operator\">:</span> t <span class=\"token operator\">**</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"旋转-平抛\"><a class=\"anchor\" href=\"#旋转-平抛\">#</a> 旋转 + 平抛</h4>\n<p>其实就是在<a href=\"#%E5%B9%B3%E6%8A%9B%E8%BF%90%E5%8A%A8%EF%BC%88x%E8%BD%B4%E5%8C%80%E9%80%9F%EF%BC%8Cy%E8%BD%B4%E5%8A%A0%E9%80%9F%EF%BC%89\">平抛</a>的基础上加一个旋转效果而已</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(o,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>progress <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px rotate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">2000</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">.</span>rorate<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">deg))</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 有两个方向，沿着 x 轴匀速运动，沿着 y 轴加速运动</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            x<span class=\"token operator\">:</span> t<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            y<span class=\"token operator\">:</span> t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            rotate<span class=\"token operator\">:</span> t <span class=\"token comment\">// 匀速旋转</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"拉弓效果\"><a class=\"anchor\" href=\"#拉弓效果\">#</a> 拉弓效果</h4>\n<p>拉弓效果的本质就是：x 轴匀速运动；y 轴为初始速度为负的匀加速</p>\n<p>知道这两点后，就不难通过数学表达式写出缓动函数</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>v</mi><mo>=</mo><mo>−</mo><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><mi>a</mi><mo separator=\"true\">⋅</mo><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">v = - v_{0} + a·t\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>x</mi><mo>=</mo><mo>∫</mo><mi>v</mi><mo separator=\"true\">⋅</mo><mi>d</mi><mi>t</mi><mo>=</mo><mo>−</mo><msub><mi>v</mi><mn>0</mn></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>a</mi><msup><mi>t</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">x = \\int v·dt = - v_{0}t + \\frac{1}{2}at^{2}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.22225em;vertical-align:-0.86225em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76508em;vertical-align:-0.15em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">.</span>x<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px), </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token number\">500</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>progress <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 有两个方向，沿着 x 轴匀速运动，沿着 y 轴加速运动</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    duration<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            x<span class=\"token operator\">:</span> t<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            y<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// v0 = 2，a = 2</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    draw</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"贝塞尔曲线\"><a class=\"anchor\" href=\"#贝塞尔曲线\">#</a> 贝塞尔曲线</h4>\n<p>贝塞尔曲线的详细描述和公式见<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU4JUIyJTlEJUU1JUExJTlFJUU3JTg4JUJFJUU2JTlCJUIyJUU3JUI3JTlB\"> Wikipedia</span>，这里给出三次贝塞尔曲线的数学表达式：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>B</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mtext>−</mtext><mi>t</mi><msup><mo stretchy=\"false\">)</mo><mn>3</mn></msup><msub><mi>P</mi><mn>0</mn></msub><mo>+</mo><mn>3</mn><mi>t</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mtext>−</mtext><mi>t</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><msub><mi>P</mi><mn>1</mn></msub><mo>+</mo><mn>3</mn><msup><mi>t</mi><mn>2</mn></msup><mo stretchy=\"false\">(</mo><mn>1</mn><mtext>−</mtext><mi>t</mi><mo stretchy=\"false\">)</mo><msub><mi>P</mi><mn>2</mn></msub><mo>+</mo><msup><mi>t</mi><mn>3</mn></msup><msub><mi>P</mi><mn>3</mn></msub><mo separator=\"true\">,</mo><mi>t</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">B(t)=(1−t)^{3}P_{0}+3t(1−t) ^2P_{1}+3t^2(1−t)P _{2}+t^3P_{3}, t∈[0,1]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">−</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord mathnormal\">t</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">−</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">−</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0585479999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></span></p>\n<p>由于 P<sub>0</sub>和 P<sub>3</sub>的位置是确定的（(0,0) 和 (1,1)），所以实际上只需要给出 P<sub>1</sub>和 P<sub>2</sub>的坐标即可：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bezierPath</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> t</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> x1 <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> x2 <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span> <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> y1 <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> y2 <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"复杂动画\"><a class=\"anchor\" href=\"#复杂动画\">#</a> 复杂动画</h3>\n<h4 id=\"弹跳小球\"><a class=\"anchor\" href=\"#弹跳小球\">#</a> 弹跳小球</h4>\n<p>实质上就是到达终点后的反弹和衰减，是<a href=\"#%E9%87%8D%E5%8A%9B%E6%95%88%E6%9E%9C\">重力效果</a>的延伸</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">autoDamping</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">let</span> damping <span class=\"token operator\">=</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 衰减系数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        duration <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        height <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 当衰减到一定边界值时停止动画</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>height <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">down</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        \tball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(0, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>height <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>progress <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">await</span> <span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        \tduration<span class=\"token operator\">:</span> duration<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        \t<span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          \t\t<span class=\"token keyword\">return</span> t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        \tdraw<span class=\"token operator\">:</span> down<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        height <span class=\"token operator\">*=</span> damping <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ** 2 可以使动画效果更加柔和</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      \tduration <span class=\"token operator\">*=</span> damping<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">up</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        \tball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(0, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token operator\">-</span>height <span class=\"token operator\">*</span> progress<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      \t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">await</span> <span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        \tduration<span class=\"token operator\">:</span> duration<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        \t<span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>          \t\t<span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        \tdraw<span class=\"token operator\">:</span> down<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"椭圆运动\"><a class=\"anchor\" href=\"#椭圆运动\">#</a> 椭圆运动</h4>\n<p>也是套用公式：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><msup><mi>x</mi><mn>2</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mfrac><mo>+</mo><mfrac><msup><mi>y</mi><mn>2</mn></msup><msup><mi>b</mi><mn>2</mn></msup></mfrac><mo>=</mo><mn>1</mn><mtext>，</mtext><mi>x</mi><mo>=</mo><mi>a</mi><mo separator=\"true\">⋅</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mtext>，</mtext><mi>y</mi><mo>=</mo><mi>b</mi><mo separator=\"true\">⋅</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{x^2}{a^2}+\\frac{y^2}{b^2}=1，x=a·cos(a)，y=b·sin(a)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.177108em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.491108em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">s</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">⋅</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">draw</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progress</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">150</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">100</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> progress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    ball<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>x<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>y<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tduration<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">easing</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  \t\t<span class=\"token keyword\">return</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> t <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">**</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  \t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  \tdraw<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"相关实践\"><a class=\"anchor\" href=\"#相关实践\">#</a> 相关实践</h2>\n<h3 id=\"动画资源\"><a class=\"anchor\" href=\"#动画资源\">#</a> 动画资源</h3>\n<p><strong>动画代码示例</strong>：</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2NvZGVwZW4uY29t\">codepen.com</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2NvZGVzYW5kYm94LmNvbQ==\">codesandbox.com</span></li>\n</ul>\n<p><strong>设计网站</strong>：</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2RyaWJiYmxlLmNvbQ==\">dribbble.com</span></li>\n</ul>\n<p><strong>动画制作工具</strong>（一般都是 UE、UI 同学使用)：</p>\n<ul>\n<li>2D：Animate CC、After Effects</li>\n<li>3D：Cinema 4D、Blender、Autodesk Maya</li>\n</ul>\n<p><strong>svg</strong> :</p>\n<ul>\n<li>\n<p>Snap.svg - 现代 SVG 图形的 JavaScript 库。</p>\n</li>\n<li>\n<p>Svg.js - 用于操作和动画 SVG 的轻量级库。</p>\n</li>\n</ul>\n<p><strong>js</strong> :</p>\n<ul>\n<li>GSAP - JavaScript 动画库。</li>\n<li>TweenJs  - 一个简单但功能强大的 JavaScript 补间 / 动画库。CreateJS 库套件的一部分。</li>\n<li>Velocity - 加速的 JavaScript 动画。</li>\n</ul>\n<p><strong>css</strong> :</p>\n<ul>\n<li>Animate.css - CSS 动画的跨浏览器库。像一件简单的事情一样容易使用。</li>\n</ul>\n<p><strong>canvas</strong> :</p>\n<ul>\n<li>EaselJs - EaselJS 是一个用于在 HTML5 中构建高性能交互式 2D 内容的库</li>\n<li>Fabric.js - 支持动画的 JavaScript 画布库。</li>\n<li>Paper.js - 矢量图形脚本的瑞士军刀 - Scriptographer 使用 HTML5Canvas 移植到 JavaScript 和浏览器。</li>\n<li>Pixijs - 使用最快、最灵活的 2D WebGL 渲染器创建精美的数字内容。</li>\n</ul>\n<h3 id=\"工作实践\"><a class=\"anchor\" href=\"#工作实践\">#</a> 工作实践</h3>\n<pre class=\"mermaid graph\"><svg id=\"mermaid-1642678561444\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"55\" style=\"max-width: 363.296875px;\" viewBox=\"0 0 363.296875 55\"><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-动画帧 LE-代码&amp;设计文件\" id=\"L-动画帧-代码&amp;设计文件\" style=\"opacity: 1;\"><path class=\"path\" d=\"M76,27.5L101,27.5L126,27.5\" marker-end=\"url(#arrowhead12)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead12\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-代码&amp;设计文件 LE-代码\" id=\"L-代码&amp;设计文件-代码\" style=\"opacity: 1;\"><path class=\"path\" d=\"M253.296875,27.5L278.296875,27.5L303.296875,27.5\" marker-end=\"url(#arrowhead13)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead13\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-动画帧-3\" transform=\"translate(42,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-34\" y=\"-19.5\" width=\"68\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-24,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">动画帧</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-代码&amp;设计文件-4\" transform=\"translate(189.6484375,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-63.6484375\" y=\"-19.5\" width=\"127.296875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-53.6484375,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">代码&amp;设计文件</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-代码-5\" transform=\"translate(329.296875,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-26\" y=\"-19.5\" width=\"52\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">代码</tspan></text></g></g></g></g></g></g></svg></pre><ul>\n<li>\n<p>需要完全前端自己开发</p>\n<p>使用已经封装好的动画库，从开发成本和体验角度出发进行取舍。</p>\n</li>\n<li>\n<p>设计不是很有空</p>\n<p>清晰度，图片格式可以指定，动画尽量给出示意或者相似案例参考。索要精灵资源、资源等需要帮忙压缩。</p>\n</li>\n<li>\n<p>设计资源充足</p>\n<p>要求设计导出 lottie 格式文件。</p>\n<p>（Lottie 是可应用于 Android, iOS, Web 和 Windows 的库，通过 Bodymovin 解析 AE 动画，并导出可在移动端和 web 端渲染动画的 json 文件）</p>\n</li>\n</ul>\n<h3 id=\"动画的优化\"><a class=\"anchor\" href=\"#动画的优化\">#</a> 动画的优化</h3>\n<h4 id=\"用户体验\"><a class=\"anchor\" href=\"#用户体验\">#</a> 用户体验</h4>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc21hc2hpbmdtYWdhemluZS5jb20vMjAxMS8wOS90aGUtZ3VpZGUtdG8tY3NzLWFuaW1hdGlvbi1wcmluY2lwbGVzLWFuZC1leGFtcGxlcy8=\">《The Guide To CSS Animation: Principles and Examples》</span></p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU1JThCJTk1JUU3JTk1JUFCJUU3JTlBJTg0MTIlRTklQTAlODUlRTUlOUYlQkElRTYlOUMlQUMlRTYlQjMlOTUlRTUlODklODc=\">动画的 12 项基本法则 - Wikipedia</span></p>\n</li>\n</ul>\n<h4 id=\"性能\"><a class=\"anchor\" href=\"#性能\">#</a> 性能</h4>\n<p>在实际的应用里，最为简单的一个注意点就是，触发动画的开始不要用 <code>display: none</code>  属性值，因为它会引起<em> Layout</em>、<em>Paint</em> 环节，通过切换类名就已经是一种很好的办法。</p>\n<p><code>translate</code>  属性值来替换 <code>top/left/right/bottom</code>  的切换， <code>scale</code>  属性值替换 <code>width/height</code> ， <code>opacity</code>  属性替换 <code>display/visibility</code>  等等。</p>\n<p>CSS3 硬件加速又叫做 GPU 加速，是利用 GPU 进行渲染，减少 CPU 操作的一种优化方案。由于 GPU 中的 transform 等 CSS 属性不会触发 repaint，所以能大大提高网页的性能。</p>\n<p>CSS 中的以下几个属性能触发硬件加速∶</p>\n<ol>\n<li>\n<p>transform</p>\n</li>\n<li>\n<p>opacity</p>\n</li>\n<li>\n<p>filter</p>\n</li>\n<li>\n<p>Will-change</p>\n</li>\n</ol>\n<p>如果有一些元素不需要用到上述属性，但是需要触发硬件加速效果，可以使用一些小技巧来诱导浏览器开启硬件加速。</p>\n<h4 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h4>\n<p>算法优化：</p>\n<ul>\n<li>线性函数代替真实计算</li>\n<li>几何模型优化</li>\n<li>碰撞检测优化</li>\n</ul>\n<p>内存 / 缓存优化</p>\n<p>离屏绘制</p>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n<li>Wikipedia</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/20/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8EReact-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/20/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%8EReact-%E7%AC%94%E8%AE%B0/",
            "title": "响应式系统与React - 笔记",
            "date_published": "2022-01-20T10:39:47.000Z",
            "content_html": "<blockquote>\n<p>React 的历史与应用</p>\n<p>React 的设计思路：UI 编程痛点、响应式与转换式、组件化、生命周期</p>\n<p>React（hooks）的写法：useState、useEffect</p>\n<p>React 的实现：JSX 语法、Virtual DOM、Diff 算法</p>\n<p>React 状态管理库 &amp; 应用级框架介绍</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"响应式系统与react\"><a class=\"anchor\" href=\"#响应式系统与react\">#</a> 响应式系统与 React</h1>\n<h2 id=\"react的历史与应用\"><a class=\"anchor\" href=\"#react的历史与应用\">#</a> React 的历史与应用</h2>\n<h3 id=\"历史\"><a class=\"anchor\" href=\"#历史\">#</a> 历史</h3>\n<p>2010 年：Facebook 在其 ph 生态中，引入了 xhp 框架，首次引入了组合式组件的思想，启发了后来的 React 的设计。</p>\n<p>2011 年：Jordan Walke 创造了 FaxJS，也就是后来的 React 原型:</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220119101018197.png\" alt=\"image-20220119101018197\"></p>\n<p>2012 年：在 Facebook 收购 Instagram 后，该 FaxJS 项目在内部得到使用，Jordan Walke 基于 FaxJS 的经验创造了 React</p>\n<p>2013 年：React 正式开源，在 2013 JSConf 上 Jordan Walke 介绍了这款全新的框架</p>\n<p>2014 年：生态大爆发，各种围绕 React 的新工具 / 新框架开始涌现：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220119101527508.png\" alt=\"image-20220119101527508\"></p>\n<h3 id=\"应用\"><a class=\"anchor\" href=\"#应用\">#</a> 应用</h3>\n<ol>\n<li>前端应用开发：Facebook、Instagram、Netflix 网页版</li>\n<li>移动原生应用开发：Instagram、Discord、Oculus</li>\n<li>桌面应用开发：结合 Electron</li>\n<li>3D 开发：<em>react-thre-fiber</em></li>\n</ol>\n<h2 id=\"react的设计思路\"><a class=\"anchor\" href=\"#react的设计思路\">#</a> React 的设计思路</h2>\n<h3 id=\"ui编程痛点\"><a class=\"anchor\" href=\"#ui编程痛点\">#</a> UI 编程痛点</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220119101812462.png\" alt=\"image-20220119101812462\"></p>\n<ol>\n<li>状态更新时，UI 不会自动更新，需要手动调用 DOM 进行更新</li>\n<li>欠缺基本的代码层面的封装和隔离，代码层面没有组件化</li>\n<li>UI 之间的数据依赖关系，需要手动维护，如果依赖链路长，则会导致<strong> Callback Hell</strong></li>\n</ol>\n<h3 id=\"响应式与转换式\"><a class=\"anchor\" href=\"#响应式与转换式\">#</a> 响应式与转换式</h3>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>特点</th>\n<th>应用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>转换式系统</strong></td>\n<td>给定输入求解输出</td>\n<td>编译器、数值计算</td>\n</tr>\n<tr>\n<td><strong>响应式系统</strong></td>\n<td>监听事件，消息驱动</td>\n<td>监控系统、UI 界面</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"响应式编程\"><a class=\"anchor\" href=\"#响应式编程\">#</a> 响应式编程</h3>\n<p>响应式系统：</p>\n<pre class=\"mermaid graph\"><svg id=\"mermaid-1645104349407\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"55\" style=\"max-width: 384px;\" viewBox=\"0 0 384 55\"><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-事件 LE-执行既定的回调\" id=\"L-事件-执行既定的回调\" style=\"opacity: 1;\"><path class=\"path\" d=\"M60,27.5L85,27.5L110,27.5\" marker-end=\"url(#arrowhead12)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead12\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-执行既定的回调 LE-状态变更\" id=\"L-执行既定的回调-状态变更\" style=\"opacity: 1;\"><path class=\"path\" d=\"M242,27.5L267,27.5L292,27.5\" marker-end=\"url(#arrowhead13)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead13\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-事件-3\" transform=\"translate(34,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-26\" y=\"-19.5\" width=\"52\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">事件</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-执行既定的回调-4\" transform=\"translate(176,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-66\" y=\"-19.5\" width=\"132\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-56,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">执行既定的回调</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-状态变更-5\" transform=\"translate(334,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-42\" y=\"-19.5\" width=\"84\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-32,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">状态变更</tspan></text></g></g></g></g></g></g></svg></pre><p>前端响应式 UI：</p>\n<pre class=\"mermaid graph\"><svg id=\"mermaid-1645104355781\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"55\" style=\"max-width: 500.828125px;\" viewBox=\"0 0 500.828125 55\"><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-事件 LE-执行既定的回调\" id=\"L-事件-执行既定的回调\" style=\"opacity: 1;\"><path class=\"path\" d=\"M60,27.5L85,27.5L110,27.5\" marker-end=\"url(#arrowhead17)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead17\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-执行既定的回调 LE-状态变更\" id=\"L-执行既定的回调-状态变更\" style=\"opacity: 1;\"><path class=\"path\" d=\"M242,27.5L267,27.5L292,27.5\" marker-end=\"url(#arrowhead18)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead18\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-状态变更 LE-UI更新\" id=\"L-状态变更-UI更新\" style=\"opacity: 1;\"><path class=\"path\" d=\"M376,27.5L401,27.5L426,27.5\" marker-end=\"url(#arrowhead19)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead19\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-事件-4\" transform=\"translate(34,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-26\" y=\"-19.5\" width=\"52\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">事件</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-执行既定的回调-5\" transform=\"translate(176,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-66\" y=\"-19.5\" width=\"132\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-56,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">执行既定的回调</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-状态变更-6\" transform=\"translate(334,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-42\" y=\"-19.5\" width=\"84\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-32,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">状态变更</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-UI更新-7\" transform=\"translate(459.4140625,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-33.4140625\" y=\"-19.5\" width=\"66.828125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-23.4140625,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">UI更新</tspan></text></g></g></g></g></g></g></svg></pre><ol>\n<li>状态更新，UI<strong> 自动更新</strong>。</li>\n<li>前端代码<strong>组件化</strong>，可复用，可封装。</li>\n<li>状态之间的互相依赖关系，只需<strong>声明</strong>即可。</li>\n</ol>\n<h3 id=\"组件化\"><a class=\"anchor\" href=\"#组件化\">#</a> 组件化</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220119102805079.png\" alt=\"image-20220119102805079\"></p>\n<ol>\n<li>组件要么是<strong>组件的组合</strong>，要么是<strong>原子组件</strong></li>\n<li>组件拥有<strong>内部状态</strong>，外部不可见</li>\n<li>父组件可将<strong>状态传入子组件</strong></li>\n</ol>\n<h3 id=\"状态归属\"><a class=\"anchor\" href=\"#状态归属\">#</a> 状态归属</h3>\n<p>当两个组件都要使用同一个状态时，应该把状态上移到其公共父组件，即<strong>状态提升</strong></p>\n<p>但是如果这种状态提升过多，组件的复用性难免会降低，这个问题的解决则需要使用 Redux 这种状态管理框架</p>\n<p>React 其实是单向数据流，永远是父组件给子组件传递状态，子组件只能调用函数更改状态</p>\n<h3 id=\"组件设计\"><a class=\"anchor\" href=\"#组件设计\">#</a> 组件设计</h3>\n<p>前提：</p>\n<ol>\n<li>组件声明了状态和 UI 的映射</li>\n<li>组件有 Props/State 两种状态</li>\n<li>“组件” 可由其他组件拼装而成</li>\n</ol>\n<p>设计：</p>\n<ol>\n<li>组件内部拥有私有状态 State</li>\n<li>组件接受外部的 Props 状态提供复用性</li>\n<li>根据当前的 State/Props，返回一个 UI</li>\n</ol>\n<p>想象一下，大概长这样（不一定对）：</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">//props 是父组件传入的状态</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> url <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 这是组件的内部状态（State）</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">'Click me'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 返回一个 “UI”</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SubComponent</span></span> <span class=\"token attr-name\">props</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>&lt;!--swig￼0--</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">SubComponent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span>url<span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>img</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">&#125;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"生命周期\"><a class=\"anchor\" href=\"#生命周期\">#</a> 生命周期</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/16775500-102dbe772034e8fa.png\" alt=\"16775500-102dbe772034e8fa\"></p>\n<h2 id=\"reacthooks的写法\"><a class=\"anchor\" href=\"#reacthooks的写法\">#</a> React（hooks）的写法</h2>\n<h4 id=\"usestate\"><a class=\"anchor\" href=\"#usestate\">#</a> useState</h4>\n<p>传入一个初始值，返回一个状态，和 set 该状态的函数，用户可以通过调用该函数，来实现状态的修改。</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useState <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">// 声明一个新的叫做 “count” 的 state 变量</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">&#123;</span>count<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        Click me</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"useeffect\"><a class=\"anchor\" href=\"#useeffect\">#</a> useEffect</h4>\n<p>传入一个函数，和一个数组，数组是状态的数组，称作依赖项，该函数在 mount 时，和依赖项被 set 的时候会执行。</p>\n<figure class=\"highlight jsx\"><figcaption data-lang=\"React JSX\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\">// 使用一个副作用，传入的 [count] 数组使得此副作用只有当 count 变量改变时才会被调用</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 副作用：Update the document title using the browser API</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>count<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">&#123;</span>count<span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        Click me</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"react的实现\"><a class=\"anchor\" href=\"#react的实现\">#</a> React 的实现</h2>\n<h3 id=\"problems\"><a class=\"anchor\" href=\"#problems\">#</a> Problems</h3>\n<ol>\n<li>\n<p>JSX 语法不符合 JS 标准语法：</p>\n<p><strong>需要将 JSX 文件转义为 JS 文件</strong></p>\n</li>\n<li>\n<p>返回的 JSX 发生改变时，如何更新 DOM：</p>\n<p><strong>Virtual DOM（虚拟 DOM 树）</strong></p>\n</li>\n<li>\n<p>State/Props 更新时，要重新触发 render 函数：</p>\n<p><strong>Diff 算法</strong></p>\n</li>\n</ol>\n<h3 id=\"virtual-dom虚拟dom\"><a class=\"anchor\" href=\"#virtual-dom虚拟dom\">#</a> Virtual DOM（虚拟 DOM）</h3>\n<blockquote>\n<p>它赋予了 React 声明式的 API: 您告诉 React 希望让 UI 是什么状态，React 就确保 DOM 匹配该状态。这使您可以从属性操作、事件处理和手动 DOM 更新这些在构建应用程序时必要的操作中解放出来。</p>\n</blockquote>\n<p>Virtual DOM 使得状态更新<strong>先更新虚拟 DOM 树</strong>，而不是直接更新 DOM 树，通过虚拟 DOM 树的<strong> Diff 算法</strong>，求出最少要更新的节点，然后<strong>再去更新真正的 DOM 树</strong></p>\n<p>状态改变 &amp; 虚拟 DOM 更新：</p>\n<p><img data-src=\"https://calendar.perfplanet.com/wp-content/uploads/2013/12/vjeux/4.png\" alt=\"img\"></p>\n<p><img data-src=\"https://calendar.perfplanet.com/wp-content/uploads/2013/12/vjeux/5.png\" alt=\"img\"></p>\n<p>Diff 算法 &amp; 真正要更新的节点：</p>\n<p><img data-src=\"https://calendar.perfplanet.com/wp-content/uploads/2013/12/vjeux/6.png\" alt=\"img\"></p>\n<h4 id=\"如何实现diff算法\"><a class=\"anchor\" href=\"#如何实现diff算法\">#</a> 如何实现 Diff 算法</h4>\n<p>完美的最小 Diff 算法，需要 O (n^3) 的复杂度。</p>\n<p>牺牲理论最小 Diff，换取时间，得到了 O (n) 复杂度的算法</p>\n<p><strong>Heuristic O(n) Algorithm</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">不同类型的元素</th>\n<th style=\"text-align:center\">同类型的 DOM 元素</th>\n<th style=\"text-align:center\">同类型的组件元素</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">替换</td>\n<td style=\"text-align:center\">更新</td>\n<td style=\"text-align:center\">递归</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"react状态管理库\"><a class=\"anchor\" href=\"#react状态管理库\">#</a> React 状态管理库</h2>\n<p><code>Redux</code> 、 <code>xState</code> 、 <code>mobx</code> 、 <code>recoil</code>  等</p>\n<p>特点：<strong>将状态抽离到 UI 外部进行统一管理</strong></p>\n<h3 id=\"状态机\"><a class=\"anchor\" href=\"#状态机\">#</a> 状态机</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220119113244551.png\" alt=\"image-20220119113244551\"></p>\n<h2 id=\"应用级框架\"><a class=\"anchor\" href=\"#应用级框架\">#</a> 应用级框架</h2>\n<ol>\n<li>\n<p>NEXT.js</p>\n<p>硅谷明星创业公司 Vercel 的 React 开发框架，稳定，开发体验好，支持 Unbundled Dev、SWC 等，其同样有 Serverless 一键部署平台帮助开发者快速完成部署。口号是 &quot;Let’s Make Web Faster&quot;</p>\n</li>\n<li>\n<p>MODERN.js</p>\n<p>字节跳动 Web Infra 团队研发的全栈开发框架，内置了很多开箱即用的能力与最佳实践，可以减少很多调研选择工具的时间。</p>\n</li>\n<li>\n<p>Blitz</p>\n<p>无 API 思想的全栈开发框架，开发过程中无需写 API 调用与 CRUD 逻辑，适合前后端紧密结合的小团队项目。</p>\n</li>\n</ol>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</li>\n<li>React<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnLw==\"> 官网</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jYWxlbmRhci5wZXJmcGxhbmV0LmNvbS8yMDEzL2RpZmYv\">React’s diff algorithm</span></li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "React"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/18/%E5%89%8D%E7%AB%AF%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E7%9F%A5%E8%AF%86-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/18/%E5%89%8D%E7%AB%AF%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E7%9F%A5%E8%AF%86-%E7%AC%94%E8%AE%B0/",
            "title": "前端必须知道的开发调试知识 - 笔记",
            "date_published": "2022-01-18T12:02:44.000Z",
            "content_html": "<blockquote>\n<p>Bug 与 Debug：Bug 的产生、前端 Debug 特点</p>\n<p>Chrome 的 DevTools</p>\n<p>移动端 H5 调试：真机调试、代理工具调试</p>\n<p>开发调试技巧</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"前端必须知道的开发调试知识-笔记\"><a class=\"anchor\" href=\"#前端必须知道的开发调试知识-笔记\">#</a> 前端必须知道的开发调试知识 - 笔记</h1>\n<h2 id=\"bug与debug\"><a class=\"anchor\" href=\"#bug与debug\">#</a> Bug 与 Debug</h2>\n<h3 id=\"bug的产生\"><a class=\"anchor\" href=\"#bug的产生\">#</a> Bug 的产生</h3>\n<p>这一切都要从一只虫子 (bug) 说起，最早的计算机故障就是由一只飞蛾引起的。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117140255844.png\" alt=\"image-20220117140255844\"></p>\n<h3 id=\"前端debug特点\"><a class=\"anchor\" href=\"#前端debug特点\">#</a> 前端 Debug 特点</h3>\n<ul>\n<li>多平台：浏览器、Hybrid、Node.js、小程序、桌面应用等</li>\n<li>多环境：本地开发环境、线上环境</li>\n<li>多工具：Chrome DevTooles、Charles、Spy-Debugger、Whistle、vConsole 等</li>\n<li>多技巧：Console、BreakPoint、SourceMap、代理等</li>\n</ul>\n<h2 id=\"chrome的devtools\"><a class=\"anchor\" href=\"#chrome的devtools\">#</a> Chrome 的 DevTools</h2>\n<blockquote>\n<p>我录过一期 Chrome 调试方法的视频，有兴趣也可以看看 -&gt; <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW00NHkxWTdtZA==\">link</span></p>\n</blockquote>\n<h3 id=\"elementsdom树-动态修改元素与样式\"><a class=\"anchor\" href=\"#elementsdom树-动态修改元素与样式\">#</a> Elements—DOM 树 动态修改元素与样式</h3>\n<ul>\n<li>\n<p>点击.cls 开启动态修改元素的 class</p>\n</li>\n<li>\n<p>输入字符串可以动态的给元素添加类名</p>\n</li>\n<li>\n<p>勾选 / 取消类名可以动态的查看类名生效效果</p>\n</li>\n<li>\n<p>点击具体的样式值（字号、颜色、宽度高度等) 可以进行编辑，浏览器内容区域实时预览</p>\n</li>\n<li>\n<p>Computed 下点击样式里的箭头可以跳转到 styles 面板中的 css 规则</p>\n</li>\n<li>\n<p>可以使用 2 种方式强制激活伪类：</p>\n<p>选中具有伪类的元素，点击:hov；</p>\n<p>DOM 树右键菜单．选择 Force State</p>\n</li>\n</ul>\n<h3 id=\"console控制台\"><a class=\"anchor\" href=\"#console控制台\">#</a> Console— 控制台</h3>\n<p>在这个面板中可以直接写入 &amp; 运行单 / 多行 js 代码</p>\n<p>左侧可以选择警告等级，对日志进行分类查看</p>\n<p>Console 相关方法：</p>\n<ul>\n<li><code>console.log</code></li>\n<li><code>console.warn</code></li>\n<li><code>console.error</code></li>\n<li><code>console.debug</code></li>\n<li><code>console.info</code></li>\n</ul>\n<p>小技巧：<strong>不同类型的数据</strong>从 console 中打印出的<strong>颜色也不相同</strong>，可以借此判断数据类型</p>\n<p>上面的都是用于区分警告等级，主要区别就在于显示颜色不同，而还有一种日志方法，可以具像化的展示 JSON 和数组数据，方便调试：</p>\n<ul>\n<li><code>console.table</code></li>\n</ul>\n<p>另外，console 打印的日志还可以自定义 css 样式：</p>\n<ul>\n<li>通过占位符给日志添加样式，突出重要的信息</li>\n<li>% s：字符串占位符</li>\n<li>% o：对象占位符</li>\n<li>% c：样式占位符</li>\n<li>% d：数字占位符</li>\n</ul>\n<p>例如：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"%s %o,%c%s\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span> <span class=\"token string\">'tome'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'font-size: 24px; color: red'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Welcome to bytedance!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>最后还有一个比较少用的方法，用于展示 HTML 节点的 DOM 对象：</p>\n<ul>\n<li><code>console.dir</code></li>\n</ul>\n<h3 id=\"sources源码\"><a class=\"anchor\" href=\"#sources源码\">#</a> Sources— 源码</h3>\n<p>调试器使用：</p>\n<ul>\n<li>使用关键字 debugger 或代码预览区域的行号可以设置断点</li>\n<li>执行到断点处时代码暂停执行</li>\n<li>展开 Breakpoints 列表可以查看断点列表，勾选 / 取消可以激活 / 禁用对应断点</li>\n<li>暂停状态下，鼠标 hover 变量可以查看变量的值</li>\n<li>在调试器 Watch 右侧点击＋可以添加对变量的监控，查看该变量的值</li>\n<li>展开 Scope 可以查看作用域列表 (包含闭包)</li>\n<li>展开 Call Stack 可以查看当前 JavaScript 代码的调用栈</li>\n</ul>\n<p>前端代码天生具有 &quot;开源&quot; 属性，出于安全考虑，JavaScript 代码在上线时通常会被压缩，压缩后的代码只有一行，变量使用’a’.'b’等替换，整体变得不可阅读。</p>\n<p>那么压缩后的代码如何调试呢？</p>\n<p>答案是：通过在打包过程中生成<strong> SourceMap</strong> 文件来对压缩后的代码进行映射，从而可以在调试时还原源码</p>\n<p>SourceMap： <code>mappings</code>  字段存储了源文件和 SourceMap 的映射</p>\n<ul>\n<li>英文，表示源码及压缩代码的位置关联</li>\n<li>逗号，分隔一行代码中的内容。</li>\n<li>分号，代表换行。之所以没有显示分号是因为压缩后的代码就只有一行。</li>\n</ul>\n<h3 id=\"performance性能\"><a class=\"anchor\" href=\"#performance性能\">#</a> Performance— 性能</h3>\n<p>比较复杂，主要用于高级性能分析</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117144730077.png\" alt=\"image-20220117144730077\"></p>\n<h3 id=\"network网络请求\"><a class=\"anchor\" href=\"#network网络请求\">#</a> Network— 网络请求</h3>\n<p>用于查看、筛选各类网络请求，查看请求的详情信息，请求发出堆栈，请求时间栈等等</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117144903372.png\" alt=\"image-20220117144903372\"></p>\n<h3 id=\"application\"><a class=\"anchor\" href=\"#application\">#</a> Application</h3>\n<p>Application 面板展示与本地存储相关的信息</p>\n<ul>\n<li>Local Storage</li>\n<li>Session Storage</li>\n<li>IndexedDB</li>\n<li>Web SQL</li>\n<li>Cookie</li>\n</ul>\n<p>通过此面板可以清除网站缓存、本地存储、Cookie 等</p>\n<h2 id=\"移动端h5调试\"><a class=\"anchor\" href=\"#移动端h5调试\">#</a> 移动端 H5 调试</h2>\n<h3 id=\"真机调试\"><a class=\"anchor\" href=\"#真机调试\">#</a> 真机调试</h3>\n<h4 id=\"ios\"><a class=\"anchor\" href=\"#ios\">#</a> IOS</h4>\n<ol>\n<li>\n<p>使用 Lightning 数据线将 iPhone 与 Mac 相连</p>\n</li>\n<li>\n<p>iPhone 开启 Web 检查器（设置→Safari -&gt; 高级 -→&gt; 开启 Web 检查器)</p>\n</li>\n<li>\n<p>iPhone 使用 Safari 浏览器打开要调试的页面</p>\n</li>\n<li>\n<p>Mac 打开 Safari 浏览器调试 (菜单栏→&gt; 开发 - iPhone 设备名 -→选择调试页面)</p>\n</li>\n<li>\n<p>在弹出的 <code>Safari Developer Tools</code>  中调试</p>\n</li>\n<li>\n<p>Tips：没有 iPhone 设备可以在 Mac AppStore 安装 Xcode 使用其内置的 ios 模拟器</p>\n</li>\n</ol>\n<h4 id=\"android\"><a class=\"anchor\" href=\"#android\">#</a> Android</h4>\n<ol>\n<li>使用 USB 数据线将手机与电脑相连</li>\n<li>手机进入开发者模式。勾选 <code>USB调试</code> 。并允许调试</li>\n<li>电脑打开 Chrome 浏览器，在地址栏输入： <code>chrome://inspect/#devices</code>  并勾选 <code>Discover USB devices</code>  选项</li>\n<li>手机允许远程调试，并访问调试页面</li>\n<li>电脑点击 <code>inspect</code>  按钮</li>\n<li>进入调试界面</li>\n</ol>\n<h3 id=\"代理工具调试\"><a class=\"anchor\" href=\"#代理工具调试\">#</a> 代理工具调试</h3>\n<p>原理:</p>\n<ul>\n<li>电脑作为代理服务器</li>\n<li>手机通过 HTTP 代理连接到电脑</li>\n<li>手机上的请求都经过代理服务器</li>\n</ul>\n<p>以 Charles 为例:</p>\n<ol>\n<li>安装 Charles</li>\n<li>查看电脑 IP 和端口</li>\n<li>将 IP、端口号填入手机 HTTP 代理</li>\n<li>Charles 允许授权</li>\n<li>使用 SwitchHosts! 软件给 Mac 电脑配 Hosts</li>\n<li>手机访问开发环境页面</li>\n</ol>\n<p>常用工具：</p>\n<ul>\n<li>Charles：适合查看、控制网络请求、分析数据</li>\n<li>Fiddler：与 Charles 类似，适合 Windows 平台</li>\n<li>spy-debugger：远程调试手机页面、抓包</li>\n<li>Whistle：基于 Node 实现的跨平台 Web 调试代理工具</li>\n</ul>\n<h2 id=\"开发调试技巧\"><a class=\"anchor\" href=\"#开发调试技巧\">#</a> 开发调试技巧</h2>\n<h4 id=\"chrome的devtools-2\"><a class=\"anchor\" href=\"#chrome的devtools-2\">#</a> Chrome 的 DevTools</h4>\n<ol>\n<li>Source-&gt;override：通过开启此功能，可以使得在 DevTools 中的所有更改（DOM、CSS、JS）持久化，并可以查看与原文件的差异（类似 git）</li>\n<li>CORS (跨域) 问题：通过 Whistle 开启代理，使用代理对真实请求地址进行封装和转发，让浏览器请求同源地址，代理转发到真实地址</li>\n<li>启用本地 SourceMap：将远程不存在的 SouceMap 不存在时，使用代理，将请求代理到本地的 SourceMap 文件，便可以进行线上调试</li>\n<li>小黄鸭调试大法（🐤）：传说中程序大师随身携带一只小黄鸭，在调试代码的时候会在桌上放上这只小黄鸭，然后详细地向鸭子解释每行代码，然后很快就将问题定位修复了。 -《程序员修炼之道》</li>\n</ol>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>\n<p>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mb3J1bS5qdWVqaW4uY24veW91dGhjYW1w\">青训营</span>课程</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">MDN</span> 中文文档</p>\n</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/18/Web%E6%A0%87%E5%87%86%E4%B8%8E%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/18/Web%E6%A0%87%E5%87%86%E4%B8%8E%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-%E7%AC%94%E8%AE%B0/",
            "title": "Web标准与前端开发 - 笔记",
            "date_published": "2022-01-18T11:16:05.000Z",
            "content_html": "<blockquote>\n<p>关于前端开发：起源、架构、变迁、前端应用领域、语言、框架、工具、前端学习路线</p>\n<p>关于 Web 标准：标准组织、W3C 及 Ecma 会员、W3C 规范制定流程、如何参与标准制定</p>\n<p>一些问题和回答</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"web标准与前端开发-笔记\"><a class=\"anchor\" href=\"#web标准与前端开发-笔记\">#</a> Web 标准与前端开发 - 笔记</h1>\n<h2 id=\"关于前端开发\"><a class=\"anchor\" href=\"#关于前端开发\">#</a> 关于前端开发</h2>\n<h3 id=\"起源\"><a class=\"anchor\" href=\"#起源\">#</a> 起源</h3>\n<p>在 1989 年，在 CERN 工作的<em> Tim Berners-Lee</em> 写了一个关于信息管理的建议<strong>《Informational Management: A Proposal》</strong>，提及基于超文本来构建文档网络的想法，这份文档被公认为 Web 的起源。</p>\n<h3 id=\"架构\"><a class=\"anchor\" href=\"#架构\">#</a> 架构</h3>\n<p>直到现在，很多人也不是很清楚 “上网” 指的是上什么网。“上网” 实际上指的就是接入<strong> Internet</strong>，而我们平时使用搜索引擎、访问网页、使用网络聊天应用都是指使用<strong> Web</strong>。前者相当于一个高速公路，提供各种底层的数据传输协议、架构等，后者相当于是一个非常大的物流公司，提供具体服务，比如说：在浏览器中输入网址、访问网页，实际上就是访问远程服务器的<strong> 80</strong>(<em>HTTP</em>)/<strong>443</strong>(<em>HTPPS</em>) 端口，而还有其他的服务（比如收发邮件）则使用的是另外的对应端口。</p>\n<p>1989 年诞生时，Web 由三种技术构成：<strong>HTML、HTTP、URL</strong>，而 CSS 和 JavaScript 是几年之后（1995 年前后）才出现的。</p>\n<p><strong>HTML</strong> 是超文本标记语言，用来做 Document；</p>\n<p><strong>HTTP</strong> 是超文本传输协议，用来传输 Document，在 TCP/IP 之上，封装的是 HTTP 这个资源的数据包；</p>\n<p><strong>URL</strong> 是统一资源定位符，在 HTTP 的上下文中，一般也被称为网址，在浏览器的地址栏中显示，例如 <code>https://developer.mozilla.org</code> 。</p>\n<p>客户端（浏览器）因为是直接面向用户，所以就是前端，而服务器因为用户不能直接接触到，所以就成了后端。</p>\n<h3 id=\"变迁\"><a class=\"anchor\" href=\"#变迁\">#</a> 变迁</h3>\n<ol>\n<li>\n<p>1989-2004（只读时代）：</p>\n<p><strong>HTML/CSS/JavaScript</strong></p>\n<ul>\n<li>单项发布</li>\n<li>静态只读</li>\n<li>链接跳转</li>\n<li>刷新页面</li>\n<li>表格对齐元素</li>\n<li>CGI</li>\n</ul>\n<p>在这个时代中，浏览器更像是一个阅读器，页面的更新必须依靠浏览器的刷新（重新向服务器发送一次请求，获取 HTML）进行页面的整体替换。</p>\n</li>\n<li>\n<p>2005-2010（体验时代）：</p>\n<p><strong>Ajax/Web API/jQuery</strong></p>\n<ul>\n<li>动态交互</li>\n<li>社交媒体</li>\n<li>用户生成内容（UGC）</li>\n<li>单页应用（SPA）</li>\n<li>jQuery</li>\n<li>YUI</li>\n</ul>\n<p>这个时代的标志就是 Ajax，浏览器可以不用刷新网页，通过 JS 的对象在后台就能向服务器发送请求，局部更新页面，实现了 Web 从一个简单的页面到 Web App 的跨越。</p>\n</li>\n<li>\n<p>2010-2021（敏捷时代）：</p>\n<p><strong>Fetch/Node.js/Webpack</strong></p>\n<ul>\n<li>模块化</li>\n<li>组件化</li>\n<li>转译（transpiling）</li>\n<li>打包（bundling）</li>\n<li>React&amp;Vue</li>\n</ul>\n<p>这个时代是从 iPhone 的发布开始的，Web 逐渐开始跨向移动领域，用户体验越来越被重视，前端开始真正变成一个独立的工种（职业），得益于 Node.js 的问世，前端工程师也能够处理后端的工作了，为前端的规模化、敏捷化打下了基础</p>\n</li>\n</ol>\n<h3 id=\"前端应用领域\"><a class=\"anchor\" href=\"#前端应用领域\">#</a> 前端应用领域</h3>\n<ol>\n<li>ToB（To Business）：面向企业、大型组织 &amp; 机构\n<ul>\n<li>包括商业引擎、CRM、中后台管理面板等</li>\n</ul>\n</li>\n<li>ToC（To Customer）：面向终端客户 &amp; 消费者\n<ul>\n<li>包括门户网站、电商平台、在线教育、新闻资讯、生活娱乐平台等</li>\n</ul>\n</li>\n<li>ToD（To Developer）：面向开发者\n<ul>\n<li>包括面向开发者的平台、框架、工具、VSCode 等</li>\n</ul>\n</li>\n</ol>\n<p>Web 浏览器主要分为：</p>\n<ol>\n<li>桌面端：Chrome 内核（Chrome、Edge、Opera）、Firefox、Safari</li>\n<li>移动端：Android（WebView）、IOS（Safari）</li>\n</ol>\n<p>服务器技术主要有：</p>\n<ul>\n<li>Node.js</li>\n<li>Express.js</li>\n<li>koa</li>\n<li>Deno（基于 Rust 语言的新一代 js&amp;ts 运行时）</li>\n</ul>\n<p>终端和跨端技术主要有：</p>\n<ol>\n<li>命令行 / 终端（脚手架）：\n<ul>\n<li>Webpack CLI</li>\n<li>Bacel CLI</li>\n<li>React/Vue CLI</li>\n</ul>\n</li>\n<li>桌面跨端：\n<ul>\n<li>Electron</li>\n<li>NW.js</li>\n</ul>\n</li>\n<li>移动跨端：\n<ul>\n<li>React Native</li>\n<li>Flutter</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"语言-框架-工具\"><a class=\"anchor\" href=\"#语言-框架-工具\">#</a> 语言、框架、工具</h3>\n<p>浏览器语言有：</p>\n<ol>\n<li>HTML、CSS、JavaScript：在很长时间都是浏览器中只能使用的语言</li>\n<li>WebAssembly：2019 年成为标准，是一种类汇编的语言，可以由 C/C++/Rust/Kotlin 等语言编译而成，可以与 JavaScript 互操作、传递消息、共享内存，速度接近平台的<strong>原生</strong>速度</li>\n</ol>\n<p>常用框架和工具有：Node.js、koa、React、Vue、TypeScript、git、Babel、webpack、esbuild 等 *（在学习一个框架 / 工具时，可以去了解一下其作者，写这个框架 / 工具的初衷是什么，这样可以帮助更好的理解和学习）*</p>\n<h3 id=\"浏览器-网络-服务器\"><a class=\"anchor\" href=\"#浏览器-网络-服务器\">#</a> 浏览器、网络、服务器</h3>\n<p>推荐两篇文章：</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tLzc1dGVhbS93M2MvYmxvYi9tYXN0ZXIvYXJ0aWNsZXMvMjAxOTA2MDNfY25jdWNrb29fJUU2JUI3JUIxJUU1JTg1JUE1JUU3JTkwJTg2JUU4JUE3JUEzJUU3JThFJUIwJUU0JUJCJUEzJUU2JUI1JThGJUU4JUE3JTg4JUU1JTk5JUE4Lm1k\">深入理解现代浏览器</span>：告诉你在浏览器输入网址按回车之后，真正发生的事情</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9PdmVydmlldw==\">HTTP 概述 - MDN</span>：帮助你理解 HTTP 协议</li>\n</ul>\n<h3 id=\"前端学习路线\"><a class=\"anchor\" href=\"#前端学习路线\">#</a> 前端学习路线</h3>\n<p>路线图推荐：</p>\n<ul>\n<li>\n<p>中文：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9vYmp0dWJlLmdpdGh1Yi5pby9mcm9udC1lbmQtcm9hZG1hcC8jLw==\">ObjTube</span></p>\n</li>\n<li>\n<p>英文：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yb2FkbWFwLnNoL2Zyb250ZW5k\">RoadMap.sh</span></p>\n</li>\n</ul>\n<p><strong>学习永无止境，翻滚吧后浪！</strong></p>\n<h2 id=\"关于web标准\"><a class=\"anchor\" href=\"#关于web标准\">#</a> 关于 Web 标准</h2>\n<h3 id=\"标准组织\"><a class=\"anchor\" href=\"#标准组织\">#</a> 标准组织</h3>\n<ol>\n<li>\n<p><strong>W3C</strong>: <em>World Wide Web Consortium</em>（万维网联盟）</p>\n<p>制定了 HTML、CSS、DOM 相关标准</p>\n</li>\n<li>\n<p><strong>Ecma</strong>: <em>Ecma International</em>（Ecam 国际）</p>\n<p>制定了 JavaScript 相关的语言标准，如：ES5、ES6、ES2015、ES2016、ES2017、ES2018、ES2019、ES2020、ES2021</p>\n</li>\n<li>\n<p><strong>WHATWG</strong>: <em>Web Hypertext Application Technology Working Group</em>（Web 超文本应用技术工作组）</p>\n<p>制定了 DOM、Web API 相关标准</p>\n</li>\n<li>\n<p><strong>IETF</strong>: <em>Internet Engineering Task Force</em>（互联网工程任务组）</p>\n<p>制定了 HTTP 等基础通信协议标准</p>\n</li>\n</ol>\n<h3 id=\"w3c及ecma会员\"><a class=\"anchor\" href=\"#w3c及ecma会员\">#</a> W3C 及 Ecma 会员</h3>\n<ul>\n<li>\n<p>W3C 目前在全球有<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTWVtYmVyL0xpc3Q=\"> 457 家</span>会员，其中北航总部（中国区）会员<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY2hpbmF3M2Mub3JnL2NoaW5hLW1lbWJlcnMuaHRtbA==\"> 47 家</span></p>\n<p>全球很多著名互联网公司（特别是浏览器厂商）都是 W3C 会员，根据加入组织的年营业额来缴纳会费</p>\n</li>\n<li>\n<p>Ecma 的 AM（Associate Member）会员目前有 18 家，中国公司有字节跳动、360、阿里、华为、腾讯等<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9hYm91dC1lY21hL21lbWJlcnMv\"> 5 家</span></p>\n<p>Ecma 的会员分为 AM 和 OM，OM 比 AM 多了一项投票权，可以决定一些 Ecma 的重大事务（包括是否批准新会员的加入），AM 的会费一年大概 250,000RMB 左右</p>\n</li>\n</ul>\n<h3 id=\"w3c规范制定流程\"><a class=\"anchor\" href=\"#w3c规范制定流程\">#</a> W3C 规范<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudzMub3JnLzIwMjAvUHJvY2Vzcy0yMDIwMDkxNS8=\">制定流程</span></h3>\n<ol>\n<li>WD（Worker Draft）</li>\n<li>CR（Candidate Recommendation）</li>\n<li>PR（Proposed Recommendation）</li>\n<li>REC（Recommendation）</li>\n</ol>\n<h4 id=\"contribute\"><a class=\"anchor\" href=\"#contribute\">#</a> Contribute</h4>\n<p>Explainer demo</p>\n<p>Find the right community/group</p>\n<p>Web IDL for APIs link</p>\n<p>Step-by-step algorithms</p>\n<p>GitHub, Markdown, respec, bikeshed, etc.</p>\n<p>Get an early review w3ctag/design-reviews</p>\n<p>Write web-platform-tests (WPT) tests</p>\n<h3 id=\"ecma-tc39规范制定流程\"><a class=\"anchor\" href=\"#ecma-tc39规范制定流程\">#</a> Ecma TC39 规范<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9wdWJsaWNhdGlvbnMtYW5kLXN0YW5kYXJkcy9zdGFuZGFyZHMvZWNtYS0yNjIv\">制定流程</span></h3>\n<ol>\n<li>STAGE 0（strawman）：以任何形式提交的想法</li>\n<li>STAGE 1（proposal）：正式的建议 &amp; 文档</li>\n<li>STAGE 2（draft）：有语法 &amp; 语义相关的描述</li>\n<li>STAGE 3（candidate）：规范文本完备且至少有两个实现</li>\n<li>STAGE 4（finished）：成为标准</li>\n</ol>\n<h4 id=\"contribute-2\"><a class=\"anchor\" href=\"#contribute-2\">#</a> Contribute</h4>\n<p>Championing a proposal at TC39</p>\n<p>How to write a good explainer</p>\n<p>Presenting a Proposal to TC39</p>\n<p>Reading a proposal draft</p>\n<p>Stage 3 Proposal Reviews</p>\n<p>How to experiment with a proposal before Stage 4</p>\n<p>Implementing and shipping TC39 proposals</p>\n<h3 id=\"如何参与标准制定\"><a class=\"anchor\" href=\"#如何参与标准制定\">#</a> 如何参与标准制定</h3>\n<h4 id=\"w3c会议\"><a class=\"anchor\" href=\"#w3c会议\">#</a> W3C 会议</h4>\n<p>W3C Technical Plenary / Advisory Committee Meetings Week（简称 TPAC) 是 W3C 一年一度的全球技术大会，汇集 W3C 各工作小组成员 (工作组、兴趣组、社区组等)、咨询委员会 (AB)、技术架构组 (TAG)、会员单位代表 (AC)、公众特邀专家以及全球社区成员，通过为期 1-2 周的集中互动交流，深入探讨未来开放 Web 平台技术方向。</p>\n<h4 id=\"参加w3c会议\"><a class=\"anchor\" href=\"#参加w3c会议\">#</a> 参加 W3C 会议</h4>\n<ol>\n<li>年度大会\n<ul>\n<li>AC（Advisory Committee）：每个会员出一个代表，每年定期开会，主要是事务性的会议，持续 2-3 天</li>\n<li>TPAC（Technical Plenary and Advisory Committee）：技术大会，对所有会员开放，持续一周</li>\n</ul>\n</li>\n<li>工作组会议\n<ul>\n<li>每月会议</li>\n<li>各种研讨会</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"参加emca会议\"><a class=\"anchor\" href=\"#参加emca会议\">#</a> 参加 Emca 会议</h4>\n<ol>\n<li>年度大会：GA（General Assembly），讨论重大事宜，投票通过每年的新会员申请</li>\n<li>TC39 会议：每 1-2 个月</li>\n</ol>\n<h2 id=\"一些问题\"><a class=\"anchor\" href=\"#一些问题\">#</a> 一些问题</h2>\n<h3 id=\"加入会员对公司有什么好处\"><a class=\"anchor\" href=\"#加入会员对公司有什么好处\">#</a> 加入会员对公司有什么好处？</h3>\n<p>加入会员对公司来说，有几个方面的好处：</p>\n<ol>\n<li>这些标准决定未来行业发展趋势，很多公司在做基础设施建设的时候，也会产出一些类似标准的方案，如果作为会员，就能够深入得到参与到工作组的讨论，进行对前景早期的交流，获取行业内部第一手的资料，对公司的发展 &amp; 部署都有帮助</li>\n<li>作为会员公司的员工，能够代表公司参加会议，接触到标准前沿，认识到行业内的大佬，对整个学习氛围都是很有帮助的</li>\n</ol>\n<h3 id=\"现在还要学jquery吗\"><a class=\"anchor\" href=\"#现在还要学jquery吗\">#</a> 现在还要学 jQuery 吗？</h3>\n<p>在大公司的项目里，基本见不到用 jQuery 的了</p>\n<p>对于技术发展不是那么快的公司，项目代码里可能还会用到 jQuery</p>\n<p>之前流行的原因是：早期很多浏览器的实现不一致，jQuery 解决了跨浏览器的兼容问题</p>\n<p>但是现在浏览器的发展趋同化，浏览器的多样性实际上在减少，兼容性的问题越来越少，jQuery 就没那么重要了；相反，组件式开发框架 React、Vue 和函数式实用工具库变得比较受欢迎</p>\n<p>所以 jQuery 没有必要花太多时间去学，如果感兴趣可以学一学</p>\n<h3 id=\"nodejs现在在大公司的应用方向\"><a class=\"anchor\" href=\"#nodejs现在在大公司的应用方向\">#</a> Node.js 现在在大公司的应用方向？</h3>\n<p>由于前端工程师学习 Node.js 比较简单，所以应用还是比较广泛的，比如 ToB 和 ToD：</p>\n<ul>\n<li>BFF（Backend For Frontend）：在后端与前端之间的一个中间层，根据前端不断变化的应用，对后端接口进行进一步封装</li>\n<li>npm：大公司内部一般都有自己的 npm 仓库，npm 包（自研组件库等）都是用 Node.js 来写的</li>\n</ul>\n<h3 id=\"要先搞透js再学框架还是同时深入\"><a class=\"anchor\" href=\"#要先搞透js再学框架还是同时深入\">#</a> 要先搞透 js 再学框架还是同时深入？</h3>\n<p>框架和 js 的学习是相辅相成的，框架实际上是一种更高层次的抽象，对框架的实践 &amp; 运用也能使你对 js 架构、设计模式层面有更深入的理解</p>\n<h3 id=\"元宇宙跟前端有关系吗\"><a class=\"anchor\" href=\"#元宇宙跟前端有关系吗\">#</a> 元宇宙跟前端有关系吗？</h3>\n<p>有，元宇宙平台可以给前端提供 API 接口，从而使开发者可以在元宇宙平台中开发丰富多样的应用</p>\n<h3 id=\"webassembly是前端人员去做吗是否意味着前端要学习crustgo\"><a class=\"anchor\" href=\"#webassembly是前端人员去做吗是否意味着前端要学习crustgo\">#</a> WebAssembly 是前端人员去做吗？是否意味着前端要学习 c++/rust/go？</h3>\n<p>WebAssembly 实际上是两种开发生态的融合，为了解决前端的计算量 &amp; 性能问题，JavaScript 的性能是毫秒级的，Rust/Go 等原生语言的性能是纳秒级的</p>\n<p>任务层面：前端开发者可以了解怎么把原生的应用转换成 WebAssembly，以及其完善、扩展</p>\n<p>提高层面：作为前端开发者也应该了解底层的系统编程语言，Rust/Go 都是很值得去学习的，以便了解系统底层原理</p>\n<h3 id=\"怎么看待低代码平台\"><a class=\"anchor\" href=\"#怎么看待低代码平台\">#</a> 怎么看待低代码平台？</h3>\n<p>低代码平台对前端来说是种机遇，可以为前端提供很多工作岗位，但同时也是一种挑战，需要很多新的算法、技术解决方案</p>\n<h3 id=\"webassembly用的多吗在字节跳动应用如何\"><a class=\"anchor\" href=\"#webassembly用的多吗在字节跳动应用如何\">#</a> WebAssembly 用的多吗？在字节跳动应用如何？</h3>\n<p>WebAssembly 在大公司应用的还是很多的，大公司对于解决应用性能的需求是十分迫切的，且也有相应的资源进行人才扩招和项目落地</p>\n<p>在规模不是太大的公司，对性能的需求不是特别高，就不会优先考虑</p>\n<h3 id=\"使用类似nest的nodejs后端框架在性能上会和spring-go写的后端差距很大吗\"><a class=\"anchor\" href=\"#使用类似nest的nodejs后端框架在性能上会和spring-go写的后端差距很大吗\">#</a> 使用类似 nest 的 Node.js 后端框架在性能上会和 spring、go 写的后端差距很大吗？</h3>\n<p>很大。建议看一下<span class=\"exturl\" data-url=\"aHR0cHM6Ly9lc2J1aWxkLmdpdGh1Yi5pby8=\"> esbuild</span> 的官网，esbuild 使用 go 语言编写，而 webpack 使用 Node.js 编写，其性能差异可达百倍。</p>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>\n<p>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">MDN</span> 中文文档</p>\n</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/17/%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BDJavaScript-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/17/%E5%A6%82%E4%BD%95%E5%86%99%E5%A5%BDJavaScript-%E7%AC%94%E8%AE%B0/",
            "title": "如何写好JavaScript - 笔记",
            "date_published": "2022-01-17T12:31:19.000Z",
            "content_html": "<blockquote>\n<p>什么是好的 JS 代码：各司其职、组件封装、过程抽象</p>\n<p>使用 JS 解决实际问题：如何评价一段代码的好坏、写代码最应关注什么</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"如何写好javascript-笔记\"><a class=\"anchor\" href=\"#如何写好javascript-笔记\">#</a> 如何写好 JavaScript - 笔记</h1>\n<h2 id=\"各司其职\"><a class=\"anchor\" href=\"#各司其职\">#</a> 各司其职</h2>\n<p>我们知道，前端 web 对于 HTML、CSS、JavaScript 的分工都很明确。</p>\n<p>HTML 负责页面骨架、CSS 负责页面的渲染、JavaScript 负责页面的行为。</p>\n<h3 id=\"一个\"><a class=\"anchor\" href=\"#一个\">#</a> 一个🌰</h3>\n<p>对于一个切换页面深色模式切换的需求，如果要用 JS，该怎么实现？</p>\n<p>很容易想到：</p>\n<ul>\n<li>\n<p>使用 button，监听点击事件，更改页面背景颜色和文字颜色</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'modeBtn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>btn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span> body <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">===</span> <span class=\"token string\">'🌞'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">'black'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'🌜'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        body<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> <span class=\"token string\">'black '</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'🌞'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ul>\n<p>但是这个版本的实现<strong>语义不清</strong>，如果让别人来阅读这段代码，可能一时间不知道是在实现什么功能。</p>\n<p>于是，我们想出优化方案：</p>\n<ul>\n<li>\n<p>同样使用 button，监听点击事件，但这次直接修改容器的 class，通过在 css 中写的 class 样式修改页面表现</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'modeBtn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>btn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span> body <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">===</span> <span class=\"token string\">'night'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'night'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ul>\n<p>很明显，这个版本已经比上个版本好多了，我们一眼就能看出来这段代码是在做什么。</p>\n<p>但实际上，我们还有一种更好的解决方案 ——<strong> 只使用 CSS 实现</strong>：</p>\n<ul>\n<li>使用 <code>checkbox</code> + <code>:checked</code>  伪类 + 兄弟元素选择器来实现</li>\n</ul>\n<p>那么，实际上来说，<strong>表现层的工作就让负责表现层的 CSS 来做</strong>才是最好的</p>\n<p>总结下来就是以下几点：</p>\n<ul>\n<li>HTML/CSS/JS 各司其责</li>\n<li>应当避免不必要的由 JS 直接操作样式</li>\n<li>可以用 class 来表示状态</li>\n<li>纯展示类交互寻求零 JS 方案</li>\n</ul>\n<h2 id=\"组件封装\"><a class=\"anchor\" href=\"#组件封装\">#</a> 组件封装</h2>\n<p>组件是指 Web 页面上抽出来一个个包含模版（HTML)、功能 (JS）和样式 (CSS) 的单元。</p>\n<p>好的组件具备封装性、正确性、扩展性、复用性。</p>\n<h3 id=\"如何实现一个轮播图组件\"><a class=\"anchor\" href=\"#如何实现一个轮播图组件\">#</a> 如何实现一个轮播图组件？</h3>\n<ul>\n<li>\n<p>HTML 结构设计</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my-slider<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider-list__item--selected<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://p5.ssl.qhimg.com/t0119c74624763dd070.png<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider-list__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider-list__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider-list__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>CSS 展现效果</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">#my-slider</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 790px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token selector\">.slider-list ul</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token selector\">.slider-list__item,</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>.slider-list__item--selected</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> opacity 1s<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token selector\">.slider-list__item--selected</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> opacity 1s<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>行为设计：API</p>\n<p>注意：API 设计应保证原子操作，职责单一，满足灵活性。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117201004121.png\" alt=\"image-20220117201004121\"></p>\n</li>\n<li>\n<p>行为设计：Event 控制流</p>\n<p>使用自定义事件来解耦</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__next<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__previous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__control<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__control-buttons--selected<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__control-buttons<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__control-buttons<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slide-list__control-buttons<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> detail <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>index<span class=\"token operator\">:</span> idx<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> event <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'slide'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>bubbles<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> detail<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n<p>总的来说，就是要遵循以下基本方法：</p>\n<ul>\n<li>结构设计</li>\n<li>展现效果</li>\n<li>行为设计\n<ul>\n<li>API（功能）</li>\n<li>Event（控制流）</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"优化\"><a class=\"anchor\" href=\"#优化\">#</a> 优化</h3>\n<h4 id=\"解耦\"><a class=\"anchor\" href=\"#解耦\">#</a> 解耦</h4>\n<ul>\n<li>将控制元素抽取成插件</li>\n<li>插件与组件之间通过<strong>依赖注入</strong>方式建立联系</li>\n<li>将 HTML 模板化，更易于扩展</li>\n</ul>\n<h4 id=\"抽象\"><a class=\"anchor\" href=\"#抽象\">#</a> 抽象</h4>\n<ul>\n<li>将通用的组件模型抽象出来，形成组件框架</li>\n</ul>\n<h2 id=\"过程抽象\"><a class=\"anchor\" href=\"#过程抽象\">#</a> 过程抽象</h2>\n<h3 id=\"什么是过程抽象\"><a class=\"anchor\" href=\"#什么是过程抽象\">#</a> 什么是过程抽象？</h3>\n<ul>\n<li>用来处理局部细节控制的一些方法</li>\n<li>函数式编程思想的基础应用</li>\n</ul>\n<h3 id=\"过程抽象有什么好处\"><a class=\"anchor\" href=\"#过程抽象有什么好处\">#</a> 过程抽象有什么好处？</h3>\n<p><strong>一个🌰：操作次数限制</strong></p>\n<p>假如有一个需求，要求对某个函数的调用设置次数限制，我们可以直接在这个函数里面写上限制代码。</p>\n<p>但是实际上，这个需求是可以通用的，如果对每一个函数都是有需求时更改内部代码，未免显得有点重复。</p>\n<p>所以我们实际上可以通过一个代理函数 (高阶函数)，写一个新的函数，接收一个函数参数，对其封装，并返回封装好的新函数，这样我们就完美地实现了这个需求。</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">once</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            fn <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"常用高阶函数\"><a class=\"anchor\" href=\"#常用高阶函数\">#</a> 常用高阶函数</h3>\n<ul>\n<li>Function Once：只能执行一次</li>\n<li>Function Throttle：节流，每隔一段时间可以调用一次</li>\n<li>Function Debounce：防抖，停下来一段时间后再调用</li>\n<li>Function Consumer：缓存队列，延迟执行</li>\n<li>Function Iteraticve：让函数支持批量操作</li>\n</ul>\n<h3 id=\"为什么要使用高阶函数\"><a class=\"anchor\" href=\"#为什么要使用高阶函数\">#</a> 为什么要使用高阶函数？</h3>\n<p>函数分为两种，纯函数和非纯函数。</p>\n<p>纯函数的意思是：任何时候，以相同的参数调用纯函数，输出也是相同的</p>\n<p>那么其实非纯函数的意思就是相对的：非纯函数依赖外部环境，当外部环境参数改变时，即使用相同的参数调用，输出也会改变</p>\n<p>显而易见，纯函数方便于后期的统一测试，而非纯函数还需要保证外部环境每次要统一（有时很难做到或很麻烦），所以现在更倾向于使用纯函数</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 纯函数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 非纯函数</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res <span class=\"token operator\">+=</span> value<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>当使用高阶函数时，由于高阶函数一般都是纯函数，这样的话，由高阶函数封装的函数在测试时，就只需要测试原始函数即可，降低了测试成本</p>\n<h3 id=\"编程范式\"><a class=\"anchor\" href=\"#编程范式\">#</a> 编程范式</h3>\n<p>JavaScript 是一种既可以使用命令式又可以使用声明式的编程语言，例如：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 命令式</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">===</span> <span class=\"token string\">'on'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'on'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 声明式</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">toggleBuilder</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>actions</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">let</span> action <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        actions<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">action</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">let</span> toggle <span class=\"token operator\">=</span> <span class=\"token function\">toggleBuilder</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'on'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>那么我们应该使用什么编程范式呢？</p>\n<p>思考这样一个问题，对于状态切换这个需求，如果我们需要调整状态的数量、先后，那么：</p>\n<ul>\n<li>\n<p>对于命令式的 <code>toggle</code>  来说，我们需要直接修改这个函数，当需求频繁变化时，就会即为耗费人力和时间；</p>\n</li>\n<li>\n<p>而对于声明式的 <code>toggleBuilder</code>  来说，我们只要在构建 <code>toggle</code>  时，调整传入的行为参数即可，既简单又直观。</p>\n</li>\n</ul>\n<p>发现了吗，声明式的函数要优于命令式的函数</p>\n<p>但是在实际开发中，到底是使用哪种范式，还需要具体问题具体分析，在两种范式之间选择最适合的，才是最好的</p>\n<h2 id=\"使用js解决实际问题\"><a class=\"anchor\" href=\"#使用js解决实际问题\">#</a> 使用 JS 解决实际问题</h2>\n<h3 id=\"如何评价一段代码的好坏\"><a class=\"anchor\" href=\"#如何评价一段代码的好坏\">#</a> 如何评价一段代码的好坏</h3>\n<p>先来看一段代码：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">isUnitMatrix2d</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> m<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这段代码好不好？为什么？</p>\n<p>其实有两种观点：</p>\n<p>乍一看，对于简洁度和可读性来说，不好，明明可以使用更优雅的迭代来解决，却要用这么笨的方法</p>\n<p>但是，其实这个函数的效率极高，如果这个函数需要在 <code>requestAnimationFrame</code>  中被高频调用，那么这种写法也不失为一种好的解决方案</p>\n<h3 id=\"写代码最应关注什么\"><a class=\"anchor\" href=\"#写代码最应关注什么\">#</a> 写代码最应关注什么？</h3>\n<p><strong>风格 vs 效率</strong></p>\n<p>实际上我们应该根据使用场景来判断，对于效率优先的情况下，肯定要先考虑实现的效率问题，而如果多人协作开发和效率问题起冲突，那么我们就要在这两者之间做权衡了</p>\n<p>所以其实没有绝对的判断代码好坏的标准，<strong>过度的优化、过度的设计</strong>难免会让理解成本成倍增加，所以一切都要从实际出发，结合实际考虑</p>\n<p>抽象程度越高，可复用性就越高，同时理解成本也会越高</p>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>\n<p>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly9mb3J1bS5qdWVqaW4uY24veW91dGhjYW1w\">青训营</span>课程</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">MDN</span> 中文文档</p>\n</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "JavaScript"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/17/%E7%90%86%E8%A7%A3CSS-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/17/%E7%90%86%E8%A7%A3CSS-%E7%AC%94%E8%AE%B0/",
            "title": "理解CSS - 笔记",
            "date_published": "2022-01-16T19:31:45.000Z",
            "content_html": "<blockquote>\n<p>CSS 是什么、CSS 如何工作、CSS 的简单使用、CSS 的调试、CSS 盒模型、CSS 布局、学习 CSS 的方法等</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"理解css-笔记\"><a class=\"anchor\" href=\"#理解css-笔记\">#</a> 理解 CSS - 笔记</h1>\n<h2 id=\"css是什么\"><a class=\"anchor\" href=\"#css是什么\">#</a> CSS 是什么</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NT\">Cascading Style Sheets</span>：用来定义 HTML 元素的渲染样式</p>\n<p>基本代码如下：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">h1</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 14px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>在 html 页面中使用：</p>\n<ol>\n<li>外链，如： <code>&lt;link href=&quot;style.css&quot; /&gt;</code></li>\n<li>嵌入，如： <code>&lt;style&gt;h1 &#123; color: white; &#125;&lt;/style&gt;</code></li>\n<li>内联，如： <code>&lt;h1 style=&quot;color: white;&quot;&gt;Title&lt;/h1&gt;</code></li>\n</ol>\n<p>优先级逐级减小</p>\n<p>一般而言，<em>不太建议</em>使用内联样式</p>\n<h2 id=\"css如何工作\"><a class=\"anchor\" href=\"#css如何工作\">#</a> CSS 如何工作</h2>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117004456268.png\" alt=\"image-20220117004456268\"></p>\n<p>DOM 树 + CSS =&gt; 渲染树（最终展示的页面效果）</p>\n<h2 id=\"css简单使用\"><a class=\"anchor\" href=\"#css简单使用\">#</a> CSS 简单使用</h2>\n<h3 id=\"选择器\"><a class=\"anchor\" href=\"#选择器\">#</a> 选择器</h3>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL1VuaXZlcnNhbF9zZWxlY3RvcnM=\">通配选择器</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL1R5cGVfc2VsZWN0b3Jz\">标签选择器</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL0lEX3NlbGVjdG9ycw==\">id 选择器</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL0NsYXNzX3NlbGVjdG9ycw==\">类选择器</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL0F0dHJpYnV0ZV9zZWxlY3RvcnM=\">属性选择器</span></li>\n</ul>\n<h3 id=\"伪类伪元素\"><a class=\"anchor\" href=\"#伪类伪元素\">#</a> 伪类 &amp; 伪元素</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL1BzZXVkby1jbGFzc2Vz\">伪类</span>分两种，状态类伪类和结构类伪类。</p>\n<ul>\n<li>\n<p>状态类伪类：选择元素的不同状态的样式，比如 a:hover（鼠标覆盖时）、a:focus（获得焦点时）等</p>\n</li>\n<li>\n<p>结构类伪类：根据元素所处结构、位置等选择样式，比如 li:first-child（父元素中的第一个子元素）等</p>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL1BzZXVkby1lbGVtZW50cw==\">伪元素</span>常用的一般就两个， <code>::before</code>  和 <code>::after</code> ，都是用来向被选中的元素添加元素之外的装饰性内容（文字）等</p>\n<h3 id=\"组合\"><a class=\"anchor\" href=\"#组合\">#</a> 组合</h3>\n<p>选择器与选择器、选择器与伪类之间都可以进行组合，组合按照以下规则：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:center\">语法</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">直接组合</td>\n<td style=\"text-align:center\">AB</td>\n<td style=\"text-align:left\">条件 A 和 B 要同时满足</td>\n<td style=\"text-align:left\">a:hover</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">后代组合</td>\n<td style=\"text-align:center\">A B</td>\n<td style=\"text-align:left\">如果 B 为 A 的子孙，则选中 B</td>\n<td style=\"text-align:left\">ol li</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">亲子组合</td>\n<td style=\"text-align:center\">A &gt; B</td>\n<td style=\"text-align:left\">如果 B 为 A 的直接子元素，则选中 B</td>\n<td style=\"text-align:left\">section &gt; article</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">兄弟选择器</td>\n<td style=\"text-align:center\">A ~ B</td>\n<td style=\"text-align:left\">如果 B 在 A 后面并且 B 与 A 同级，则选中 B</td>\n<td style=\"text-align:left\">h2 ~ p</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">相邻选择器</td>\n<td style=\"text-align:center\">A + B</td>\n<td style=\"text-align:left\">如果 B<strong> 紧跟</strong> A 后面并且 B 与 A 同级，则选中 B</td>\n<td style=\"text-align:left\">img + p</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"选择器组\"><a class=\"anchor\" href=\"#选择器组\">#</a> 选择器组</h3>\n<p>当多个选择器使用相同样式时，可以用 <code>,</code>  将多个选择器隔开</p>\n<p>例如：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">h1, h2, h3, h4</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token selector\">a:link, input[type=\"text\"]</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid blue<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"css中的颜色表示\"><a class=\"anchor\" href=\"#css中的颜色表示\">#</a> CSS 中的颜色表示</h3>\n<p>详细内容见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL2NvbG9yX3ZhbHVl\"> &lt;color&gt;-MDN</span></p>\n<h4 id=\"rgb\"><a class=\"anchor\" href=\"#rgb\">#</a> RGB</h4>\n<p>R：Red，G：Green，B：Blue</p>\n<p>可以通过两种方式表示：</p>\n<ol>\n<li>带 <code>#</code> 号的十六进制数字，例如 <code>#FFAA00</code> ，其中 <code>FF</code>  表示红色大小， <code>AA</code>  表示绿色大小， <code>00</code>  表示蓝色大小</li>\n<li><code>rgb()</code>  函数，例如 <code>rgb(255, 100, 0)</code></li>\n</ol>\n<h4 id=\"hsl\"><a class=\"anchor\" href=\"#hsl\">#</a> HSL</h4>\n<p>H：Hue，S：Saturation，L：Lightness</p>\n<p>通过 <code>hsl()</code>  函数表示，例如 <code>hsl(180, 0.6, 0.9)</code></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117020416691.png\" alt=\"image-20220117020416691\"></p>\n<h4 id=\"关键字\"><a class=\"anchor\" href=\"#关键字\">#</a> 关键字</h4>\n<p>例如：red、blue、white、black 等等，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL2NvbG9yX3ZhbHVlIyVFOSVBMiU5QyVFOCU4OSVCMiVFNSU4NSVCMyVFOSU5NCVBRSVFNSVBRCU5Nw==\">详细列表</span></p>\n<h4 id=\"alpha透明度\"><a class=\"anchor\" href=\"#alpha透明度\">#</a> alpha 透明度</h4>\n<p>取值为 [0, 1] 之间，例如：</p>\n<ol>\n<li>#FFAA00 <code>A0</code> ， <code>A0</code>  就表示透明度</li>\n<li>rgb(255, 100, 0,  <code>0.5</code> ) 或 hsl (255, 100, 0,  <code>0.5</code> )， <code>0.5</code>  就表示透明度</li>\n</ol>\n<h3 id=\"css中的字体设置\"><a class=\"anchor\" href=\"#css中的字体设置\">#</a> CSS 中的字体设置</h3>\n<h4 id=\"字体-font-family\"><a class=\"anchor\" href=\"#字体-font-family\">#</a> 字体 font-family</h4>\n<p>通过具体字体名称或字体族指示要使用的字体，例如：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">h1</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> Megrim<span class=\"token punctuation\">,</span> Cursive<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>通过设置多种字体，特别是通用字体族，可以对不同平台 &amp; 系统不支持的字体做一个兜底，不会让页面显示效果大相径庭。</p>\n<p>字体族类型如下：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117005035921.png\" alt=\"image-20220117005035921\"></p>\n<p>font-family 使用建议：</p>\n<ul>\n<li>\n<p>字体列表最后写上通用字体族</p>\n</li>\n<li>\n<p>英文字体放在中文字体前面</p>\n</li>\n</ul>\n<p>使用 web-fonts：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token atrule\"><span class=\"token rule\">@font-face</span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> \"xxx<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>...<span class=\"token punctuation\">)</span></span> <span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'...'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"字体大小-font-size\"><a class=\"anchor\" href=\"#字体大小-font-size\">#</a> 字体大小 font-size</h4>\n<p>通过不同的单位可以设置字体显示的大小，例如：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">h1</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 2rem<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token selector\">p</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 24px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"字体样式-font-style\"><a class=\"anchor\" href=\"#字体样式-font-style\">#</a> 字体样式 font-style</h4>\n<p>通过关键字设置字体样式，例如：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span> italic<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"字体字重-font-weight\"><a class=\"anchor\" href=\"#字体字重-font-weight\">#</a> 字体字重 font-weight</h4>\n<p>通过关键字和具体数字设置字体的粗细程度，例如：</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 200<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 500<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 800<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>当字体不支持某种字重时，系统会选择最接近的另一种字重代替显示。</p>\n<h4 id=\"行高-line-height\"><a class=\"anchor\" href=\"#行高-line-height\">#</a> 行高 line-height</h4>\n<p>即每行文字的 baseline 的间距，可以用不带单位的数字表示行高为字体大小的数倍</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 1.6<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 32px<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"文本对齐方式-text-align\"><a class=\"anchor\" href=\"#文本对齐方式-text-align\">#</a> 文本对齐方式 text-align</h4>\n<p>使用 left、center、right、justify 关键词，控制容器内每一行文字相对容器的水平对齐方式</p>\n<h4 id=\"文字间距\"><a class=\"anchor\" href=\"#文字间距\">#</a> 文字间距</h4>\n<ul>\n<li>字母间距 letter-spacing</li>\n<li>单词间距 word-spacing</li>\n</ul>\n<h4 id=\"首行缩进-text-indent\"><a class=\"anchor\" href=\"#首行缩进-text-indent\">#</a> 首行缩进 text-indent</h4>\n<h4 id=\"文本修饰-text-decoration\"><a class=\"anchor\" href=\"#文本修饰-text-decoration\">#</a> 文本修饰 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL3RleHQtZGVjb3JhdGlvbg==\">text-decoration</span></h4>\n<h3 id=\"css中的其他重要属性\"><a class=\"anchor\" href=\"#css中的其他重要属性\">#</a> CSS 中的其他重要属性</h3>\n<h4 id=\"空白符表现形式-white-space\"><a class=\"anchor\" href=\"#空白符表现形式-white-space\">#</a> 空白符表现形式 white-space</h4>\n<p>使用 normal（默认选项）、nowarp、pre、pre-wrap、pre-line 关键词</p>\n<ul>\n<li>不保留连续空格：normal、nowarp、pre-line</li>\n<li>保留连续空格：pre、pre-warp</li>\n<li>自动换行：normal、pre-warp、pre-line（pre-line 是在 normal 的基础上保留了 html 中的换行符）</li>\n</ul>\n<h2 id=\"css如何调试\"><a class=\"anchor\" href=\"#css如何调试\">#</a> CSS 如何调试</h2>\n<p>使用浏览器自带的开发者工具 DevTools，快捷键<kbd>Ctrl+Shift+I</kbd>或<kbd>F12</kbd>（Windows）</p>\n<h3 id=\"选择器特异度优先级\"><a class=\"anchor\" href=\"#选择器特异度优先级\">#</a> 选择器<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9MZWFybi9DU1MvQnVpbGRpbmdfYmxvY2tzL0Nhc2NhZGVfYW5kX2luaGVyaXRhbmNlIyVFNCVCQyU5OCVFNSU4NSU4OCVFNyVCQSVBN18y\">特异度（优先级）</span></h3>\n<p>哪些规则能覆盖别的？</p>\n<p>规则的覆盖遵循以下原则：</p>\n<ol>\n<li>重要程度</li>\n<li>优先级</li>\n<li>资源顺序</li>\n</ol>\n<p>使用 <code>!important</code>  可以让某条规则强制生效（除非另一条规则也使用 <code>!important</code>  且具有更高优先级或者相同优先级但顺序更靠后）</p>\n<p>优先级的计算遵循以下规则：</p>\n<ol>\n<li><strong>千位</strong>： 如果声明在 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes#attr-style\"> <code>style</code> </a> 的属性（内联样式）则该位得一分。</li>\n<li><strong>百位</strong>： 选择器中包含<strong> ID 选择器</strong>则该位得一分。</li>\n<li><strong>十位</strong>： 选择器中包含类<strong>选择器、属性选择器或者伪类</strong>则该位得一分。</li>\n<li><strong>个位</strong>：选择器中包含<strong>元素、伪元素选择器</strong>则该位得一分。</li>\n<li>计算时不允许进位，比如 100 个<strong>十位</strong>还是小于 1 个<strong>百位</strong></li>\n</ol>\n<p>当优先级相同时，位置靠后的规则生效</p>\n<h3 id=\"属性继承\"><a class=\"anchor\" href=\"#属性继承\">#</a> 属性继承</h3>\n<p>某些属性会自动继承其父元素的<strong>计算值</strong> <em>(Computed Value)</em>，除非显示指定一个值。</p>\n<p>一般而言，和文字相关的属性自动继承，和盒模型相关的属性不会自动继承。</p>\n<p>同时，CSS 为每个属性都提供了一个通用的值 <code>inherit</code>  用于从父元素继承该属性值。</p>\n<h3 id=\"属性初始值\"><a class=\"anchor\" href=\"#属性初始值\">#</a> 属性初始值</h3>\n<p>在 CSS 中，每个元素都拥有自己的初始值，并且提供了一个通用的值 <code>initial</code>  用于还原为属性值为其初始值。</p>\n<h3 id=\"unset值\"><a class=\"anchor\" href=\"#unset值\">#</a> unset 值</h3>\n<p>在 CSS 中，还提供一个特殊值 <code>unset</code> ，当属性值设置为 unset 时，有两种情况：</p>\n<pre><code>1. 当要设置的属性值能自动继承并且父元素有相应的定义值时，该元素会继承父元素的值，即行为与`inherit`相同\n2. 当要设置的属性值不能自动继承或者父元素没有相应值的定义，该元素会使用默认（初始）值，即行为与`initial`相同\n</code></pre>\n<h3 id=\"css工作流程\"><a class=\"anchor\" href=\"#css工作流程\">#</a> CSS 工作流程</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117011943180.png\" alt=\"image-20220117011943180\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117012054371.png\" alt=\"image-20220117012054371\"></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117012131405.png\" alt=\"image-20220117012131405\"></p>\n<h2 id=\"css盒模型\"><a class=\"anchor\" href=\"#css盒模型\">#</a> CSS 盒模型</h2>\n<h3 id=\"width-height-padding-border-margin\"><a class=\"anchor\" href=\"#width-height-padding-border-margin\">#</a> width、height、padding、border、margin</h3>\n<p><strong>如何使用 CSS 模拟三角形🔺？</strong></p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">div</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">border-style</span><span class=\"token punctuation\">:</span> solid<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">border-width</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> transparent transparent black transparent<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117012952354.png\" alt=\"image-20220117012952354\"></p>\n<p><strong>水平居中如何实现？</strong></p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>外边距折叠 margin collapse：<strong>水平方向</strong>上的两个不同的 margin 值相邻，margin 值会取较大的那个</p>\n<h3 id=\"box-sizing-border-box\"><a class=\"anchor\" href=\"#box-sizing-border-box\">#</a> box-sizing: border-box</h3>\n<p>当 box-sizing 值为 border-box 时，width 与 height 代表除了 margin 以外的盒模型的宽和高；</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117013246922.png\" alt=\"image-20220117013246922\"></p>\n<p>当 box-sizing 值为 content-box 时，width 与 height 代表除了 margin、border、padding 以外的盒模型的宽和高；</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117013331489.png\" alt=\"image-20220117013331489\"></p>\n<p>默认值为 content-box，可以全局设置 border-box 方便开发</p>\n<h3 id=\"overflow\"><a class=\"anchor\" href=\"#overflow\">#</a> overflow</h3>\n<p>控制盒内元素溢出方式，常用 visible、hidden、scroll 三种值，分别代表显示溢出内容、隐藏溢出内容、对溢出内容增加滚动条</p>\n<h3 id=\"块级行级\"><a class=\"anchor\" href=\"#块级行级\">#</a> 块级 &amp; 行级</h3>\n<table>\n<thead>\n<tr>\n<th>块级盒子</th>\n<th style=\"text-align:left\">行级盒子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>在常规流中不和其他盒子并列摆放</td>\n<td style=\"text-align:left\">和其他行级盒子一起放在一行或拆开成多行</td>\n</tr>\n<tr>\n<td>适用所有的盒模型属性</td>\n<td style=\"text-align:left\">盒模型中的 width、height 不适用，并且 margin、padding、border 虽然生效，但是不能推开<strong>上下</strong>内容</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>块级元素</th>\n<th>行级元素</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>特性</strong></td>\n<td>生成块级盒子</td>\n<td>生成行级盒子<br>内容分散在多个行盒 (line box) 中</td>\n</tr>\n<tr>\n<td><strong>举例</strong></td>\n<td>body、article、div、main、section、h1-6、p、ul、li 等 (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRNTC9CbG9jay1sZXZlbF9lbGVtZW50cyMlRTUlODUlODMlRTclQjQlQTAlRTUlODglOTclRTglQTElQTg=\">完整列表</span>)</td>\n<td>span、ern、strong、cite、code 等 (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRNTC9JbmxpbmVfZWxlbWVudHMjZWxlbWVudHM=\">完整列表</span>)</td>\n</tr>\n<tr>\n<td><strong>实际属性</strong></td>\n<td>display: block</td>\n<td>display: inline</td>\n</tr>\n</tbody>\n</table>\n<p>盒子是渲染时的概念，而元素是书写 html 时的概念，一个块级盒子生成一个块级盒子。</p>\n<p>块级元素或行级元素也可以通过 <code>display: inline/display: block</code>  改变默认行为（变成行级 / 块级盒子）。</p>\n<h3 id=\"display属性\"><a class=\"anchor\" href=\"#display属性\">#</a> display 属性</h3>\n<p>对于行级和块级来说，有以下可选值：</p>\n<ul>\n<li>block：块级盒子</li>\n<li>inline：行级盒子</li>\n<li>inline-block：本身是行级，可以放在行盒中；可以设置宽高；作为一个整体不会被拆散成多行</li>\n<li>none：布局时完全被忽略</li>\n</ul>\n<p>需要注意的是：元素本身的盒子属性和元素内部的盒子属性是两回事</p>\n<p>例如：一个设置为 <code>display: inline-block</code>  的行级盒子，现在表现为 inline-block，但是其内部文字依然是默认使用行级盒子</p>\n<h2 id=\"css布局\"><a class=\"anchor\" href=\"#css布局\">#</a> CSS 布局</h2>\n<p>CSS 中的布局分为三套不同的模式：常规流、浮动、绝对定位</p>\n<p>常规流中包括：行级、块级、表格布局、FlexBox、Grid 布局</p>\n<h3 id=\"常规流-normal-flow\"><a class=\"anchor\" href=\"#常规流-normal-flow\">#</a> 常规流 Normal Flow</h3>\n<p>要点：</p>\n<ul>\n<li>根元素、浮动和绝对定位的元素会脱离常规流</li>\n<li>其它元素都在常规流之内 (in-flow)</li>\n<li>常规流中的盒子，在某种排版上下文中参与布局</li>\n</ul>\n<p>排版上下文通过 <code>display</code>  属性创建</p>\n<h3 id=\"行级排版上下文\"><a class=\"anchor\" href=\"#行级排版上下文\">#</a> 行级排版上下文</h3>\n<p>Inline Formatting Context (IFC)</p>\n<p><strong>只包含行级盒子</strong>的容器会创建一个 IFC</p>\n<p>IFC 内的排版规则：</p>\n<ul>\n<li>\n<p>盒子在一行内水平摆放</p>\n</li>\n<li>\n<p>一行放不下时，换行显示</p>\n</li>\n<li>\n<p><strong>text-align</strong> 决定一行内盒子的<strong>水平</strong>对齐</p>\n</li>\n<li>\n<p><strong>vertical-align</strong> 决定一行内盒子<strong>在行内的垂直对齐</strong></p>\n</li>\n<li>\n<p>避开浮动 (float) 元素</p>\n</li>\n</ul>\n<h3 id=\"块级排版上下文\"><a class=\"anchor\" href=\"#块级排版上下文\">#</a> 块级排版上下文</h3>\n<p>Block Formatting Context (BFC)</p>\n<p>不是每一个新的块级盒子都会创建一个新的 BFC，只有某些容器会创建一个 BFC：</p>\n<ul>\n<li>根元素</li>\n<li>浮动、绝对定位、inline-block</li>\n<li>Flex 子项和 Grid 子项</li>\n<li>overflow 值不是 visible 的块盒</li>\n<li>display: flow-root;</li>\n</ul>\n<p>BFC 内的排版规则：</p>\n<ul>\n<li>盒子从上到下摆放</li>\n<li>垂直 margin 合并（margin collapse）</li>\n<li>BFC 内盒子的 margin 不会与外面的合并</li>\n<li>BFC 不会和浮动元素重叠</li>\n</ul>\n<p>如果一个块级盒子夹在行级盒子内部，那么这个行级盒子会被拆成两个行级上下文，中间夹一个块级上下文。</p>\n<h3 id=\"flex-box排版上下文\"><a class=\"anchor\" href=\"#flex-box排版上下文\">#</a> Flex Box 排版上下文</h3>\n<p>一种新的排版上下文</p>\n<p>它可以控制子级盒子的：</p>\n<ul>\n<li>摆放的流向 (👆👇👈👉)</li>\n<li>摆放顺序</li>\n<li>盒子宽度和高度</li>\n<li>水平和垂直方向的对齐</li>\n<li>是否允许折行</li>\n</ul>\n<h4 id=\"flex-direction属性\"><a class=\"anchor\" href=\"#flex-direction属性\">#</a> flex-direction 属性</h4>\n<p>控制 flex 上下文内元素的摆放流向</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117023655521.png\" alt=\"image-20220117023655521\"></p>\n<h4 id=\"justify-content属性\"><a class=\"anchor\" href=\"#justify-content属性\">#</a> justify-content 属性</h4>\n<p>控制 flex 上下文内主轴的元素摆放规则（水平对齐规则）</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117023729442.png\" alt=\"image-20220117023729442\"></p>\n<h4 id=\"align-items属性\"><a class=\"anchor\" href=\"#align-items属性\">#</a> align-items 属性</h4>\n<p>控制 flex 上下文内侧轴（交叉轴）的元素摆放规则（垂直对齐规则）</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117023751000.png\" alt=\"image-20220117023751000\"></p>\n<h4 id=\"align-self属性\"><a class=\"anchor\" href=\"#align-self属性\">#</a> align-self 属性</h4>\n<p>对于单个元素自身设置其侧轴（交叉轴）的摆放规则（垂直对齐规则）</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117023808745.png\" alt=\"image-20220117023808745\"></p>\n<h4 id=\"order属性\"><a class=\"anchor\" href=\"#order属性\">#</a> order 属性</h4>\n<p>调整元素的在摆放顺序中的位置，值越小越靠前</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117023830566.png\" alt=\"image-20220117023830566\"></p>\n<h4 id=\"flexibility\"><a class=\"anchor\" href=\"#flexibility\">#</a> Flexibility</h4>\n<p>对于 flex 上下文中的每个元素来说，都有一定的弹性，可以在指定方向伸展或收缩。</p>\n<p>可以设置子项的弹性：当容器有剩余空间时，会伸展；容器空间不够时，会收缩。</p>\n<p>flex-grow 设置拥有剩余空间时的伸展能力（注意：剩余空间不包括元素初始状态所占空间）</p>\n<p>flex-shrink 设置容器空间不足时收缩的能力（默认值为 1—— 即默认每个元素都能被压缩）</p>\n<p>flex-basis 没有伸展或收缩时的基础长度</p>\n<h4 id=\"flex属性\"><a class=\"anchor\" href=\"#flex属性\">#</a> flex 属性</h4>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024042407.png\" alt=\"image-20220117024042407\"></p>\n<h3 id=\"grid排版上下文\"><a class=\"anchor\" href=\"#grid排版上下文\">#</a> Grid 排版上下文</h3>\n<p>Grid 是一种二维的排版上下文</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024111407.png\" alt=\"image-20220117024111407\"></p>\n<p>通过 <code>grid-template-columns</code>  和 <code>grid-template-rows</code>  分别确定网格中行与列所占大小的划分</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024130502.png\" alt=\"image-20220117024130502\"></p>\n<p>grid line 网格线</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024146605.png\" alt=\"image-20220117024146605\"></p>\n<p>grid area 网格区域</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024200866.png\" alt=\"image-20220117024200866\"></p>\n<p>用法：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220117024218098.png\" alt=\"image-20220117024218098\"></p>\n<h3 id=\"float-浮动\"><a class=\"anchor\" href=\"#float-浮动\">#</a> float 浮动</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQ1NTL2Zsb2F0\">float</span> 属性常用取值有 left、right、none，使用 float 后，元素会脱离常规流</p>\n<p>需要注意的是：以前 float 被滥用过，现在来说只需要在实现图文环绕时使用，其余场景尽量不要使用。</p>\n<h3 id=\"position-定位\"><a class=\"anchor\" href=\"#position-定位\">#</a> position 定位</h3>\n<p>position 属性有 4 种常用取值：static、relative、absolute、fixed</p>\n<h4 id=\"position-static\"><a class=\"anchor\" href=\"#position-static\">#</a> position: static</h4>\n<p><strong>默认值</strong>，非定位元素</p>\n<h4 id=\"postion-relative\"><a class=\"anchor\" href=\"#postion-relative\">#</a> postion: relative</h4>\n<p>相对自身原本位置偏移，不脱离文档流</p>\n<p>要点：</p>\n<ul>\n<li>在常规流里面布局</li>\n<li>相对于自己本应该在的位置进行偏移</li>\n<li>使用 top、left、bottom、right 设置偏移长度</li>\n<li>文档流内的其它元素把它当作没有偏移的正常元素来布局</li>\n</ul>\n<h4 id=\"postion-absolute\"><a class=\"anchor\" href=\"#postion-absolute\">#</a> postion: absolute</h4>\n<p>绝对定位，相对非 static 祖先元素定位，脱离常规流</p>\n<p>要点：</p>\n<ul>\n<li>脱离常规流，即不为元素预留空间</li>\n<li>相对于最近的<strong>非 static 祖先</strong>定位</li>\n<li>不会对流内元素布局造成影响</li>\n</ul>\n<p>absolute 定位需要配合 top、bottom、left、right 属性使用，表示对于上下左右的间隔距离</p>\n<h4 id=\"position-fixed\"><a class=\"anchor\" href=\"#position-fixed\">#</a> position: fixed</h4>\n<p>相对于视口绝对定位</p>\n<p>要点：</p>\n<ul>\n<li>脱离常规流，即不为元素预留空间</li>\n<li>相对于屏幕视口（viewport）的位置来指定元素位置</li>\n<li>元素的位置在屏幕滚动时不会改变</li>\n</ul>\n<p>fixed 定位也需要配合 top、bottom、left、right 属性使用，表示对于视口上下左右的间隔距离</p>\n<h4 id=\"position-sticky\"><a class=\"anchor\" href=\"#position-sticky\">#</a> position: sticky</h4>\n<p>要点：</p>\n<ul>\n<li>在常规流里面布局</li>\n<li>相对于其<strong>最近滚动祖先</strong>和最近块级祖先偏移</li>\n<li>使用 top、left、bottom、right 设置偏移长度</li>\n<li>文档流内的其它元素把它当作没有偏移的正常元素来布局</li>\n</ul>\n<p>sticky 定位同样需要配合 top、bottom、left、right 属性使用，表示对于<strong>离它最近的拥有 “滚动机制” 的祖先</strong>的上下左右间隔距离</p>\n<h2 id=\"学习css的方法\"><a class=\"anchor\" href=\"#学习css的方法\">#</a> 学习 CSS 的方法</h2>\n<p>充分利用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\"> MDN</span> 和<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudzMub3JnLw==\"> W3C</span> CSS 规范（MDN 偏向给开发者使用，W3C 标准偏向给浏览器开发者使用，详细度不同）</p>\n<p>保持好奇心，善用览器的开发者工具</p>\n<p>持续学习，CSS 新特性还在不断出现</p>\n<h3 id=\"css的书写规范\"><a class=\"anchor\" href=\"#css的书写规范\">#</a> CSS 的书写规范</h3>\n<p>CSS 书写建议遵循以下顺序（黑马前端推荐）：</p>\n<ol>\n<li>布局定位属性：display /position/float /clear/visibility /overflow（建议 display 第一个写，毕竟关系到模式）</li>\n<li>自身属性：width /height/margin /padding/border /background</li>\n<li>文本属性：color /font/text-decoration /text-align/vertical-align /white- space /break-word</li>\n<li>其他属性（CSS3）：content /cursor/border-radius /box-shadow/text-shadow /background:linear-gradient</li>\n</ol>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>\n<p>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">MDN</span> 中文文档</p>\n</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "CSS"
            ]
        },
        {
            "id": "http://tagbug.github.io/2022/01/17/%E5%89%8D%E7%AB%AF%E4%B8%8EHTML-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2022/01/17/%E5%89%8D%E7%AB%AF%E4%B8%8EHTML-%E7%AC%94%E8%AE%B0/",
            "title": "前端与HTML - 笔记",
            "date_published": "2022-01-16T19:27:16.000Z",
            "content_html": "<blockquote>\n<p>前端：什么是前端、技术栈、关注点、边界、开发环境<br>\n HTML：DOM 树的概念、基本语法、常用标签、内容划分、语义化</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"前端与html-笔记\"><a class=\"anchor\" href=\"#前端与html-笔记\">#</a> 前端与 HTML - 笔记</h1>\n<h2 id=\"前端\"><a class=\"anchor\" href=\"#前端\">#</a> 前端</h2>\n<h3 id=\"什么是前端\"><a class=\"anchor\" href=\"#什么是前端\">#</a> 什么是前端</h3>\n<p>我认为前端的核心就是与用户的直接交互，有屏幕的地方就有前端</p>\n<p>前端的要解决的问题主要有：</p>\n<ul>\n<li>GUI 人机交互问题</li>\n<li>跨终端</li>\n<li>使用 web 技术栈</li>\n</ul>\n<h3 id=\"前端技术栈\"><a class=\"anchor\" href=\"#前端技术栈\">#</a> 前端技术栈</h3>\n<p>传统意义上的前端开发就是 HTML、CSS、JavaScript 三件套</p>\n<ul>\n<li>\n<p>HTML 是一种标记语言，是网页的骨架</p>\n</li>\n<li>\n<p>CSS 描述应该如何显示 HTML 元素，是网页的视觉呈现</p>\n</li>\n<li>\n<p>JavaScript 控制网页的行为，是网页的生命与灵魂</p>\n</li>\n</ul>\n<p>当然，除了三件套外，我们还应掌握一定的网络协议基础，因为作为前端页面，也是要与服务器进行交互的，这其中就少不了网络协议的支撑</p>\n<p>由于前端项目的日益复杂化，现代意义上的前端开发，除了三件套的基础外，还少不了前端工程化的支撑，这其中就包括 Node.js、比较流行的前端框架（如 React、Vue）、CSS 框架（如 Bootstrap、TailWindCss）、基础语言扩展（如 TypeScript、Sass）等等</p>\n<h3 id=\"前端要关注哪些方面\"><a class=\"anchor\" href=\"#前端要关注哪些方面\">#</a> 前端要关注哪些方面</h3>\n<ul>\n<li>功能</li>\n<li>美观</li>\n<li>无障碍</li>\n<li>安全</li>\n<li>性能</li>\n<li>兼容性</li>\n<li>用户体验</li>\n</ul>\n<h3 id=\"前端的边界\"><a class=\"anchor\" href=\"#前端的边界\">#</a> 前端的边界</h3>\n<p>由于前端的高速发展和日益完善的生态，前端的边界已经被扩展的很广，使用现代前端技术，我们可以：</p>\n<ul>\n<li>开发服务端：Node.js</li>\n<li>开发客户端：Electron、React-Native</li>\n<li>开发 3D 游戏：WebGL</li>\n</ul>\n<h3 id=\"开发环境\"><a class=\"anchor\" href=\"#开发环境\">#</a> 开发环境</h3>\n<p>前端的开发环境很简单，只需要有浏览器（Chrome、Firefox、Edge 等）+ 编辑器（VSCode、Vim 等）即可</p>\n<p>个人使用的主要是 Chrome+VSCode，Chrome 的 DevTools 很好用</p>\n<h2 id=\"html\"><a class=\"anchor\" href=\"#html\">#</a> HTML</h2>\n<p>全称：HyperText Markup Language</p>\n<ul>\n<li>HyperText：图片、变体、链接、表格等</li>\n<li>Markup Language： <code>&lt;h1&gt;这是一个标题&lt;/h1&gt;</code> （也可 <code>&lt;img src=&quot;xxx&quot; /&gt;</code>  简写）</li>\n</ul>\n<p>先来看一段完整的 html 代码示例：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token name\">doctype</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mate</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>页面标题<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>我是Title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>我是一个段落<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>分析：</p>\n<ul>\n<li><code>&lt;!doctype html&gt;</code>  表明当前文档使用的 html 版本，对于 html5 来说，这样写就可以了</li>\n<li><code>&lt;html&gt;</code>  是文档的根标签，所有的其他的标签都在这个根标签下</li>\n<li><code>&lt;head&gt;</code>  标签存放页面不希望展示，但需要的数据</li>\n<li><code>&lt;body&gt;</code>  标签存放的是要展示给用户的内容</li>\n</ul>\n<h3 id=\"dom树\"><a class=\"anchor\" href=\"#dom树\">#</a> DOM 树</h3>\n<p>由 HTML 标签组成的文档对象模型树，即为 DOM 树</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220116135314753.png\" alt=\"image-20220116135314753\"></p>\n<h3 id=\"html语法\"><a class=\"anchor\" href=\"#html语法\">#</a> HTML 语法</h3>\n<p>HTML 文档由若干 HTML 元素组成，HTML 元素一般由<strong>开始标签</strong>、<strong>内容</strong>、<strong>结束标签</strong>组成，例如： <code>&lt;p&gt;我是一段文字&lt;/p&gt;</code></p>\n<p>HTML 元素内可以包含若干属性，属性一般由形如 <code>key=value</code>  的键值对组成，例如： <code>&lt;p class=&quot;note&quot;&gt;我是一段文字&lt;/p&gt;</code> ，其中 <code>class=&quot;note&quot;</code>  就是这个元素的一个属性，不同的属性使用空格隔开</p>\n<ul>\n<li>标签和属性不区分大小写，推荐小写</li>\n<li>空标签可以不闭合，比如 input、meta</li>\n<li>属性值推荐用双引号包裹</li>\n<li>某些属性值可以省略，比如 required、readonly</li>\n</ul>\n<h3 id=\"常用标签\"><a class=\"anchor\" href=\"#常用标签\">#</a> 常用标签</h3>\n<ul>\n<li>\n<p>标签：h1~h6</p>\n</li>\n<li>\n<p>列表：有序列表 ol <code>(order-list)</code> 、无序列表 ul <code>(unorder-list)</code> 、列表项 li <code>(list-item)</code></p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    现代浏览器</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Chrome<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Firefox<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Edge<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    文本编辑器</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>VSCode<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Vim<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Notepad++<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>显示效果如下：</p>\n<p>\n    现代浏览器\n</p>\n<ul>\n    <li>Chrome</li>\n    <li>Firefox</li>\n    <li>Edge</li>\n</ul>\n<p>\n    文本编辑器\n</p>\n<ol>\n    <li>VSCode</li>\n    <li>Vim</li>\n    <li>Notepad++</li>\n</ol>\n</li>\n<li>\n<p>特殊列表：列表定义 dl、列表中的标题 dt、列表中的数据项 dd（注意：一个 dt 可对应多个 dd）</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>webkit内核<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">></span></span>Chrome<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">></span></span>Edge<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>gecko内核<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">></span></span>Firefox<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>显示效果如下：</p>\n<dl>\n    <dt>webkit内核</dt>\n    <dd>Chrome</dd>\n    <dd>Edge</dd>\n    <dt>gecko内核</dt>\n    <dd>Firefox</dd>\n</dl>\n</li>\n<li>\n<p>链接：a <code>(anchor)</code></p>\n</li>\n<li>\n<p>多媒体：图片 img、音频 audio、视频 video</p>\n</li>\n<li>\n<p>输入框：input、textarea，使用 type 属性指定输入框类型 <code>(range、number、date等)</code></p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>range<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">max</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">step</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>date<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2022-01-01<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>显示效果如下：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220116194520872.png\" alt=\"image-20220116194520872\"></p>\n</li>\n<li>\n<p>单选多选：input，设置 type 属性为 radio、checkbox</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>111<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>111<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>222<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>222<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>显示效果如下：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220116194550452.png\" alt=\"image-20220116194550452\"></p>\n</li>\n<li>\n<p>下拉列表：select+option</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>😇<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>😎<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>😉<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>😅<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>显示效果如下</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220116194614354.png\" alt=\"image-20220116194614354\"></p>\n</li>\n<li>\n<p>输入提示：datalist</p>\n</li>\n<li>\n<p>文字处理标签：块级引用 blockquote、短引用 cite&amp;q、代码段 code、强调标签 strong <code>(重要性强调)</code> &amp;em <code>(语气强调)</code></p>\n</li>\n</ul>\n<h3 id=\"内容划分\"><a class=\"anchor\" href=\"#内容划分\">#</a> 内容划分</h3>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20220116195104585.png\" alt=\"image-20220116195104585\"></p>\n<h3 id=\"html5语义化\"><a class=\"anchor\" href=\"#html5语义化\">#</a> HTML5 语义化</h3>\n<p>什么是语义化？</p>\n<ul>\n<li>HTML 中的 <code>元素</code> 、 <code>属性</code> 及 <code>属性值</code> 都拥有某些含义</li>\n<li>开发者应该遵循 <code>语义</code> 来编写 HTML\n<ul>\n<li>有序列表用 <code>ol</code> ; 无序列表用 <code>ul</code></li>\n<li><code>lang</code>  属性表示内容所使用的语言</li>\n</ul>\n</li>\n</ul>\n<p>为什么要使用？</p>\n<ol>\n<li>对于开发者：方便修改、维护页面</li>\n<li>对于浏览器：方便展示页面</li>\n<li>对于搜索引擎：方便检索关键词、排序</li>\n<li>对于屏幕阅读器：方便给盲人阅读 <code>页面</code></li>\n</ol>\n<p>好处：提升代码可读性 &amp; 可维护性、便于搜索引擎优化、提升无障碍性</p>\n<p><strong>传达内容，而不是样式</strong></p>\n<p>如何做到语义化？</p>\n<ul>\n<li>了解每个标签和属性的含义，比如查看 W3C 规范或浏览 MDN 文档</li>\n<li>思考什么标签最适合描述这个内容</li>\n<li>不使用可视化工具生成代码</li>\n</ul>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li>\n<p>字节<span class=\"exturl\" data-url=\"aHR0cHM6Ly95b3V0aGNhbXAuYnl0ZWRhbmNlLmNvbS8=\">青训营</span>课程</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">MDN</span> 中文文档</p>\n</li>\n</ul>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "笔记补完计划",
                "HTML"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/11/30/Maven%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93/",
            "url": "http://tagbug.github.io/2021/11/30/Maven%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93/",
            "title": "Maven简单总结",
            "date_published": "2021-11-30T07:25:02.000Z",
            "content_html": "<blockquote>\n<p>Maven 是什么、安装 Maven、Maven 的配置 &amp; 使用等</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"maven是什么\"><a class=\"anchor\" href=\"#maven是什么\">#</a> Maven 是什么</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL21hdmVuLmFwYWNoZS5vcmcv\">Maven</span> 是一个项目构建工具，现代软件开发都是一个个工程项目，软件项目的同步与管理的高昂成本催生出 Maven 这样的构建工具</p>\n<p>Maven 能避免：</p>\n<ul>\n<li>频繁、手动的下载导入 jar 包</li>\n<li>不同构建 / 运行环境（Windows/Linux）带来的产物不一致问题</li>\n<li>不同版本的依赖所产生的冲突问题</li>\n</ul>\n<p>与 Maven 类似的还有 Gradle，Maven 使用 XML 作为配置文件，Gradle 使用 DSL 语法书写配置文件，简化了 XML 的繁琐配置</p>\n<h1 id=\"安装maven\"><a class=\"anchor\" href=\"#安装maven\">#</a> 安装 Maven</h1>\n<p>Maven 的官方下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tYXZlbi5hcGFjaGUub3JnL2Rvd25sb2FkLmNnaQ==\">https://maven.apache.org/download.cgi</span></p>\n<p>Maven 是绿色软件，解压后即可使用，唯一需要配置的是两个系统环境变量：</p>\n<ol>\n<li>MAVEN_HOME  -  Maven 的安装目录</li>\n<li>PATH  -  在 PATH 中加上 % MAVEN_HOME%\\bin，方便直接在命令行调用 mvn 命令</li>\n</ol>\n<h1 id=\"maven的配置使用\"><a class=\"anchor\" href=\"#maven的配置使用\">#</a> Maven 的配置 &amp; 使用</h1>\n<h2 id=\"maven的配置\"><a class=\"anchor\" href=\"#maven的配置\">#</a> Maven 的配置</h2>\n<h3 id=\"maven_homeconfsettingsxml\"><a class=\"anchor\" href=\"#maven_homeconfsettingsxml\">#</a> <strong>%MAVEN_HOME%\\conf\\settings.xml</strong></h3>\n<p>这个文件存放的是 Maven 的全局配置信息，对这个文件做的所有更改都会直接应用于所有使用该 maven 构建的项目</p>\n<p>配置文件格式大体如下：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- setting 头，指定了这个文件的 xml 格式 --></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/SETTINGS/1.2.0<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>          <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>          <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>localRepository</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>localRepository</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrors</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrors</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 其他的标签省略 --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ul>\n<li>\n<p>localRepository 标签：</p>\n<p>用于指定本地仓库的文件夹路径，从远程仓库下载的所有文件都会放在这个文件夹下</p>\n</li>\n<li>\n<p>mirrors 标签</p>\n<p>用于指定镜像仓库，配置格式如下</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrors</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 阿里云仓库 --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>alimaven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>aliyun maven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>https://maven.aliyun.com/repository/public<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 腾讯云仓库 --></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>nexus-tencentyun<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>Nexus tencentyun<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>http://mirrors.cloud.tencent.com/nexus/repository/maven-public/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 中央仓库 1 --></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>repo1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>central<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>Central Repo1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>https://repo1.maven.org/maven2/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 中央仓库 2 --></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span><span class=\"token punctuation\">></span></span>repo2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>id</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mirrorOf</span><span class=\"token punctuation\">></span></span>central<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrorOf</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>Central Repo2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>https://repo2.maven.org/maven2/<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirror</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mirrors</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"你的maven项目pomxml\"><a class=\"anchor\" href=\"#你的maven项目pomxml\">#</a> <strong>&lt;你的 Maven 项目&gt;\\pom.xml</strong></h3>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modelVersion</span><span class=\"token punctuation\">></span></span>4.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>modelVersion</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 个人 / 组织名 --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.tagbug<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 项目名 --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>learn-maven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 项目版本号 -SNAPSHOT 为开发版 --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 打包方式  jar->jar 包  war->war 包 --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>packaging</span><span class=\"token punctuation\">></span></span>jar<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>packaging</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 项目依赖 可以从 https://mvnrepository.com/ 搜索 --></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 若干配置项... --></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>当你的系统装有多个 jdk 时，maven 会不知道使用哪个，从而产生报错，所以你可以在全局 / 项目配置文件下指定：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 指定默认字符编码集 --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project.build.sourceEncoding</span><span class=\"token punctuation\">></span></span>UTF-8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project.build.sourceEncoding</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 指定使用的 jdk 版本 --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maven.compiler.source</span><span class=\"token punctuation\">></span></span>8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maven.compiler.source</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maven.compiler.target</span><span class=\"token punctuation\">></span></span>8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maven.compiler.target</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>当你的项目有 xml 配置文件和 java 文件写在同一目录下时，可能需要额外配置：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/resources<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.properties<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filtering</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filtering</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.properties<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filtering</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filtering</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>build</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"maven的使用\"><a class=\"anchor\" href=\"#maven的使用\">#</a> Maven 的使用</h2>\n<ul>\n<li>mvn compile 编译项目</li>\n<li>mvn clean 清除构建的项目</li>\n<li>mvn test 运行测试</li>\n<li>mvn package 构建项目 &amp; 打包项目</li>\n<li>mvn install 将项目安装到本地仓库</li>\n</ul>\n<p>maven 拥有构建的生命周期，当运行位于生命周期下游的命令时，会先执行位于上游的命令，如下图所示</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/image-20211130151916834.png\" alt=\"Maven生命周期模型\" title=\"Maven生命周期模型\"></p>\n<h1 id=\"maven的其他知识点\"><a class=\"anchor\" href=\"#maven的其他知识点\">#</a> Maven 的其他知识点</h1>\n<ul>\n<li>生命周期插件</li>\n<li>依赖传递 &amp; 解决依赖冲突</li>\n<li>Maven 高级</li>\n<li>等等…</li>\n</ul>\n",
            "tags": [
                "Java",
                "Java",
                "后端",
                "构建工具"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/11/15/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2021/11/15/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AC%94%E8%AE%B0/",
            "title": "JS设计模式 - 笔记",
            "date_published": "2021-11-15T05:07:30.000Z",
            "content_html": "<blockquote>\n<p>设计模式概略 + 常用设计模式<br>\n包括单例模式、策略模式、代理模式、发布订阅模式、命令模式、组合模式、装饰器模式、适配器模式</p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"设计模式概略\"><a class=\"anchor\" href=\"#设计模式概略\">#</a> 设计模式概略</h2>\n<hr>\n<h3 id=\"什么是设计模式\"><a class=\"anchor\" href=\"#什么是设计模式\">#</a> 什么是设计模式</h3>\n<p>定义：在软件设计过程中，针对特定问题的<strong>简洁而优雅的解决方案</strong></p>\n<h3 id=\"solid-五大设计原则\"><a class=\"anchor\" href=\"#solid-五大设计原则\">#</a> SOLID 五大设计原则</h3>\n<ul>\n<li><strong>S</strong>ingle：单一职责原则\n<ul>\n<li>一个程序只做好一件事</li>\n</ul>\n</li>\n<li><strong>O</strong>pen：开放封闭原则\n<ul>\n<li>对扩展开放，对修改封闭</li>\n</ul>\n</li>\n<li><strong>L</strong>iskov：里氏置换原则\n<ul>\n<li>子类能覆盖父类，并能出现在父类出现的地方</li>\n</ul>\n</li>\n<li><strong>I</strong>nterface：接口独立原则\n<ul>\n<li>保持接口的单一独立</li>\n</ul>\n</li>\n<li><strong>D</strong>ependency：依赖导致原则\n<ul>\n<li>使用方法只关注接口而不关注具体类的实现</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"为什么需要设计模式\"><a class=\"anchor\" href=\"#为什么需要设计模式\">#</a> 为什么需要设计模式</h3>\n<ol>\n<li>易读性\n<ul>\n<li>使用设计模式能够提升代码的可读性，提升后续开发效率</li>\n</ul>\n</li>\n<li>可扩展性\n<ul>\n<li>使用设计模式对代码解耦，能很好地增强代码的易修改性和扩展性</li>\n</ul>\n</li>\n<li>复用性\n<ul>\n<li>使用设计模式可以重用已有的解决方案，无需再重复相同工作</li>\n</ul>\n</li>\n<li>可靠性\n<ul>\n<li>使用设计模式能够增加系统的健壮性，使代码编写真正工程化</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"常见设计模式\"><a class=\"anchor\" href=\"#常见设计模式\">#</a> 常见设计模式</h2>\n<hr>\n<h3 id=\"单例模式\"><a class=\"anchor\" href=\"#单例模式\">#</a> 单例模式</h3>\n<p>定义：唯一 &amp; 全局访问。<strong>保证一个类仅有一个实例</strong>，并提供一个访问它的全局访问点。</p>\n<p>应用场景： 能被缓存的内容，例如登陆弹窗。</p>\n<h3 id=\"策略模式\"><a class=\"anchor\" href=\"#策略模式\">#</a> 策略模式</h3>\n<p>定义：定义一系列的算法，把他们一个个封装起来，并且使他们可以相互替换。把看似毫无联系的代码<strong>提取封装、复用</strong>，使之更容易被理解和扩展。</p>\n<p>应用场景：要完成一件事情，有不同的策略。例如绩效计算、表单验证规则。</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用前</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 策略</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">calculateBonus</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level<span class=\"token punctuation\">,</span> salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token string\">'s '</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token string\">'a'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">case</span> <span class=\"token string\">'b'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">return</span> strategies<span class=\"token punctuation\">[</span>level<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">calculateBonus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"s\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 80000</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">calculateBonus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 30000</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用后</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 策略</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> strategies <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function-variable function\">s</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function-variable function\">a</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function-variable function\">b</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">calculateBonus</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level<span class=\"token punctuation\">,</span> salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">return</span> strategies<span class=\"token punctuation\">[</span>level<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">calculateBonus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"s\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 80000</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token function\">calculateBonus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 30000</span></pre></td></tr></table></figure><h3 id=\"代理模式\"><a class=\"anchor\" href=\"#代理模式\">#</a> 代理模式</h3>\n<p>定义：为一个对象提供一个代用品或占位符，以便<strong>控制对它的访问</strong>。替身对象可对请求预先进行处理，再决定是否转交给本体对象。</p>\n<p>应用场景：当我们不方便直接访问某个对象时，或不满足需求时，可考虑使用一个替身对象来控制该对象的访问。</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用前</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 原生函数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> rawImage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> imgNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"img\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>imgNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function-variable function\">setSrc</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            imgNode<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"./loading.gif\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token keyword\">const</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            img<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                imgNode<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>rawImage<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://xxx.gif\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用后</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 原生函数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> rawImage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">const</span> imgNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"img\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>imgNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function-variable function\">setSrc</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            imgNode<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 代理函数</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> proxyImage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">const</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    img<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        rawImage<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token function-variable function\">setSrc</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            rawImage<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./loading.gif\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>proxyImage<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http: //xxx.gif\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"发布订阅模式\"><a class=\"anchor\" href=\"#发布订阅模式\">#</a> 发布订阅模式</h3>\n<p>定义：对象间的一种<strong>一对多的依赖关系</strong>，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。</p>\n<p>应用场景：DOM 事件、消息通知</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">PubSub</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subscribers <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 订阅</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">let</span> listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subscribers<span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        listeners<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 取消订阅</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">let</span> listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subscribers<span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>listeners <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>listeners<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subscribers<span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> listeners<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> v <span class=\"token operator\">!==</span> fn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">// 触发订阅事件</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">let</span> listeners <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>subscribers<span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>listeners <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>listeners<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        listeners<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">let</span> ob <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PubSub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>ob<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>ob<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"命令模式\"><a class=\"anchor\" href=\"#命令模式\">#</a> 命令模式</h3>\n<p>定义：执行某些特定事情的指令</p>\n<p>应用场景：富文本编辑器工具栏</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 设置命令</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setCommand</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">button<span class=\"token punctuation\">,</span> command</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    button<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        command<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 业务逻辑</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">const</span> MenuBar <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function-variable function\">refresh</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"refresh\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RefreshCommand</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">receiver</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token function-variable function\">execute</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            receiver<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">const</span> refreshMenuBarCommand <span class=\"token operator\">=</span> <span class=\"token function\">RefreshCommand</span><span class=\"token punctuation\">(</span>MenuBar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">// 绑定按钮和命令</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token function\">setCommand</span><span class=\"token punctuation\">(</span>refreshButton<span class=\"token punctuation\">,</span> refreshMenuBarCommand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"组合模式\"><a class=\"anchor\" href=\"#组合模式\">#</a> 组合模式</h3>\n<p>定义：用小的子对象来构建更大的对象，将对象组合成树形结构，以表示 “部分 - 整体” 的层次结构。</p>\n<p>应用场景：从 is-a 到 has-a</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MacroCommand</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>commands <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 添加子对象逻辑</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">command</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>commands<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">// 执行父对象逻辑</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>commands<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>commands<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">const</span> macroCommand <span class=\"token operator\">=</span> <span class=\"token function\">MacroCommand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">const</span> openCommand <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token function-variable function\">execute</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">const</span> closeCommand <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token function-variable function\">execute</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'close'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>macroCommand<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>openCommand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>macroCommand<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>closeCommand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>macroCommand<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"装饰器模式\"><a class=\"anchor\" href=\"#装饰器模式\">#</a> 装饰器模式</h3>\n<p>定义：能够在不改变对象自身的基础上，在程序运行期间给对象<strong>动态地添加职责</strong>。</p>\n<p>应用场景：数据上报、统计函数执行时间</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用前</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ajax</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> param</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getToken</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'Token'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">getToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用后</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 添加职责</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">before</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">beforeFn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>rest</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">beforeFn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">ajax</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> param</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getToken</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token string\">'Token'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>ajax <span class=\"token operator\">=</span> ajax<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> param</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    param<span class=\"token punctuation\">.</span>token <span class=\"token operator\">=</span> <span class=\"token function\">getToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"适配器模式\"><a class=\"anchor\" href=\"#适配器模式\">#</a> 适配器模式</h3>\n<p>定义：<strong>解决</strong>两个软件实体间的<strong>接口不兼容</strong>问题，改变已有的接口，就能够使它们协同作用。</p>\n<p>应用场景：接口不兼容的情况</p>\n<p>示例：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用前</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> aMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function-variable function\">show</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'开始渲染地图A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> bMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function-variable function\">display</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'开始渲染地图B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderMap</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        aMap<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        bMap<span class=\"token punctuation\">.</span><span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>使用后</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> aMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function-variable function\">show</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'开始渲染地图A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">const</span> bMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function-variable function\">display</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'开始渲染地图B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// 适配层</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">const</span> bMapAdapter <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token function-variable function\">show</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> bMap<span class=\"token punctuation\">.</span><span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renderMap</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">map</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span>show <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        map<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token function\">renderMap</span><span class=\"token punctuation\">(</span>aMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token function\">renderMap</span><span class=\"token punctuation\">(</span>bAdapter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>参考:<br>\n 字节青训营课程</p>\n",
            "tags": [
                "学习笔记",
                "前端",
                "前端",
                "设计模式",
                "JavaScript"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/09/25/Node-js%E5%85%A5%E9%97%A8-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2021/09/25/Node-js%E5%85%A5%E9%97%A8-%E7%AC%94%E8%AE%B0/",
            "title": "Node.js入门 - 笔记",
            "date_published": "2021-09-25T07:43:07.000Z",
            "content_html": "<blockquote>\n<p>Node.js 简介、模块化机制和包管理机制</p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"nodejs简介\"><a class=\"anchor\" href=\"#nodejs简介\">#</a> Node.js 简介</h2>\n<hr>\n<p>Node.js 是一个基于 <strong>Google V8</strong> 引擎的、跨平台的 <strong>JavaScript</strong> 运行环境，主要运行在服务器端，能够以 JS 的方式编写服务端程序，与传统浏览器中运行的 JS 不同，Node.js 底层采用 C++，可以读取文件、使用多进程、启动 HTTP 服务等。</p>\n<h3 id=\"nodejs的版本管理\"><a class=\"anchor\" href=\"#nodejs的版本管理\">#</a> Node.js 的版本管理</h3>\n<p>由于开发过程中可能的版本切换需求（比如：新特性的兼容问题等），需要一个 Node.js 的版本管理工具。</p>\n<p>以下是可供的选择：</p>\n<ol>\n<li><code>n</code> : 一个 npm 全局的开源包，是依赖 npm 来全局安装、使用的</li>\n<li><code>fnm</code> : 快速简单，兼容性支持 .node-version 和 .nvmrc 文件</li>\n<li><code>nvm</code> : 独立的软件包，Node Version Manager</li>\n</ol>\n<p>在实际开发中，nvm 用的会多一些。</p>\n<h3 id=\"nodejs特点\"><a class=\"anchor\" href=\"#nodejs特点\">#</a> Node.js 特点</h3>\n<ol>\n<li>异步 IO：当 Node.js 执行 I/O 操作时，会在响应返回并恢复操作，而不是阻塞线程并浪费 CPU 循环等待</li>\n<li>单线程：保持了 JavaScript 在浏览器中单线程的特点<br>\n优点在于不会发生死锁、没有线程上下文切换带来的开销<br>\n缺点在于无法利用多核 CPU、健壮性不足等（可以解决）</li>\n<li>跨平台：兼容 Windows、MacOS、Linux/Unix 操作系统，主要得益于 Node.js 的标准库建立在底层的封装之上</li>\n</ol>\n<h2 id=\"模块化机制\"><a class=\"anchor\" href=\"#模块化机制\">#</a> 模块化机制</h2>\n<hr>\n<p>与 Java 类似，在开发团队开发过程中，有可能有两个 JS 脚本声明了相同的变量名或函数名，此时运行在同一个网页中就会出现变量污染、副作用等问题，导致代码逻辑无法正常运行，于是引入了模块化机制，方便 import/export</p>\n<h3 id=\"commonjs规范\"><a class=\"anchor\" href=\"#commonjs规范\">#</a> CommonJS 规范</h3>\n<blockquote>\n<p>注意：CommonJS 规范只是一种规范，需要具体的实现才能正常运作（比如依靠 Node.js）</p>\n</blockquote>\n<p>CommonJS 的导入导出语法如下：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>greeting.js</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 导出定义的函数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hello</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>exports<span class=\"token punctuation\">.</span>hello <span class=\"token operator\">=</span> hello<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 或者用</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// module.exports = &#123; myHello: hello &#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 也可以</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 注：exports 其实就是 module.exports，都是 JS 对象</span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"><span>index.js</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 导入定义的函数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> hello <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./greeting.js'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 或者用</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// const &#123; myHello: hello &#125; = require('./greeting.js')</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 注：其实就是 JS 解构语法，require 只是一个函数</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// 下面就可以正常使用了</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"commonjs的缓存机制\"><a class=\"anchor\" href=\"#commonjs的缓存机制\">#</a> CommonJS 的缓存机制</h4>\n<p>由于在浏览器中运行时是联网加载，如果每次 require 都需要重新遍历查找，性能会比较差，而且有时候模块中的代码有副作用，所以 require.cache 中缓存了加载过的模块。</p>\n<p>如果要每一次重新加载，可以参考以下代码：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 有缓存</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> mod1 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> mod2 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>mod1 <span class=\"token operator\">==</span> mod2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 无缓存</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">requireUncached</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">delete</span> require<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">[</span>require <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">const</span> mod3 <span class=\"token operator\">=</span> <span class=\"token function\">requireUncached</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/foo'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> mod1 <span class=\"token operator\">===</span> mod3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></pre></td></tr></table></figure><h3 id=\"es-modulesesm\"><a class=\"anchor\" href=\"#es-modulesesm\">#</a> ES Modules(ESM)</h3>\n<p>ES Modules 是 ES6 原生支持的一个模块化机制，其导入导出语法如下：</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 导出</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span><span class=\"token string\">'lxfriday'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> age <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span>name <span class=\"token keyword\">as</span> nickname<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token punctuation\">&#123;</span> foo <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./foo-bar'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./foo-bar'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 导入</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> react <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> Component <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">default</span> <span class=\"token keyword\">as</span> a<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>Button <span class=\"token keyword\">as</span> Btn<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'antd'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">'index.less'</span></pre></td></tr></table></figure><h3 id=\"commonjs对比esm\"><a class=\"anchor\" href=\"#commonjs对比esm\">#</a> CommonJS 对比 ESM</h3>\n<ul>\n<li>CommonJS 模块输出的是一个值的拷贝；ESM 模块输出的是值的引用</li>\n<li>CommonJS 模块是运行时加载；ESM 模块是编译时输出 (提前加载)</li>\n</ul>\n<p><em>注：可以混用，但是不建议 (import commonjs 或者 import 中 require)</em></p>\n<h2 id=\"包管理机制\"><a class=\"anchor\" href=\"#包管理机制\">#</a> 包管理机制</h2>\n<hr>\n<p>Node.js 中有一个包管理器： <code>npm</code> ，提供了安装、删除等其它命令来管理包。</p>\n<p>常用的命令有：</p>\n<ul>\n<li>npm init</li>\n<li>npm config</li>\n<li>npm run [cmd]</li>\n<li>npm install [pkg]</li>\n<li>npm uninstall [pkg]</li>\n<li>npm update [pkg]</li>\n<li>npm info [pkg]</li>\n<li>npm publish</li>\n</ul>\n<p>用 npm 进行包管理的目录下一般都有 <code>index.js</code>  和 <code>package.json</code>  这两个文件。</p>\n<p>在 package.json 中，有以下属性需要注意：</p>\n<ul>\n<li>name 包名称</li>\n<li>version 版本号</li>\n<li>main 入口文件</li>\n<li>scripts 执行脚本</li>\n<li>dependencies 线上依赖</li>\n<li>devDependencies 开发依赖</li>\n<li>repository 代码托管地址</li>\n</ul>\n<p>更多 package.json 配置详见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm5wbWpzLmNvbS9jbGkvdjcvY29uZmlndXJpbmctbnBtL3BhY2thZ2UtanNvbg==\"> npm Docs</span></p>\n<p>参考:<br>\n 字节青训营课程</p>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "Node.js"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/09/23/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96-%E7%AC%94%E8%AE%B0/",
            "url": "http://tagbug.github.io/2021/09/23/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96-%E7%AC%94%E8%AE%B0/",
            "title": "前端工程化 - 笔记",
            "date_published": "2021-09-23T07:24:25.000Z",
            "content_html": "<blockquote>\n<p>主要是前端工程化理论</p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"前端工程化理论\"><a class=\"anchor\" href=\"#前端工程化理论\">#</a> 前端工程化理论</h2>\n<hr>\n<h3 id=\"定义\"><a class=\"anchor\" href=\"#定义\">#</a> 定义</h3>\n<p>前端工程化 = 软件工程 + 前端</p>\n<p>是⼀种通过<strong>规范化</strong>、<strong>模块化</strong>、<strong>⾃动化</strong>等⼿段，提⾼前端项⽬在研发、运维阶段的效率、质量。</p>\n<h4 id=\"规范化\"><a class=\"anchor\" href=\"#规范化\">#</a> 规范化</h4>\n<p>沉淀研发流程的各个环节标准规范，统⼀研发流程和规范，为模块和⾃动化提供可能性</p>\n<h4 id=\"模块化\"><a class=\"anchor\" href=\"#模块化\">#</a> 模块化</h4>\n<p>使用复用模块，将各项功能基于独⽴的模块去拆分开发，尽可能的做到模块级别的复⽤，从⽽⼤⼤提⾼整体效率和降低研发成本</p>\n<h4 id=\"自动化处理\"><a class=\"anchor\" href=\"#自动化处理\">#</a> 自动化处理</h4>\n<p>基于定义的研发流程，建⽴⼀套⾃动化流⽔线，当特定动作发⽣（定期触发、Git Push）时，⾃动触发流⽔线执⾏ CI/CD（持续集成 / 持续部署）任务</p>\n<h3 id=\"devops\"><a class=\"anchor\" href=\"#devops\">#</a> DevOps</h3>\n<p>DevOps 是⼀组<em>过程、⽅法与系统的统称</em>，⽤于促进开发、技术运营和质量保障（QA）部⻔之间的<em>沟通、协作与整合</em>。</p>\n<h3 id=\"优点\"><a class=\"anchor\" href=\"#优点\">#</a> 优点</h3>\n<ol>\n<li><strong>提高效率</strong>（通过模块 / 组件化复用各项能力，以及自动化工具提高效率）</li>\n<li><strong>保障质量</strong>（规范化避免犯错，通过引入准入检测、监控、自动化测试等手段保障研发和运维期间的质量）</li>\n<li><strong>降低成本</strong>（提高质量、保障质量，以及自动化带来的开发难度的降低变相的就降低的整个软件开发的成本</li>\n</ol>\n<p>参考:<br>\n 字节青训营课程</p>\n",
            "tags": [
                "学习笔记",
                "前端",
                "Web",
                "前端",
                "前端工程化"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/08/15/Js%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/",
            "url": "http://tagbug.github.io/2021/08/15/Js%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/",
            "title": "Js调试技巧",
            "date_published": "2021-08-15T07:57:06.000Z",
            "content_html": "<blockquote>\n<p>开发人员工具、断点技巧、搜索技巧等</p>\n<p>视频版本：【JavaScript 代码调试方法】How To Debug In Chrome -&gt; <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW00NHkxWTdtZA==\">link</span></p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"学会使用开发人员工具\"><a class=\"anchor\" href=\"#学会使用开发人员工具\">#</a> 学会使用开发人员工具</h2>\n<hr>\n<p><code>preserve log</code> <br>\n <code>disable cache</code> <br>\nsource -&gt;  <code>search</code> 、 <code>snippet script</code> 、 <code>override</code>  重写覆盖脚本 (也可以用 fiddler 支持正则更智能)、 <code>Ctrl键</code> 切换智能提示…</p>\n<h2 id=\"学会使用console\"><a class=\"anchor\" href=\"#学会使用console\">#</a> 学会使用 console</h2>\n<hr>\n<ul>\n<li>\n<p>console 的不同日志级别：<br>\nconsole.log<br>\nconsole.warn<br>\nconsole.error<br>\nconsole.debug<br>\n<span class=\"exturl\" data-url=\"aHR0cDovL2NvbnNvbGUuaW5mbw==\">console.info</span></p>\n</li>\n<li>\n<p>用列表的形式展示 JSON 和数组数据：<br>\nconsole.table</p>\n</li>\n<li>\n<p>日志占位符（可以使用自定义字体样式）：<br>\n <code>console.log('%c%s', 'font-size: 24px;color: red', 'This is a important message!')</code> <br>\n% s: 字符串占位符；% o: 对象占位符；% c: 样式占位符；% d: 数字占位符</p>\n</li>\n</ul>\n<h2 id=\"断点技巧\"><a class=\"anchor\" href=\"#断点技巧\">#</a> 断点技巧</h2>\n<hr>\n<p><code>dom断点</code> 、 <code>dom事件断点</code> 、全局 <code>event listener</code> 、 <code>xhr断点</code> …<br>\n 下断点一般选在方法开头、结尾、return 处，遇到平坦流（for+switch）在 case+return 处下断<br>\n学会编辑断点条件（<strong>false -&gt; 跳过该断点</strong>），切换断点禁用</p>\n<h2 id=\"搜索关键字技巧\"><a class=\"anchor\" href=\"#搜索关键字技巧\">#</a> 搜索关键字技巧</h2>\n<hr>\n<p>一些常见的加密方式：</p>\n<ol>\n<li>取盐校验 -&gt; 不可逆<br>\n md5 md2 md4   带密码的 md5（hmac）<br>\n分<strong> 16</strong> 位、<strong>32</strong> 位、<strong>40</strong> 位<br>\n 123456 经过 md5 后 -&gt;  <code>49ba...057</code> / <code>e10adc...3e</code> <br>\nsha1 sha256 dha512<br>\n 分<strong> 40</strong> 位、<strong>64</strong> 位、<strong>128</strong> 位<br>\n 123456 经过 sha1 后： <code>7c4a...941b</code></li>\n<li>对称加密 -&gt; 可逆<br>\n AES、DES、3DES</li>\n<li>非对称加密 -&gt; 可逆<br>\n RSA（私钥 setprivate、公钥 setpublic） 同一个明文可以生成不同密文</li>\n<li>对于加密无非以下几种情况：\n<ul>\n<li>16 进制的（以上的 3 种都是 16 进制的） <strong>0-9 A-F</strong></li>\n<li>base64  <strong>A-Z a-z 0-9 + _ =</strong></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"快速定位无混淆的情况下\"><a class=\"anchor\" href=\"#快速定位无混淆的情况下\">#</a> 快速定位（无混淆的情况下）</h3>\n<ul>\n<li>使用魔法值搜索：<br>\n<strong>123456789</strong>、<strong>1732584193</strong>(md5)</li>\n<li>使用 url 后缀搜索</li>\n<li>使用关键字 &amp; 属性搜索：<br>\npassword、.password、password=、[‘password’]、[“password”]</li>\n<li>md5 默认 key<br>\n<strong>0123456789abcdef</strong></li>\n<li>RSA 特征<br>\n加密过程：new 一个 rsa 对象 -&gt;setpublickey（key,iv (模值)）-&gt;encrypt</li>\n</ul>\n<h2 id=\"其他技巧\"><a class=\"anchor\" href=\"#其他技巧\">#</a> 其他技巧</h2>\n<hr>\n<ol>\n<li>巧用 <code>JSON.stringify/parse</code>  来提取 js 对象</li>\n<li>扣 js 代码或补环境（DOM、BOM），扣代码则要善于导出变量（ <code>window.xxx = ...</code> ）</li>\n<li>学会识别统一格式的代码，过滤掉无用的格式要求的固定代码</li>\n<li>学会识别 webpack 打包的代码，导出时导出加载器即可，一般位于 webpack 代码的顶部方法</li>\n<li>对于 webSocket 协议，学会搜索对应关键词（ <code>new websocket</code> 、 <code>.onopen</code> 、 <code>.onmessage</code> ）</li>\n<li>方法里有 <code>this</code>  则需要导出对象，调用对象。方法，不能直接调用方法</li>\n<li>灵活使用 hook，而不是一味地搜索关键字（能 hook 找就用 hook 找 ( <code>var send_ = send;send = function(arg...)&#123;debugger;send_(...arg);&#125;</code> )</li>\n</ol>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUtoNDExcjd1Ug==\">参考链接</span></p>\n",
            "tags": [
                "安全",
                "Web",
                "JS逆向",
                "Web安全",
                "JavaScript"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/05/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/",
            "url": "http://tagbug.github.io/2021/05/07/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/",
            "title": "排序算法总结",
            "date_published": "2021-05-07T09:53:57.000Z",
            "content_html": "<blockquote>\n<p>这里总结如下算法：</p>\n<ul>\n<li>基于比较的排序算法：<br>\n冒泡排序<br>\n选择排序<br>\n插入排序<br>\n归并排序<br>\n快速排序</li>\n<li>不基于比较的排序算法：<br>\n计数排序<br>\n基数排序</li>\n</ul>\n</blockquote>\n<span id=\"more\"></span>\n<h1 id=\"写在前面\"><a class=\"anchor\" href=\"#写在前面\">#</a> 写在前面</h1>\n<p>这次的算法实现全都使用 C 语言，并不是说 C 有多好，只是因为 C 比较接近底层，掌握 C 的写法后，其他语言的写法也很好实现，其次，也是因为现在很多算法的讲解也使用 C。</p>\n<p>然后，本文的算法实现可能还不够完美，虽然都经过了测试用例，但难免还有些疏忽，如有错误或是有更好的意见，欢迎提出。</p>\n<h1 id=\"基于比较的排序算法-on2\"><a class=\"anchor\" href=\"#基于比较的排序算法-on2\">#</a> 基于比较的排序算法 - O (N^2)</h1>\n<h2 id=\"冒泡排序\"><a class=\"anchor\" href=\"#冒泡排序\">#</a> 冒泡排序</h2>\n<h4 id=\"核心原理\"><a class=\"anchor\" href=\"#核心原理\">#</a> 核心原理</h4>\n<p>从左到右，依次将较大的元素交换到后面，那么一次一次排序后，最大的元素就在数组末尾，然后不断重复。</p>\n<blockquote>\n<p>给定一个 N 个元素的数组，冒泡法排序将：</p>\n<ol>\n<li>如果元素大小关系不正确，交换这两个数（在本例中为 a&gt; b）</li>\n<li>比较一对相邻元素（a，b）</li>\n<li>重复步骤 1 和 2，直到我们到达数组的末尾（最后一对是第（N-2）和（N-1）项，因为我们的数组从零开始）</li>\n<li>到目前为止，最大的元素将在最后的位置。 然后我们将 N 减少 1，并重复步骤 1，直到 N = 1。</li>\n</ol>\n<p><em>(引用 VisuAlgo)</em></p>\n</blockquote>\n<p>可视化见<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZz9zbGlkZT03\"> VisuAlgo</span></p>\n<h3 id=\"算法实现\"><a class=\"anchor\" href=\"#算法实现\">#</a> 算法实现</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BOOL</span> <span class=\"token expression\"><span class=\"token class-name\">size_t</span></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">FALSE</span> <span class=\"token expression\"><span class=\"token number\">0</span></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">TRUE</span> <span class=\"token expression\"><span class=\"token number\">1</span></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 原地排序</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">bubbleSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    BOOL exchanged <span class=\"token operator\">=</span> FALSE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">int</span> last <span class=\"token operator\">=</span> len<span class=\"token punctuation\">;</span> <span class=\"token comment\">//last 随着冒泡次数而减小</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> last<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> arr<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token comment\">// 交换前后项</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                <span class=\"token comment\">//int 整数型可以使用这种算法，不使用中间变量</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">^=</span> arr<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                arr<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">^=</span> arr<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token comment\">// 交换过了</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                exchanged <span class=\"token operator\">=</span> TRUE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        last<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 当 last 减到 0 时，说明已经遍历结束，结束排序</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>exchanged <span class=\"token operator\">&amp;&amp;</span> last <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 如果一次冒泡后没有发生交换，说明数组已经有序，结束排序</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"选择排序\"><a class=\"anchor\" href=\"#选择排序\">#</a> 选择排序</h2>\n<h4 id=\"核心原理-2\"><a class=\"anchor\" href=\"#核心原理-2\">#</a> 核心原理</h4>\n<p>从左到右，选择未被排序的数里最小的那个，与数组第一个数交换，然后第二个… 不断重复。</p>\n<blockquote>\n<p>给定 N 个项目和 L = 0 的数组，选择排序将：</p>\n<ol>\n<li>在 [L … N-1] 范围内找出最小项目 X 的位置</li>\n<li>用第 L 项交换 X</li>\n<li>将下限 L 增加 1 并重复步骤 1 直到 L = N-2。</li>\n</ol>\n<p><em>(引用 VisuAlgo)</em></p>\n</blockquote>\n<p>可视化见<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZz9zbGlkZT04\"> VisuAlgo</span></p>\n<h4 id=\"算法实现-2\"><a class=\"anchor\" href=\"#算法实现-2\">#</a> 算法实现</h4>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 原地排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">selectSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 找出未被排序的数里最小的那个</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">int</span> min <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">int</span> minIdx <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>min <span class=\"token operator\">></span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                min <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                minIdx <span class=\"token operator\">=</span> j<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// 交换</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        arr<span class=\"token punctuation\">[</span>minIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> min<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"插入排序\"><a class=\"anchor\" href=\"#插入排序\">#</a> 插入排序</h2>\n<h4 id=\"核心原理-3\"><a class=\"anchor\" href=\"#核心原理-3\">#</a> 核心原理</h4>\n<p>将未排序的数依次插入到排序好的数中</p>\n<blockquote>\n<p>插入排序类似于大多数人安排扑克牌的方式。</p>\n<ol>\n<li>从你手中的一张牌开始</li>\n<li>选择下一张卡并将其插入到正确的排序顺序中</li>\n<li>对所有的卡重复上一步。</li>\n</ol>\n<p><em>(引自 VisuAlgo)</em></p>\n</blockquote>\n<p>可视化见<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZz9zbGlkZT05\"> VisuAlgo</span></p>\n<h4 id=\"算法实现-3\"><a class=\"anchor\" href=\"#算法实现-3\">#</a> 算法实现</h4>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 原地排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">insertSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 这里默认第一个数就是排好序的，所以索引从第二个数开始</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token comment\">// 将未排序的数插入到排序好的数中</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> i<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 插入</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token comment\">// 先缓存要插入的数，因为后面要移动前面的数列，会覆盖它</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token comment\">// 移动数列</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> k <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> k <span class=\"token operator\">></span> j<span class=\"token punctuation\">;</span> k<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                    arr<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>k <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token comment\">// 放入正确的位置</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"优点缺点\"><a class=\"anchor\" href=\"#优点缺点\">#</a> 优点 &amp; 缺点</h2>\n<h4 id=\"优点\"><a class=\"anchor\" href=\"#优点\">#</a> 优点</h4>\n<p>这几个排序算法比较简单，容易想到，也比较容易理解算法原理。</p>\n<h4 id=\"缺点\"><a class=\"anchor\" href=\"#缺点\">#</a> 缺点</h4>\n<p>在数据量变大时，运行效率会非常低，不是很实用。</p>\n<h1 id=\"基于比较的排序算法-on-log-n\"><a class=\"anchor\" href=\"#基于比较的排序算法-on-log-n\">#</a> 基于比较的排序算法 - O (N log N)</h1>\n<h2 id=\"归并排序\"><a class=\"anchor\" href=\"#归并排序\">#</a> 归并排序</h2>\n<h4 id=\"核心原理-4\"><a class=\"anchor\" href=\"#核心原理-4\">#</a> 核心原理</h4>\n<p>将待排序的数组一分为二，分别对左右数组排序，排序时再一分为二，直到分成单个元素，排序完成后再依次合并。</p>\n<blockquote>\n<p>给定一个 N 个项目的数组，归并排序将：</p>\n<ol>\n<li>将每对单个元素（默认情况下，已排序）归并为 2 个元素的有序数组</li>\n<li>将 2 个元素的每对有序数组归并成 4 个元素的有序数组，重复这个过程…</li>\n<li>最后一步：归并 2 个 N / 2 元素的排序数组（为了简化讨论，我们假设 N 是偶数）以获得完全排序的 N 个元素数组。</li>\n</ol>\n<p><em>(引自 VisuAlgo)</em></p>\n</blockquote>\n<p>可视化见<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZz9zbGlkZT0xMQ==\"> VisuAlgo</span></p>\n<h4 id=\"算法实现-4\"><a class=\"anchor\" href=\"#算法实现-4\">#</a> 算法实现</h4>\n<p>注：需要 O (n) 的额外空间</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 借助临时数组进行排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> mid<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 归并排序子函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> high <span class=\"token operator\">-</span> low <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>                   <span class=\"token comment\">// 要排序的数字个数</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>b <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>N <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 创建一个新的数组用来排序</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">int</span> lIdx <span class=\"token operator\">=</span> low<span class=\"token punctuation\">,</span> rIdx <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> bIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//lIdx-> 左边数组索引，rIdx-> 右边数组索引，bIdx-> 数组 b 的索引</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 因为在 low~mid 和 mid+1~high 之间的数都是有序的（从小到大的），所以可以这样</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>lIdx <span class=\"token operator\">&lt;=</span> mid <span class=\"token operator\">&amp;&amp;</span> rIdx <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>lIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">[</span>rIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            b<span class=\"token punctuation\">[</span>bIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>lIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            lIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            b<span class=\"token punctuation\">[</span>bIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>rIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            rIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        bIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\">// 可能左数组或右数组还有剩余项</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// 比如：左数组所有数都小于右数组数的情况下</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>lIdx <span class=\"token operator\">&lt;=</span> mid<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        b<span class=\"token punctuation\">[</span>bIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>lIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>rIdx <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        b<span class=\"token punctuation\">[</span>bIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>rIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token comment\">// 现在数组 b 中是已经排好序的数，再给它们复制回 arr 中</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> j <span class=\"token operator\">=</span> low<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> b<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 归并排序</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">&lt;</span> high<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token comment\">// 将待排序的数组一分为二，递归</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token keyword\">int</span> mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">+</span> high<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 注：这里的 mid+1 只要和 merge 子函数里 rIdx 的值保持相同就行</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token comment\">// 归并</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        <span class=\"token function\">merge</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//mid 从这里传入，在 merge 子函数中 rIdx=mid+1</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>在此基础上还可以加以改进，使得归并排序在原地排序（不借用中间数组），降低空间复杂度，但是似乎会提升时间复杂度<sup>O(N log^2 N)-<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWNuLyVFNiU4RSU5MiVFNSVCQSU4RiVFNyVBRSU5NyVFNiVCMyU5NSMlRTclQTklQTklRTUlQUUlOUElRTclOUElODQlRTYlOEUlOTIlRTUlQkElOEY=\">wikipedia</span></sup>。</p>\n<h2 id=\"快速排序-on2on-log-n\"><a class=\"anchor\" href=\"#快速排序-on2on-log-n\">#</a> 快速排序 - O (N^2)/O (N log N)</h2>\n<h4 id=\"核心原理-5\"><a class=\"anchor\" href=\"#核心原理-5\">#</a> 核心原理</h4>\n<ul>\n<li>经典的快速排序 - O (N^2)/O (N log N)：在一开始先选择第一个数作为枢轴点 p，遍历剩余数，把所有小于 p 的数放在左边，所有大于 p 的数放在右边，然后把 p 放在中间；然后对左边的数组和右边的数组再分别重复上面的步骤。（不稳定）</li>\n<li>随机快速排序 - O (N log N)：在经典快速排序的基础上，每次随机选择枢轴点 p。（比较稳定）</li>\n</ul>\n<blockquote>\n<p>划分步骤：</p>\n<ol>\n<li>选择一个项目 p（称为枢轴点）</li>\n<li>然后将 a [i…j] 的项目分为三部分：a [i…m-1]，a [m] 和 a [m + 1…j]。 a [i…m-1]（可能为空）包含小于 p 的项目。 a [m] 是枢轴点 p，例如：指数 m 是已排序数组 a 的排序顺序中 p 的正确位置。 a [m + 1…j]（可能为空）包含大于或等于 p 的项目。</li>\n<li>然后，递归地对这两部分进行排序。</li>\n</ol>\n</blockquote>\n<p>可视化见<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZz9zbGlkZT0xMi05\"> VisuAlgo</span></p>\n<h4 id=\"算法实现-5\"><a class=\"anchor\" href=\"#算法实现-5\">#</a> 算法实现</h4>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 原地排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">partition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 快速排序子函数 - 划分</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> p <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>low<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 选取第一个数作为枢轴点</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> low<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// 分界点，因为左右区域一开始都是空的，所以 m 要在 0 的位置</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> low <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 如果 arr [i]>=p，什么都不用做，继续下一次循环即可 (i++)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> p<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token comment\">// 这里的算法详见 https://visualgo.net/zh/sorting?slide=12-6</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            m<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">// 交换 arr [m] 和 arr [i]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">int</span> tmp <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token comment\">// 进入下一次循环 i++</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">// 交换枢轴点和分界点</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>low<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// 返回枢轴点所在位置</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">return</span> m<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span><span class=\"token comment\">// 快速排序</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">&lt;</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 如果 low>high，说明已经划分为单个</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token comment\">// 先划分为左右两个区域</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> <span class=\"token function\">partition</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// 再递归对左右两个区域排序</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token comment\">// 注：m 所在位置已经在正确的位置了，所以不需要包括进去</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> m <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> m <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>上面是经典快速排序，使用随机快速排序只需要让 p 随机选取即可。</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">partition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 快速排序子函数 - 划分</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> pIdx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>high <span class=\"token operator\">-</span> low <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> low<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 随机选取 [low,high]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 交换 arr [pIdx] 和 arr [low]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> p <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>pIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>pIdx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>low<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>low<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> low<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 分界点，因为左右区域一开始都是空的，所以 m 要在 0 的位置</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> low <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">// 如果 arr [i]>=p，什么都不用做，继续下一次循环即可 (i++)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> p<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token comment\">// 这里的算法详见 https://visualgo.net/zh/sorting?slide=12-6</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            m<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\">// 交换 arr [m] 和 arr [i]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">int</span> tmp <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token comment\">// 进入下一次循环 i++</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\">// 交换枢轴点和分界点</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>low<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    arr<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\">// 返回枢轴点所在位置</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">return</span> m<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> low<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 随机快速排序</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token function\">srand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span><span class=\"token punctuation\">)</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">&lt;</span> high<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 如果 low>high，说明已经划分为单个</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token comment\">// 先划分为左右两个区域</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">int</span> m <span class=\"token operator\">=</span> <span class=\"token function\">partition</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token comment\">// 再递归对左右两个区域排序</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token comment\">// 注：m 所在位置已经在正确的位置了，所以不需要包括进去</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">,</span> m <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> m <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> high<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"优点缺点-2\"><a class=\"anchor\" href=\"#优点缺点-2\">#</a> 优点 &amp; 缺点</h2>\n<h4 id=\"优点-2\"><a class=\"anchor\" href=\"#优点-2\">#</a> 优点</h4>\n<p>在基于比较的排序算法中已经是最快的了（当然还可以针对不同的数据继续优化），比较实用，在数据量大的情况下表现也不错，可能是现在使用最多的排序算法。</p>\n<h4 id=\"缺点-2\"><a class=\"anchor\" href=\"#缺点-2\">#</a> 缺点</h4>\n<p>归并排序需要额外的空间，快速排序不是稳定的排序（即它会交换同样大小的数字的顺序）。</p>\n<h1 id=\"不基于比较的排序算法\"><a class=\"anchor\" href=\"#不基于比较的排序算法\">#</a> 不基于比较的排序算法</h1>\n<h2 id=\"计数排序-onk\"><a class=\"anchor\" href=\"#计数排序-onk\">#</a> 计数排序 - O (n+k)</h2>\n<h4 id=\"核心原理-6\"><a class=\"anchor\" href=\"#核心原理-6\">#</a> 核心原理</h4>\n<p>针对<strong>小范围</strong>的<strong>自然数</strong>，统计每个数字出现的次数，然后按照从小到大依次输出。</p>\n<blockquote>\n<p>如果要排序的项目是小范围的整数，我们可以计算每个整数（在这个小范围内）的出现频率，然后通过循环该小范围来按排序顺序输出项目。</p>\n<p><em>(引自 VisuAlgo)</em></p>\n</blockquote>\n<h4 id=\"算法实现-6\"><a class=\"anchor\" href=\"#算法实现-6\">#</a> 算法实现</h4>\n<p>注：需要 O (n+k) 的额外空间</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 借助临时数组排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">countSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> maxNum<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 计数排序</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>con <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">calloc</span><span class=\"token punctuation\">(</span>maxNum <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        con<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 统计每个数字出现次数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> maxNum<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">--</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            arr<span class=\"token punctuation\">[</span>idx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 复制回去</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"基数排序-okn\"><a class=\"anchor\" href=\"#基数排序-okn\">#</a> 基数排序 - O (kN)</h2>\n<h4 id=\"核心原理-7\"><a class=\"anchor\" href=\"#核心原理-7\">#</a> 核心原理</h4>\n<p>针对<strong>范围大但数位小</strong>的<strong>自然数</strong>，创建 10 个桶 (0-9)，按照指定数位，依次放入对应桶中，再放入顺序取出，对每个数位从低到高重复操作。</p>\n<blockquote>\n<p>如果要排序的项目是大范围但小数位的整数，我们可以将计数排序（Counting Sort）思想与基数排序（Radix Sort）结合起来，以实现线性时间复杂度。<br>\n在基数排序中，我们将每个项目排序为一个 w 数字串（如果需要，我们填充小于 w 数字的前几个零的整数）。<br>\n对于最低有效位（最右边）到最高有效位（最左边），我们通过 N 个项目并将它们按照活动数字放到 10 个队列中（每个数字 [0…9] 一个），就好像 一个修改的计数排序，因为这保留了稳定性。 然后我们再次重新连接组，以便进行后续迭代。</p>\n<p><em>(引自 VisuAlgo)</em></p>\n</blockquote>\n<h4 id=\"算法实现-7\"><a class=\"anchor\" href=\"#算法实现-7\">#</a> 算法实现</h4>\n<p>注：需要 O (N+k) 的额外空间</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">radixSort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 基数排序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> len <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">// 桶初始化可以装下的元素数 &amp; 后续每次增加量</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">int</span> count<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// 每个桶当前装载的元素数量</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">int</span> maxCount<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>len<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 每个桶当前能装下的最大元素数量，0 桶设置为 len，原因见下面</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 初始化桶</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>con <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 最后遍历完所有数位后，所有的数都会过一遍 0 桶，所以一开始就设置为 len 的长度</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    con<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>len <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        con<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>N <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        maxCount<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> N<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\">// 遍历每个数位</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    BOOL ended <span class=\"token operator\">=</span> FALSE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> Bit <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> Bit <span class=\"token operator\">&lt;=</span> INT_MAX <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>ended<span class=\"token punctuation\">;</span> Bit <span class=\"token operator\">*=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        ended <span class=\"token operator\">=</span> TRUE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token comment\">// 提取当前数位，并将该数放入桶中</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">int</span> radix <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> Bit <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>Bit <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 当前数位</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span> <span class=\"token operator\">>=</span> maxCount<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                <span class=\"token comment\">// 桶满了，重新分配内存空间</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                maxCount<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span> <span class=\"token operator\">*=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                con<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">realloc</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxCount<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                    <span class=\"token comment\">// 内存分配失败</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            con<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            count<span class=\"token punctuation\">[</span>radix<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            <span class=\"token comment\">// 判断是否已经遍历结束</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                ended <span class=\"token operator\">=</span> FALSE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> aIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token comment\">// 把桶中的元素按照放入顺序放回数组</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> cIdx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> cIdx <span class=\"token operator\">&lt;</span> count<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> cIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                arr<span class=\"token punctuation\">[</span>aIdx<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> con<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>cIdx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            count<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>        <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>con<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"优点缺点-3\"><a class=\"anchor\" href=\"#优点缺点-3\">#</a> 优点 &amp; 缺点</h2>\n<h4 id=\"优点-3\"><a class=\"anchor\" href=\"#优点-3\">#</a> 优点</h4>\n<p>基于比较的算法有 O (N log N) 的时间复杂度下限，而这些不基于比较的排序可以突破这个下限，使时间复杂度降到线性，针对于特定的数据是最优解。</p>\n<h4 id=\"缺点-3\"><a class=\"anchor\" href=\"#缺点-3\">#</a> 缺点</h4>\n<p>对数据类型的要求比较苛刻，只在一些特定的数据集时有效。</p>\n<hr>\n<p>参考文章:<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly92aXN1YWxnby5uZXQvemgvc29ydGluZw==\">VisuAlgo - 排序</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWNuLyVFNiU4RSU5MiVFNSVCQSU4RiVFNyVBRSU5NyVFNiVCMyU5NQ==\"> Wikipedia - 排序算法</span></p>\n",
            "tags": [
                "算法与数据结构",
                "算法"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/02/23/Linux%E7%BB%88%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/",
            "url": "http://tagbug.github.io/2021/02/23/Linux%E7%BB%88%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/",
            "title": "Linux终端使用总结",
            "date_published": "2021-02-23T08:32:18.000Z",
            "content_html": "<blockquote>\n<p>总结归纳一下 Linux 的 Shell 的快捷键和常用命令<br>\n（环境基于 ubuntu-20.04.2.0）</p>\n</blockquote>\n<span id=\"more\"></span>\n<h2 id=\"shell快捷键\"><a class=\"anchor\" href=\"#shell快捷键\">#</a> Shell 快捷键</h2>\n<hr>\n<ul>\n<li>[ <code>方向键←→</code> ] 或 <code>Ctrl+B/F</code>  —— 光标向后（左）/ 前（右）移动</li>\n<li>[ <code>Home/End</code> ] 或 <code>Ctrl+A/E</code>  —— 光标移动到开头（最左边）/ 末尾（最右边）</li>\n<li>[ <code>方向键↑↓</code> ] 或 <code>Ctrl+P/N</code>  —— 显示上一条 / 下一条历史命令</li>\n<li>[ <code>Backspace/Del</code> ] 或 <code>Ctrl+H/D</code>  —— 删除光标前 / 后（被光标覆盖住）的字符</li>\n<li><code>Ctrl+U</code>  —— 删除光标前的所有字符</li>\n<li><code>Ctrl+L</code>  —— 清屏</li>\n<li><code>Tab</code>  —— 快速补全命令或目录（按一次或当有多个匹配项时两次）</li>\n<li><code>Ctrl+Alt+T</code>  —— 新建一个终端窗口</li>\n</ul>\n<h2 id=\"linux-基础常识\"><a class=\"anchor\" href=\"#linux-基础常识\">#</a> Linux 基础常识</h2>\n<hr>\n<ol>\n<li>使用 <code>ls</code>  命令显示文件或目录时的不同颜色：（一般情况下）<br>\n白色 —— 普通文件<br>\n蓝色 —— 目录<br>\n绿色 —— 可执行文件（相当于 Windows .EXE）<br>\n红色 —— 压缩文件<br>\n青色 —— 链接文件（相当于 Windows 快捷方式）<br>\n黄色 —— 设备文件<br>\n灰色 —— 其他文件</li>\n<li>Linux 下的文件类型：</li>\n</ol>\n<blockquote>\n<p>普通文件类型 （-）<br>\nLinux 中最多的一种文件类型，包括 纯文本文件 (ASCII)；二进制文件 (binary)；数据格式的文件 (data); 各种压缩文件。第一个属性为 [-] ，这些文件一般是用一些相关的应用程序创建，比如图像工具、文档工具、归档工具… … 或 cp 工具等。这类文件的删除方式是用 rm 命令。</p>\n<p>目录文件 （d）<br>\n就是目录， 能用 # cd 命令进入的。第一个属性为 [d]，例如 [drwxrwxrwx] ，创建目录的命令可以用 mkdir 命令，或 cp 命令，cp 可以把一个目录复制为另一个目录。删除用 rm 或 rmdir 命令。</p>\n<p>块设备（b）和 字符设备（c）<br>\n这个种类的文件，是用 mknode 来创建，用 rm 来删除。目前在最新的 Linux 发行版本中，我们一般不用自己来创建设备文件。因为这些文件是和内核相关联的。<br>\n块设备文件 ： 就是存储数据以供系统存取的接口设备，简单而言就是硬盘。例如一号硬盘的代码是 /dev/hda1 等文件。第一个属性为 [b] <br>\n字符设备文件：即串行端口的接口设备，例如键盘、鼠标等等。第一个属性为 [c]</p>\n<p>套接字文件 （s）<br>\n这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信。第一个属性为 [s]，最常在 /var/run 目录中看到这种文件类型</p>\n<p>管道文件 （p）<br>\nFIFO 也是一种特殊的文件类型，它主要的目的是，解决多个程序同时存取一个文件所造成的错误。FIFO 是 first-in-first-out (先进先出) 的缩写。第一个属性为 [p]</p>\n<p>符号链接（l）<br>\n和 Windows 操作系统中的快捷方式类似。</p>\n<p><em>引自<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vY3l5ei1sZS9wLzExMTc3NDU1Lmh0bWw=\"> Linux 下的 7 种文件类型 - CYYZ 古月</span></em></p>\n</blockquote>\n<ol start=\"2\">\n<li><code>ls -a</code>  显示路径下全部文件（包括隐藏的）</li>\n<li><code>ls -l</code>  查看路径下文件的详细信息<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/20210223092335.png\" alt=\"示例\" title=\"示例\"><br>\n tip：在 Linux 下文件夹（目录）所占用的磁盘空间都是 4096byte，目录大小不包括目录内的文件大小</li>\n<li>目录必须有执行权限才能进入</li>\n<li>Linux 下隐藏文件<strong>以。开头</strong></li>\n<li>itcast@itcast:~<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>第一个</mtext><mi>i</mi><mi>t</mi><mi>c</mi><mi>a</mi><mi>s</mi><mi>t</mi><mtext>：当前登陆的用户第二个</mtext><mi>i</mi><mi>t</mi><mi>c</mi><mi>a</mi><mi>s</mi><mi>t</mi><mtext>：主机名</mtext></mrow><annotation encoding=\"application/x-tex\">\n第一个itcast：当前登陆的用户\n第二个itcast：主机名\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">第</span><span class=\"mord cjk_fallback\">一</span><span class=\"mord cjk_fallback\">个</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">当</span><span class=\"mord cjk_fallback\">前</span><span class=\"mord cjk_fallback\">登</span><span class=\"mord cjk_fallback\">陆</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">用</span><span class=\"mord cjk_fallback\">户</span><span class=\"mord cjk_fallback\">第</span><span class=\"mord cjk_fallback\">二</span><span class=\"mord cjk_fallback\">个</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">主</span><span class=\"mord cjk_fallback\">机</span><span class=\"mord cjk_fallback\">名</span></span></span></span>：普通用户<br>\n $ 换成 #：超级用户（管理员权限）</li>\n<li>Linux 系统中硬盘名字：</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>硬盘1：sda</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token operator\">|</span>--主分区</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token operator\">|</span>    └--（最多允许有4个）--主分区1：sda1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token operator\">|</span>                       <span class=\"token operator\">|</span>-主分区2：sda2</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   <span class=\"token operator\">|</span>                       <span class=\"token operator\">|</span>-主分区3：sda3</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token operator\">|</span>                       └-主分区4：sda4</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   └--扩展分区</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          └--（第一个逻辑分区从sda5开始）--逻辑分区1:sda5</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                                        <span class=\"token operator\">|</span>-逻辑分区2：sda6</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                                        └<span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  硬盘2：sdb</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  硬盘3：sdc</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  硬盘4：sdd</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  磁盘设备种类：</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      sd -<span class=\"token operator\">></span> SCSI Device</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      hd -<span class=\"token operator\">></span> Hard Disk 硬盘</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      fd -<span class=\"token operator\">></span> Floppy Disk 软盘</pre></td></tr></table></figure><h2 id=\"shell常用命令\"><a class=\"anchor\" href=\"#shell常用命令\">#</a> Shell 常用命令</h2>\n<hr>\n<ol>\n<li>| 管道 - 将命令 1 的输出作为命令 2 的输入（命令 1 | 命令 2)</li>\n<li><code>pwd</code>  查看当前所在路径</li>\n<li>  <code>~</code>  ：家目录</li>\n<li><code>cd -</code>  ：在两个目录间切换</li>\n<li><code>rm</code>  参数：<br>\n <code>r</code> —— 递归（进入子目录）<br>\n <code>i</code> —— 提示<br>\n <code>f</code> —— 强制删除（rm 命令默认会加上这个参数）<br>\ntip： <code>rm -rf /</code>  懂的都懂</li>\n<li><code>mkdir</code>  （ <code>-p</code> ）/ <code>touch</code>  创建目录 / 文件</li>\n<li><code>cat</code>  查看文件内容</li>\n<li><code>cp</code>  拷贝文件或目录（拷贝目录时加 <code>-r</code> ）<br>\ntip: 拷贝文件时：软硬链接都拷贝原文件；<br>\n拷贝目录时：软链接拷贝过去还是软链接，硬链接拷贝原文件</li>\n<li><code>more</code>  一点一点的看某个文件，但是只能往下看，不能往上</li>\n<li><code>less</code>  一点一点的查看某个文件，比 more 更智能</li>\n<li><code>head</code> / <code>tail</code>  显示文件前 / 后十行（也可以加  <code>-5</code>  或者其他任意数字控制显示行数）</li>\n<li><code>mv</code>  移动（到一个已经存在的文件夹）或重命名</li>\n<li><code>ln</code>  创建硬链接<br>\n <code>ln -s</code>  创建软连接<br>\n tip：硬链接相当于新建文件名指向文件（给文件取个别名），软链接指向文件名</li>\n<li><code>wc</code>  获取文本文件的行数、单词数、字节数</li>\n<li><code>od</code>  查看二进制文件信息<br>\n参数： <code>-t</code>  指定数据的显示格式（c/d/f/o/u/x）</li>\n<li><code>du -h</code>  查看当前文件夹和子文件夹大小</li>\n<li><code>df -h</code>  查看磁盘容量信息</li>\n<li><code>which</code>  找到命令对应的路径</li>\n<li>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"><span>修改文件权限：chmod >folded</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> 文字设定法：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token punctuation\">[</span>who<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>+<span class=\"token operator\">|</span>-<span class=\"token operator\">|</span><span class=\"token operator\">=</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>mode<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    who: -<span class=\"token operator\">></span> 不写也相当于对所有的人</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        文件所有者：u</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        文件所属组：g</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        其他人：o</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        所有的人：a</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    +：添加权限</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    -：减少权限</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token operator\">=</span>：覆盖原来的权限</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    mode：</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        r：读</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        w：写</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        x：执行</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>例：chmod o+rx <span class=\"token punctuation\">[</span>文件名<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> 数字设定法：</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token punctuation\">[</span>三位数<span class=\"token punctuation\">]</span> -<span class=\"token operator\">></span>覆盖权限</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token punctuation\">[</span>+<span class=\"token operator\">|</span>-<span class=\"token operator\">|</span><span class=\"token operator\">=</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>三位数<span class=\"token punctuation\">]</span> -<span class=\"token operator\">></span>增加/减少/覆盖权限</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    没有权限：0</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    r：4</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    w：2</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    x：1</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>例：chmod <span class=\"token number\">765</span> <span class=\"token punctuation\">[</span>文件名<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token number\">7</span> -- rwx -- 文件所有者</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token number\">6</span> -- rw -- 文件所属组</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token number\">5</span> -- rx -- 其他人</pre></td></tr></table></figure></li>\n<li><code>chown</code>  改变文件所有者 [和所属组]<br>\n <code>sudo chown user1[:group2] [文件名]</code> <br>\n <code>chgrp</code>  改变所属组<br>\n tip：chown 和 chgrp 都需要管理员权限</li>\n<li><code>find [目录] -name [文件名]</code>  在指定目录下查找文件（文件名也可以使用通配符叠加 例如：* 和？）<br>\n <code>find [目录] -size [+|-][文件大小]</code>  找大于 / 小于<br>\n例：find [目录] -size +10K -size -10M 按大小范围查找<br>\n <code>find [目录] -type [d|f|b|c|s|p|l]</code>  按文件类型查找</li>\n<li><code>grep -r &quot;查找的内容&quot; [查找的路径]</code>  按文件内容查找</li>\n<li><code>sudo apt-get install [名字]</code>  在线安装软件<br>\n <code>sudo apt-get remove [名字]</code>  卸载软件<br>\n <code>sudo apt-get update</code>  更新软件列表<br>\n <code>sudo apt-get clean</code>  清理所有软件安装包（/var/cache/apt/archives/*.deb）<br>\ntip：也可用 aptitude 代替</li>\n<li><code>sudo dpkg -i [deb包]</code>  通过 deb 包安装软件<br>\n <code>sudo dpkg -r [名字]</code>  卸载软件</li>\n<li><code>mount [U盘对应的设备名(/dev/...)] [要挂载的目录]</code>  挂载 U 盘<br>\n <code>umount [挂载U盘的目录]</code>  卸载 U 盘<br>\n tip：卸载 U 盘时 U 盘不能被占用（包括 cd 到挂载 U 盘的目录下）<br>\ntip：当挂载 U 盘的目录中有文件时，挂载期间文件会被临时覆盖，待卸载 U 盘后恢复原状</li>\n<li><code>alias</code>  查看或设置别名<br>\n <code>alias [shell命令]</code>  查看别名<br>\n <code>alias [封装的命令名]='shell语句'</code>  （例：alias pag=‘ps aux | grep’）<br>\n（注意：需要长久有效需要去设置配置文件：.bashrc）</li>\n</ol>\n<h2 id=\"压缩包管理\"><a class=\"anchor\" href=\"#压缩包管理\">#</a> 压缩包管理</h2>\n<hr>\n<h3 id=\"基础工具\"><a class=\"anchor\" href=\"#基础工具\">#</a> 基础工具</h3>\n<ol>\n<li><code>gzip [要压缩的文件]</code>  —— .gz 格式的压缩包</li>\n<li><code>bzip2 [参数（-k）] [要压缩的文件]</code>  —— .bz2 格式的压缩包</li>\n</ol>\n<p>注意：</p>\n<ol>\n<li>gzip 和 bzip2 都只能对单个文件进行压缩，不能对目录进行压缩。</li>\n<li>gzip 和 bzip2 默认都不保留源文件，只有 bzip2 可以加 - k 参数保留源文件</li>\n</ol>\n<h3 id=\"进阶工具\"><a class=\"anchor\" href=\"#进阶工具\">#</a> 进阶工具</h3>\n<ol>\n<li><code>tar</code>  —— 不使用 z/j 参数，该命令只能对文件或目录打包</li>\n</ol>\n<blockquote>\n<p>参数：<br>\nc —— 创建 —— 压缩<br>\n x —— 释放 —— 解压缩<br>\n v —— 显示提示信息 —— 压缩 / 解压缩 —— 可以省略<br>\n f —— 指定压缩文件的名字<br>\n z —— 使用 gzip 的方式压缩文件 —— .gz<br>\nj —— 使用 bzip2 的方式压缩文件 —— .bz2</p>\n</blockquote>\n<blockquote>\n<p>压缩：<br>\n <code>tar zcvf [生成的压缩包的名字(推荐xxx.tar.gz)] [要压缩的文件或目录]</code> <br>\n <code>tar jcvf [生成的压缩包的名字(推荐xxx.tar.bzip2)] [要压缩的文件或目录]</code></p>\n</blockquote>\n<blockquote>\n<p>解压缩：<br>\n <code>tar jxvf [压缩包的名字]</code>  -&gt; 解压到当前目录<br>\n <code>tar jxvf [压缩包的名字] -C [目录]</code>  -&gt; 解压到指定目录</p>\n</blockquote>\n<blockquote>\n<p>Tip：tar 命令主要做的是打包的功能，内部调用 gzip 和 bzip2 进行压缩操作</p>\n</blockquote>\n<ol start=\"2\">\n<li><code>rar</code>  —— 必须手动安装该软件（实测 Ubuntu-20.04.2.0 自带有）</li>\n</ol>\n<blockquote>\n<p>参数：<br>\na —— 压缩<br>\n x —— 解压缩</p>\n</blockquote>\n<blockquote>\n<p>压缩：<br>\n <code>rar a [生成的压缩文件的名字（自动添加.rar后缀）] [要压缩的文件或目录]</code></p>\n</blockquote>\n<blockquote>\n<p>解压缩：<br>\n <code>rar x [压缩包文件名] [要解压到的目录（不写则默认当前目录）]</code></p>\n</blockquote>\n<ol start=\"3\">\n<li><code>zip</code></li>\n</ol>\n<blockquote>\n<p>参数：<br>\n-r 压缩目录时需要加上</p>\n</blockquote>\n<blockquote>\n<p>压缩：<br>\n <code>zip [压缩包的名字] [要压缩的文件]</code> <br>\n <code>zip -r [压缩包的名字] [要压缩的文件或目录]</code></p>\n</blockquote>\n<blockquote>\n<p>解压缩：<br>\n <code>unzip [压缩包的名字]</code> <br>\n <code>unzip [压缩包的名字] -d [要解压到的目录]</code></p>\n</blockquote>\n<p>总结：</p>\n<blockquote>\n<p>压缩：tar/rar/zip [参数] [生成的压缩文件的敏子] [要压缩的文件或目录]<br>\n 解压缩：tar/rar/unzip [参数] [压缩包的名字] [参数（rar 没有参数）] [要解压到的目录]</p>\n</blockquote>\n<h2 id=\"进程管理\"><a class=\"anchor\" href=\"#进程管理\">#</a> 进程管理</h2>\n<hr>\n<h3 id=\"相关命令\"><a class=\"anchor\" href=\"#相关命令\">#</a> 相关命令</h3>\n<ol>\n<li><code>who</code>  查看当前在线用户的情况（登录的用户名、使用的设备终端、登陆到系统的时间）</li>\n</ol>\n<blockquote>\n<p>关于 tty 设备：（这个没搞太清楚，仅做参考）<br>\ntty3 - tty6 表示文字界面（文字终端） - Ctrl+Alt+F3~F6<br>\ntty2 (?) 或：0 表示图形界面 - Ctrl+Alt+F2<br>\nCtrl + Alt + F2~F6 切换终端<br>\n Ctrl + Alt + F1 切换到用户登录界面（类似 Windows 下的锁定）</p>\n</blockquote>\n<ol start=\"2\">\n<li>\n<p><code>ps a</code>  列出当前所有用户的进程信息<br>\n <code>ps au</code>  在上面的基础上再加上 USER、CPU、MEM、VSZ、RSS 的信息<br>\n <code>ps aux</code>  在上面的基础上再加上没有终端的应用信息（没有 TTY 信息的）<br>\n <code>ps aux | grep [要查找的内容]</code>  按要查找的内容过滤进程（注：此命令会把自己也找出来）</p>\n</li>\n<li>\n<p><code>kill</code>  杀死进程<br>\n <code>kill -l</code>  查看 kill 命令可以发出的信号<br>\n <code>kill -SIGKILL（-9） [进程PID]</code>  发送 SIGKILL 信号杀死进程</p>\n</li>\n<li>\n<p><code>env</code>  查看系统环境变量<br>\n <code>env | grep [要查找的值]</code>  按内容过滤环境变量</p>\n</li>\n<li>\n<p><code>top</code>  类似 Windows 下的任务管理器，但只能看而不能进行任何操作</p>\n</li>\n</ol>\n<h2 id=\"网络相关\"><a class=\"anchor\" href=\"#网络相关\">#</a> 网络相关</h2>\n<hr>\n<h3 id=\"常用命令\"><a class=\"anchor\" href=\"#常用命令\">#</a> 常用命令</h3>\n<ol>\n<li><code>ifconfig</code>  查看网络配置信息（相当于 CMD 的 ipconfig）</li>\n</ol>\n<blockquote>\n<p>eth0 - 第一块网卡（第二块 eth1…）<br>\n硬件地址（MAC 地址）</p>\n</blockquote>\n<ol start=\"2\">\n<li>\n<p><code>ping</code>  同 CMD 的 ping，但是会一直运行直到用户手动结束<br>\n <code>ping -c [次数]</code>  指定 ping 的次数<br>\n <code>ping -i [秒数]</code>  指定每过多少秒给一条回复</p>\n</li>\n<li>\n<p><code>nslookup [域名]</code>  查看网站对应的 IP 地址</p>\n</li>\n</ol>\n<h2 id=\"用户管理\"><a class=\"anchor\" href=\"#用户管理\">#</a> 用户管理</h2>\n<hr>\n<h3 id=\"相关命令-2\"><a class=\"anchor\" href=\"#相关命令-2\">#</a> 相关命令</h3>\n<ol>\n<li>\n<p>创建用户：<br>\n <code>sudo adduser [用户名（只能小写英文字母）]</code> <br>\n <code>sudo useradd -s [使用的bash目录（/bin/bash）] -g [所属的组] -d [指定用户的家目录(/home/xxx)] -m（没有这个目录的话就创建） [用户名]</code>  （注：通过这条命令创建的用户没有密码，需要再设置 - sudo passwd [用户名]）</p>\n</li>\n<li>\n<p>删除用户：<br>\n <code>sudo deluser [用户名]</code>  （注：这样删除后用户对应的家目录不会被删除）<br>\n <code>sudo userdel -r [用户名]</code>  （注：这样会把用户对应的家目录一起删除）</p>\n</li>\n<li>\n<p>查看现有用户：<br>\n <code>vi /etc/passwd</code>   （/etc/passwd 里存放的是所有用户的信息）</p>\n</li>\n</ol>\n<h2 id=\"ftp服务器搭建-vsftpd\"><a class=\"anchor\" href=\"#ftp服务器搭建-vsftpd\">#</a> ftp 服务器搭建 – vsftpd</h2>\n<hr>\n<p>ftp 服务器作用：实现文件的上传和下载</p>\n<h3 id=\"服务器端\"><a class=\"anchor\" href=\"#服务器端\">#</a> 服务器端</h3>\n<p><em><strong>（ftp 服务器在本机环境中启动服务失败，原因暂不明，以下仅供参考）</strong></em></p>\n<ol>\n<li>\n<p>修改配置文件（/etc/vsftpd.conf）<br>\n <code>sudo gedit /etc/vsftpd.conf</code>  或 <code>sudo vi /etc/vsftpd.conf</code>  打开配置文件<br>\n（注意：更改时不要随意修改配置文件书写格式）</p>\n</li>\n<li>\n<p>重启服务<br>\n <code>sudo service vsftpd restart</code></p>\n</li>\n</ol>\n<h3 id=\"客户端\"><a class=\"anchor\" href=\"#客户端\">#</a> 客户端</h3>\n<p><em><strong>（仅供参考）</strong></em></p>\n<ol>\n<li>\n<p>登录<br>\n <code>ftp [服务器IP]</code> <br>\n 实名登录：用户名 + 密码<br>\n匿名登录：anonymous + 直接回车</p>\n</li>\n<li>\n<p>文件的上传和下载<br>\n <code>put file</code> <br>\n <code>get file</code> <br>\n（注意：不允许操作目录，可以对目录打包后操作）</p>\n</li>\n</ol>\n<h2 id=\"nfs网络共享服务器\"><a class=\"anchor\" href=\"#nfs网络共享服务器\">#</a> nfs 网络共享服务器</h2>\n<hr>\n<p>类似 Windows 下的共享文件夹</p>\n<h3 id=\"服务器端-2\"><a class=\"anchor\" href=\"#服务器端-2\">#</a> 服务器端</h3>\n<ol>\n<li>\n<p>创建共享目录<br>\n <code>mkdir [dir]</code></p>\n</li>\n<li>\n<p>修改配置文件（/etc/exports）<br>\n <code>[共享目录路径] [允许访问的IP网段（*代表所有）]([参数1],[参数2],...)</code> <br>\n 参数可用：rw —— 可读可写，sync —— 从内存同步到磁盘</p>\n</li>\n<li>\n<p>重启服务<br>\n <code>sudo service nfs-kernel-server restart</code></p>\n</li>\n</ol>\n<h3 id=\"客户端-2\"><a class=\"anchor\" href=\"#客户端-2\">#</a> 客户端</h3>\n<ol>\n<li>挂载共享目录<br>\n <code>sudo mount [服务器IP:共享目录路径] /mnt</code></li>\n</ol>\n<h2 id=\"ssh服务器\"><a class=\"anchor\" href=\"#ssh服务器\">#</a> ssh 服务器</h2>\n<hr>\n<p><strong>（需要先安装 openssh-server）</strong></p>\n<h3 id=\"基本命令\"><a class=\"anchor\" href=\"#基本命令\">#</a> 基本命令</h3>\n<p>查看 SSH 是否安装： <code>sudo aptitude show openssh-server</code></p>\n<p>远程登录： <code>ssh [用户名]@[IP]</code></p>\n<p>退出登陆： <code>logout</code></p>\n<h3 id=\"scp命令super-copy\"><a class=\"anchor\" href=\"#scp命令super-copy\">#</a> scp 命令（super copy）</h3>\n<p><code>scp -r [用户名]@[IP]:[目标文件绝对路径] [保存到的本机路径（绝对或相对）]</code></p>\n<p>拷贝目录时须加 <code>-r</code>  参数</p>\n<hr>\n<p><strong>未完待续…</strong></p>\n<p>参考文章:<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWR0NDExZjdUWg==\">linux 全套教程【黑马】</span></p>\n",
            "tags": [
                "Linux",
                "Shell",
                "Linux终端使用"
            ]
        },
        {
            "id": "http://tagbug.github.io/2021/02/04/ujsAutoClock%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/",
            "url": "http://tagbug.github.io/2021/02/04/ujsAutoClock%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/",
            "title": "ujsAutoClock使用方法及开发思路",
            "date_published": "2021-02-03T22:55:55.000Z",
            "content_html": "<p>ujsAutoClock 江苏大学自动健康打卡项目（Chrome 扩展 &amp; Android APP）</p>\n<ul>\n<li>设置简单，通知推送，QQ 接龙，熄屏运行（不同系统环境、Chrome 版本可能不一定有效）<del>（妈妈再也不用担心没打卡啦</del></li>\n<li>Chrome 扩展项目地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RhZ2J1Zy91anNBdXRvQ2xvY2s=\">https://github.com/tagbug/ujsAutoClock</span></li>\n<li>Android 项目地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RhZ2J1Zy91anNBdXRvQ2xvY2suYXBr\">https://github.com/tagbug/ujsAutoClock.apk</span></li>\n</ul>\n<span id=\"more\"></span>\n<h2 id=\"食用方法\"><a class=\"anchor\" href=\"#食用方法\">#</a> 食用方法</h2>\n<hr>\n<blockquote>\n<p>下面是 Chrome 扩展的使用说明，Android 版本直接下载就行了，应该不用说明了</p>\n</blockquote>\n<ul>\n<li>\n<p>1. 在 Github 上下载扩展</p>\n</li>\n<li>\n<p>2. 打开 Chrome 扩展程序的开发者模式<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/caozuo1.png\" alt=\"在最右上角\" title=\"在最右上角\"></p>\n</li>\n<li>\n<p>3. 选择 <code>加载已解压的扩展程序</code></p>\n</li>\n<li>\n<p>4. 选择 ujsAutoClock 文件夹</p>\n</li>\n<li>\n<p>5. 允许 Chrome 在后台运行（占用系统资源很小）<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/caozuo2.png\" alt=\"在设置-&gt;高级-&gt;系统里可以找到\" title=\"在设置-&gt;高级-&gt;系统里可以找到\"></p>\n</li>\n<li>\n<p>6. 首次安装会自动弹出设置页，填写好配置后保存，就可以自动运行了</p>\n</li>\n<li>\n<p>7. 如果想测试打卡效果直接在 Chrome 地址栏旁边的扩展程序里点击扩展图标</p>\n</li>\n</ul>\n<div class=\"img-x\">\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/caozuo3.png\" alt=\"也可以在这里快速更改信息\" title=\"也可以在这里快速更改信息\"></p>\n</div>\n<ul>\n<li>8. 最新版增加 QQ 群自动接龙功能，接龙是接群的第一个，因为有 QQ 密码这种敏感信息，需要右键扩展，在选项中配置</li>\n</ul>\n<div class=\"img-x\">\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/caozuo4.png\" alt=\"就是这里\" title=\"就是这里\"></p>\n</div>\n<ul>\n<li>附。在 Chrome 扩展程序页选择选择 <code>ujs自动健康打卡</code>  -&gt; 查看视图 <code>背景页</code> 可以在 <code>Console</code>  里看到自动打卡记录。</li>\n</ul>\n<p>使用截图：<br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/use1.png\"><br>\n<img data-src=\"https://cdn.jsdelivr.net/gh/tagbug/demo@latest/img/use2.png\"></p>\n<h2 id=\"开发思路\"><a class=\"anchor\" href=\"#开发思路\">#</a> 开发思路</h2>\n<hr>\n<h3 id=\"chrome扩展\"><a class=\"anchor\" href=\"#chrome扩展\">#</a> Chrome 扩展</h3>\n<p>其实一开始，我是拒绝的，一是因为写代码麻烦，二是因为觉得不重要，每天手动打卡就顺手的事，然而我错了，对于尤其像我这种昼夜时差颠倒的人，一不小心就会忘记，然后被打电话，所以…╮(￣▽￣&quot;)╭</p>\n<h4 id=\"登录认证\"><a class=\"anchor\" href=\"#登录认证\">#</a> <strong>登录认证</strong></h4>\n<ol>\n<li>打卡界面本来是在微信上的，选择 <code>在浏览器打开</code> 会得到一个打卡网址 <code>serviceUrl=&quot;http://yun.ujs.edu.cn/xxhgl/yqsb/index&quot;</code> ，很显然需要用户认证，通过 <code>&quot;https://pass.ujs.edu.cn/cas/login?service=&quot;+serviceUrl</code>  进行统一身份认证，浏览器会自动保存 Cookie（或者直接 <code>&quot;https://pass.ujs.edu.cn/cas/login&quot;</code>  好像也可以，这个参数的作用好像不是很明显，我没深究)</li>\n<li>对登陆页的 form.submit 进行分析，可知 POST 有以下参数： <code>username</code> | <code>password</code> | <code>captchaResponse</code> | <code>lt</code> | <code>dllt</code> | <code>execution</code> | <code>_eventId</code> | <code>rmShown</code></li>\n<li>后面五个参数都是隐藏在 form 表单中，每次请求内容好像都没变过，前三个参数都是需要用户填写的，其中 password 字段在 POST 提交时还会被用 AES 加密（AES 用到的密钥也放在了表单中，每次请求都会改变）</li>\n<li>知道了这些后，就可以写登录认证方法了，前面两个参数用户提供，每次不变，后面五个参数直接从 document 中提取，唯一比较棘手的就是验证码的处理，验证码每次从 <code>'https://pass.ujs.edu.cn/cas/captcha.html?ts=' + new Date().getMilliseconds()</code>  中随机生成</li>\n<li>想到可以用 OCR 识别，在网上找了很多 OCR 的 API，要么是要钱，要么是效果不好，还好知道一个效果不错的免费 OCR，但是却没有开放的 API 接口，无奈只好自己扒</li>\n<li>其实扒这个 OCR 的接口才是最耗时间精力的，中间踩了不少坑，反复用浏览器 F12 下断点调试 + BurpSuite 抓包，最后总算也是解决了，太过冗长也就不细讲了（其实这里用图像处理来对付验证码也可以，但是对于 JS 来说显然调 API 更省力）</li>\n<li>到这里终于是可以写自动化脚本把这个流程串联起来了（访问 <code>https://pass.ujs.edu.cn/cas/login</code>  获取表单参数 -&gt; 访问 <code>'https://pass.ujs.edu.cn/cas/captcha.html?ts=' + new Date().getMilliseconds()</code>  获取验证码图片信息 -&gt; 丢给 OCR 处理 -&gt; 返回验证码后把表单参数接起来 -&gt;POST 获取返回数据 -&gt; 检查登录状态是否成功（因为 OCR 有一定几率识别有误差，如果是验证码错误就重试，如果用户名密码错误直接结束，其他错误抛出异常））</li>\n</ol>\n<h4 id=\"定时打卡任务\"><a class=\"anchor\" href=\"#定时打卡任务\">#</a> <strong>定时打卡任务</strong></h4>\n<ol>\n<li>在登录认证后直接访问 <code>'http://yun.ujs.edu.cn/xxhgl/yqsb/grmrsb?v=' + parseInt(Math.random() * 10000)</code>  就可以看到保存的打卡表单信息，注意到只有 <code>下午温度</code> 、 <code>上午温度</code> 和 <code>其他异常</code> 三个字段每天刷新，需要填写，这里用 Chrome 扩展强大的脚本插入功能，在页面加载完成后自动填写空缺字段提交，并返回提交结果</li>\n<li>最后实现每天定时执行，用 Chrome 扩展的消息通信功能协调各个子模块的运行，用 <code>chrome.storage.local</code>  储存 <code>用户名</code> 、 <code>密码</code> 和 <code>每日自动执行时间</code> ，用 <code>chrome.notifications</code>  实现桌面通知， <code>popup.html</code>  和 <code>options.html</code>  实现设置的读取和保存，方便用户操作</li>\n</ol>\n<h3 id=\"android应用\"><a class=\"anchor\" href=\"#android应用\">#</a> Android 应用</h3>\n<p>这个是后来开发的，因为吧，虽然 Chrome 扩展开发起来简单，但最大的不足之处就在于无法同步通知到手机上，本来是想用发邮件的方式，找了很久也没发现什么用 JS 实现起来较为简单的方案，然后呢，我想着干脆直接在手机上开发一个应用，这样不就方便多了，而且实现原理都差不多… 嗯，原理是差不多，细节就差远了，本来以为一两天就能写完，最后边学边写写了四五天…</p>\n<h4 id=\"基本逻辑\"><a class=\"anchor\" href=\"#基本逻辑\">#</a> <strong>基本逻辑</strong></h4>\n<ol>\n<li>Get 登录页 -&gt; 拿到一部分 Post 表单数据 -&gt;Get 验证码 -&gt; 用 OCR 读取 -&gt; 整合表单 Post 登录 -&gt;Get 打卡表单 -&gt; 填补空缺项后 Post 打卡</li>\n</ol>\n<h4 id=\"细节\"><a class=\"anchor\" href=\"#细节\">#</a> <strong>细节</strong></h4>\n<ol>\n<li>\n<p>整个流程都是需要 HTTP 协议来进行数据交换的，原生的 Java HTTP API 效率太低了，用了开源软件 OkHttp，而且还需要实现 Cookie 的存储、更新和提交，Chrome 中浏览器就已经做好了这些，而在 Java 中只能自己来处理<br>\n解决方法：实现 OkHttp 中的 CookieJar 接口来自动处理 Cookie（缓存、读取、过期更新、本地化）<br>\n这里参考了：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zcXVhcmUuZ2l0aHViLmlvL29raHR0cC8=\">OkHttp 官方文档</span>和<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vc2hlbmNoYW5naHVpL3AvNjQwOTY5OS5odG1s\"> OkHttp3 实现 Cookies 管理及持久化</span></p>\n</li>\n<li>\n<p>然后第二个就是 Android 应用运行机制，包括应用组件：Activity、Service、BroadcastReceiver 和 ContentProvider（虽然我只用到了第一个和第三个…），清单文件，应用资源（布局、图标等），Intent、Context、Bundle…<br>\n 不得不说，相当复杂…<del>（关键是官方 API 文档还全是英文，看都看不懂）</del></p>\n</li>\n<li>\n<p>第三个是用闹钟 AlarmManager 实现定时执行任务<del>（这个东西是真迷幻，不知道为什么定时总会有几分钟偏差）</del>（用 setExactAndAllowWhileIdle 方法即可准时广播）</p>\n</li>\n<li>\n<p>最后用 Notification 推送通知（这个东西也是，不同的 API 所要求的实现方法有细微区别，不注意就会导致通知推送不出来，找半天都不知道是哪的问题…）</p>\n</li>\n<li>\n<p>Android 系统的开放性、既要兼顾不同的 Android 系统版本（从高到低的 SDK 版本）、又因为各种厂商对自家手机系统的魔改，导致 Android 开发是个相当不容易的工作… 很佩服</p>\n</li>\n</ol>\n<p>参考:<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGl1eGlhbmFuL3AvY2hyb21lLXBsdWdpbi1kZXZlbG9wLmh0bWw=\">Chrome 插件 (扩展) 开发全攻略</span><br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5nb29nbGUuY24vZG9jcw==\"> Android 开发者</span></p>\n",
            "tags": [
                "works",
                "Chrome扩展应用",
                "Android应用",
                "works"
            ]
        }
    ]
}